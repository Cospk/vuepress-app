<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.66" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://Cospk.github.io/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html"><meta property="og:site_name" content="Golangå…¨æ ˆæŒ‡å—"><meta property="og:title" content="Redis"><meta property="og:description" content="Redisç†è®º å®˜æ–¹ç½‘ç«™ï¼šhttps://redis.io/ ä¸­æ–‡ç½‘ç«™ï¼šhttps://www.redis.net.cn/ 01ã€Redis ç®€ä»‹ Redis æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆBSDåè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚ Redis ç‰¹ç‚¹ï¼š Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Re..."><meta property="og:type" content="article"><meta property="og:image" content="https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_struct.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-03-18T03:55:25.000Z"><meta property="article:author" content="xiaoxie"><meta property="article:tag" content="db"><meta property="article:published_time" content="2020-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2025-03-18T03:55:25.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Redis","image":["https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_struct.png","https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis-RDB.png","https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_RDBConf.png","https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_AOFConf.png","https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_Sentinel.png","https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_cluster.png"],"datePublished":"2020-01-01T00:00:00.000Z","dateModified":"2025-03-18T03:55:25.000Z","author":[{"@type":"Person","name":"xiaoxie"}]}</script><link rel="icon" href="/vuepress-app/favicon.svg"><title>Redis | Golangå…¨æ ˆæŒ‡å—</title><meta name="description" content="Redisç†è®º å®˜æ–¹ç½‘ç«™ï¼šhttps://redis.io/ ä¸­æ–‡ç½‘ç«™ï¼šhttps://www.redis.net.cn/ 01ã€Redis ç®€ä»‹ Redis æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆBSDåè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„key-valueæ•°æ®åº“ã€‚ Redis ç‰¹ç‚¹ï¼š Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚ Re...">
    <link rel="preload" href="/vuepress-app/assets/style-BU0LSV_n.css" as="style"><link rel="stylesheet" href="/vuepress-app/assets/style-BU0LSV_n.css">
    <link rel="modulepreload" href="/vuepress-app/assets/app-CG6bgqhH.js"><link rel="modulepreload" href="/vuepress-app/assets/Redis.html-BuDd1cTn.js"><link rel="modulepreload" href="/vuepress-app/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/vuepress-app/assets/index.html-DJGt4d0p.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/portfolio.html-BD8UVD4-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.ç®—æ³•.html-QeR9x9qz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.è®¾è®¡æ¨¡å¼.html-DVyQUrut.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/git è§„èŒƒ.html-CzexekNk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/git.html-032anuEx.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/markdown.html-BTFsPn_p.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/å¥½ç‰©åˆ†äº«.html-M9qOfCFk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-Btn-wody.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BWC3dOv-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/ç½‘ç»œåŸºç¡€.html-DEdgCfKl.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.use.html-CB71nnRu.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.howWork.html-BFvYNmDk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-B-LmUlK0.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-DyKMi0yE.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-COjixKZs.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/å¸¸ç”¨åŒ…å¤§å…¨.html-CpegrmsP.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.golang.html-D4nJnjAZ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.grammer.html-BuCBHbVm.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/2.datatype.html-DryoA7YL.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/3.variable.html-4ia_Vq9N.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/4.io.html-DcPaUK3s.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/5.condition.html-CYV1UhvI.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/6.data_structures.html-C8qsDXyT.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-CV7cNUsO.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.interface.html-CudaSMgf.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/10.cgo.html-C2GOeg2b.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/11.pprof.html-BYKRQVLe.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/12.followUp.html-JqotTJlJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/2.generic.html-DE0T38UP.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/3.reflect.html-CQNgvd4A.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/4.types.html-Db8bw65x.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/5.error.html-CCOeGcIu.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/6.file.html-CqoCIlaU.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/7.concurrency.html-DVb1X2ke.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/8.module.html-DnMQisAC.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/9.test.html-CTMbZGSe.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BE8oefdE.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/notes.html-n6QlJpbJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/test.html-B1cbs-5Y.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.åŸºç¡€è¯­æ³•.html-DWsuU2ll.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/2.è¿›é˜¶åŸç†.html-F-BEoDmd.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-azVT5kSm.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/å¤§å‚é¢è¯•é¢˜.html-J5-a1zik.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/å¯¹è±¡æ± .html-CsHQQa3X.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/ææ™ºå¤©ä¸‹.html-DUr633v9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/é¢è¯•é¢˜ï¼ˆç­”æ¡ˆï¼‰.html-DkM3AljN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BJsA7HQ7.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Consul.html-xywJsBxP.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Docker.html-DJZ8sN8j.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/GRPC.html-MW2pAuZJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Jaeger.html-BrFPQpnj.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kong.html-Df7LgaAW.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kubernetes.html-CxXGj7rh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Nacos.html-J6yPpPCB.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-B79T7bMh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Sentinel.html-BeGZn4Wa.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BkZ9yN8h.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-B5tmvR5t.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Elasticsearch-Go.html-C9aEJ3FJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Elasticsearch.html-CZiIOjzI.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MYSQLé«˜çº§.html-D_DxwnLh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MongoDB-Go.html-CKFW3GlF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MongoDB.html-D0KFEV1P.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MySQL-Go.html-Dl5PEQoA.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MySQL.html-BKwc7btD.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BBfMag8G.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Redis-Go.html-BsVg-IIl.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/EMQX.html-DUsT8Pjq.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kafka1.html-CqAfByPn.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kafka_go.html-CUtks8Kt.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-aRIvio30.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/RocketMQ.html-BoXPiuXz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/kafka.html-Z4wJ17tF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kong.html-XX6MT0n2.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Nginx.html-CY_VVDFa.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-Cp7HGJjB.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Docker-Do.html-DIvxwsHu.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Docker.html-CPGMPOPu.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Jenkins.html-BNmrwO8M.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kubernetes.html-Dx09GAhD.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-DCy_QoxW.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/kubernetes-Do.html-DAYNGrCk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/casbin.html-Dx0zjnwD.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.use.html-aMSYXAcZ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.howWork.html-CQqOnYcd.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-B2-BcHNa.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.use.html-DyTJ3_g5.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.howWork.html-DudqChHi.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-B6VJS887.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-G1g76VGZ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Zap.html-C61_-lUo.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/ç”¨æˆ·è®¤è¯é€‰å‹.html-CvfjcLbz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/ç›‘æ§.html-DX9SDRpD.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.intro.html-CghpmdSz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-z6pteYVZ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/encode.html-D3NBxjkZ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/flag.html-D1cdlkLa.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/http.html-C61uwnlN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/log.html-C2Obw4id.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/math.html-Cwx9xZvu.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/net.html-ygX58gc_.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/sort.html-D3ZMKzcz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/strconv.html-BuRZCKrl.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/strings.html-hpkND0dv.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/template.html-CKjnHtgU.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/time.html-CXi4thPc.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/unicode.html-lL6scpQR.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/unsafe.html-CBvmoEf5.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.runtime.html-Deh4NUh8.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.å¹¶å‘.html-BQLX9c5e.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/2.æ•°æ®ç»“æ„.html-CZnmAwEs.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/3.é”™è¯¯å¤„ç†.html-CFf2dWfi.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-DMnp1ev-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/404.html-BbeqS6w1.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-fnkNcJTg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-CiGQdepJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-Cyk7m9K5.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BmdunNAc.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-Qzg8KPnC.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-Ta_MqXMa.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/flowchart-CTwbLKUk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index-izhIXQi-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index-DRWmbcXV.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index-B2Pezylg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/mermaid.esm.min-URohNFRN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/giscus-BZxmVUME.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/SearchResult-TZPv2Nah.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/setupDevtools-7MC2TMWH-D3bvDbm5.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/vuepress-app/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo light" src="/vuepress-app/log.svg" alt><img class="vp-nav-logo dark" src="/vuepress-app/logDark.svg" alt><span class="vp-site-name hide-in-pad">Golangå…¨æ ˆæŒ‡å—</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/vuepress-app/" aria-label="é¦–é¡µ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->é¦–é¡µ<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="golang"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>golang<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/%E5%9F%BA%E7%A1%80/" aria-label="GoåŸºç¡€"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-eraser" style=""></span><!--]-->GoåŸºç¡€<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/%E8%BF%9B%E9%98%B6/" aria-label="Goè¿›é˜¶"><!--[--><img class="icon" src="/vuepress-app/assets/icon/up.png" alt aria-hidden no-view style=""><!--]-->Goè¿›é˜¶<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/" aria-label="åŸç†"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-gears" style=""></span><!--]-->åŸç†<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/web%E6%A1%86%E6%9E%B6/" aria-label="æ¡†æ¶"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-sitemap" style=""></span><!--]-->æ¡†æ¶<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/%E9%9D%A2%E8%AF%95/" aria-label="é¢è¯•"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-feather" style=""></span><!--]-->é¢è¯•<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ä¸­é—´ä»¶"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-layer-group" style=""></span>ä¸­é—´ä»¶<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" aria-label="MySql"><!--[--><img class="icon" src="/vuepress-app/assets/icon/mysql.png" alt aria-hidden no-view style=""><!--]-->MySql<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html" aria-label="Redis"><!--[--><img class="icon" src="/vuepress-app/assets/icon/redis.png" alt aria-hidden no-view style=""><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB.html" aria-label="MongoDB"><!--[--><img class="icon" src="/vuepress-app/assets/icon/mongodb.png" alt aria-hidden no-view style=""><!--]-->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/kafka.html" aria-label="kafka"><!--[--><img class="icon" src="/vuepress-app/assets/icon/Kafka.png" alt aria-hidden no-view style=""><!--]-->kafka<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E7%BD%91%E5%85%B3/Nginx.html" aria-label="Nginx"><!--[--><img class="icon" src="/vuepress-app/assets/icon/Nginx.png" alt aria-hidden no-view style=""><!--]-->Nginx<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E8%BF%90%E7%BB%B4/Docker.html" aria-label="Docker"><!--[--><img class="icon" src="/vuepress-app/assets/icon/docker.png" alt aria-hidden no-view style=""><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E8%BF%90%E7%BB%B4/Kubernetes.html" aria-label="Kubernetes"><!--[--><img class="icon" src="/vuepress-app/assets/icon/kubernetes.png" alt aria-hidden no-view style=""><!--]-->Kubernetes<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="æ¶æ„"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-network-wired" style=""></span>æ¶æ„<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" aria-label="å¾®æœåŠ¡"><!--[--><img class="icon" src="/vuepress-app/assets/icon/micro.png" alt aria-hidden no-view style=""><!--]-->å¾®æœåŠ¡<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/framework/%E5%88%86%E5%B8%83%E5%BC%8F/" aria-label="åˆ†å¸ƒå¼"><!--[--><img class="icon" src="/vuepress-app/assets/icon/kubernetes.png" alt aria-hidden no-view style=""><!--]-->åˆ†å¸ƒå¼<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/framework/%E9%AB%98%E5%8F%AF%E7%94%A8/" aria-label="é«˜å¯ç”¨"><!--[--><img class="icon" src="/vuepress-app/assets/icon/available.png" alt aria-hidden no-view style=""><!--]-->é«˜å¯ç”¨<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/framework/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8/" aria-label="é¢†åŸŸé©±åŠ¨"><!--[--><img class="icon" src="/vuepress-app/assets/icon/DDD.png" alt aria-hidden no-view style=""><!--]-->é¢†åŸŸé©±åŠ¨<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="è®¡ç®—æœº"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-computer" style=""></span>è®¡ç®—æœº<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/computer/%E7%BD%91%E7%BB%9C/" aria-label="è®¡ç®—æœºç½‘ç»œ"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-globe" style=""></span><!--]-->è®¡ç®—æœºç½‘ç»œ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/computer/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" aria-label="æ“ä½œç³»ç»Ÿ"><!--[--><img class="icon" src="/vuepress-app/assets/icon/linux.png" alt aria-hidden no-view style=""><!--]-->æ“ä½œç³»ç»Ÿ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/computer/0.%E7%AE%97%E6%B3%95.html" aria-label="å¸¸ç”¨ç®—æ³•"><!--[--><img class="icon" src="/vuepress-app/assets/icon/arithmetic.png" alt aria-hidden no-view style=""><!--]-->å¸¸ç”¨ç®—æ³•<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/computer/1.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="è®¾è®¡æ¨¡å¼"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-ruler" style=""></span><!--]-->è®¾è®¡æ¨¡å¼<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å¥½ç‰©åˆ†äº«"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-share-nodes" style=""></span>å¥½ç‰©åˆ†äº«<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/share/%E5%A5%BD%E7%89%A9%E5%88%86%E4%BA%AB.html" aria-label="å¥½ç‰©åˆ†äº«"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-share-nodes" style=""></span><!--]-->å¥½ç‰©åˆ†äº«<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/share/git.html" aria-label="git"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-git-alt" style=""></span><!--]-->git<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Cospk" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="slimsearch-button" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">æœç´¢</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span><span class="vp-sidebar-title">æ•°æ®åº“</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" aria-label="MySQL-åŸºç¡€"><!---->MySQL-åŸºç¡€<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL-Go.html" aria-label="MySQL-Go"><!---->MySQL-Go<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL%E9%AB%98%E7%BA%A7.html" aria-label="MySQLé«˜çº§"><!---->MySQLé«˜çº§<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html" aria-label="Redis"><!---->Redis<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis-Go.html" aria-label="Redis - Go"><!---->Redis - Go<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB.html" aria-label="MongoDB"><!---->MongoDB<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB-Go.html" aria-label="MongoDB - Go"><!---->MongoDB - Go<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Elasticsearch.html" aria-label="ElasticSearch - Go"><!---->ElasticSearch - Go<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Elasticsearch-Go.html" aria-label="ElasticSearch - Go"><!---->ElasticSearch - Go<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/vuepress-app/assets/icon/MQ.png" alt aria-hidden no-view style=""><span class="vp-sidebar-title">æ¶ˆæ¯ç»„ä»¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/vuepress-app/assets/icon/network.png" alt aria-hidden no-view style=""><span class="vp-sidebar-title">ç½‘å…³</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/vuepress-app/assets/icon/docker.png" alt aria-hidden no-view style=""><span class="vp-sidebar-title">è¿ç»´</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">é‰´æƒ</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Redis</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">xiaoxie</span></span><span property="author" content="xiaoxie"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2020å¹´1æœˆ1æ—¥</span><meta property="datePublished" content="2020-01-01T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 49 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT49M"></span><!----><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color5" role>db</span><!--]--><meta property="keywords" content="db"></span></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_01ã€redis-ç®€ä»‹">01ã€Redis ç®€ä»‹</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#redis-ä¼˜åŠ¿">Redis ä¼˜åŠ¿</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸ºä»€ä¹ˆç”¨redis">ä¸ºä»€ä¹ˆç”¨redis</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_02ã€redisçš„ä¸‹è½½å’Œå®‰è£…">02ã€Redisçš„ä¸‹è½½å’Œå®‰è£…</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-windowä¸‹å®‰è£…redisæœåŠ¡">1.windowä¸‹å®‰è£…RedisæœåŠ¡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-linuxä¸‹å®‰è£…redisæœåŠ¡">2.Linuxä¸‹å®‰è£…RedisæœåŠ¡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-redisé…ç½®æ–‡ä»¶è¯¦è§£">3.Redisé…ç½®æ–‡ä»¶è¯¦è§£</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_03ã€å…³äºredis-å‘½ä»¤">03ã€å…³äºRedis å‘½ä»¤</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#a-keyå‘½ä»¤">a.Keyå‘½ä»¤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#b-æœåŠ¡ç«¯å‘½ä»¤">b.æœåŠ¡ç«¯å‘½ä»¤</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_04ã€æ•°æ®ç»“æ„">04ã€æ•°æ®ç»“æ„</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-å­—ç¬¦ä¸²string">1. å­—ç¬¦ä¸²String</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_2-åˆ—è¡¨list">2.åˆ—è¡¨List</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-å“ˆå¸Œè¡¨hash">3.å“ˆå¸Œè¡¨hash</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-é›†åˆset">4.é›†åˆSet</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_5-æœ‰åºé›†åˆzset">5.æœ‰åºé›†åˆZset</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#æ‰©å±•">æ‰©å±•</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_05ã€redisæŒä¹…åŒ–">05ã€RedisæŒä¹…åŒ–</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#rdb-å¿«ç…§æ¨¡å¼">RDB-å¿«ç…§æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#aof-æ—¥å¿—æ¨¡å¼">AOF-æ—¥å¿—æ¨¡å¼</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#aofå’Œrdbå¯¹æ¯”">AOFå’ŒRDBå¯¹æ¯”</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_06ã€äº‹åŠ¡">06ã€äº‹åŠ¡</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_07ã€redisä¸»ä»å¤åˆ¶">07ã€Redisä¸»ä»å¤åˆ¶</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å¥½å¤„">å¥½å¤„</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ä¸»ä»æ¨¡å¼å®ç°">ä¸»ä»æ¨¡å¼å®ç°</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_08ã€rediså“¨å…µ">08ã€Rediså“¨å…µ</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸç†">åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å“¨å…µçš„é…ç½®å’Œä½¿ç”¨">å“¨å…µçš„é…ç½®å’Œä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#å“¨å…µæ¨¡å¼åº”ç”¨">å“¨å…µæ¨¡å¼åº”ç”¨</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_09ã€redisé›†ç¾¤">09ã€Redisé›†ç¾¤</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#åŸç†-1">åŸç†</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#ç»„æˆ">ç»„æˆ</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#éƒ¨ç½²é›†ç¾¤">éƒ¨ç½²é›†ç¾¤</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#æ€»ç»“">æ€»ç»“</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#ä¼˜åŒ–">ä¼˜åŒ–</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><h1 id="redisç†è®º" tabindex="-1"><a class="header-anchor" href="#redisç†è®º"><span>Redisç†è®º</span></a></h1><p>å®˜æ–¹ç½‘ç«™ï¼š<a href="https://redis.io/" target="_blank" rel="noopener noreferrer">https://redis.io/</a></p><p>ä¸­æ–‡ç½‘ç«™ï¼š<a href="https://www.redis.net.cn/" target="_blank" rel="noopener noreferrer">https://www.redis.net.cn/</a></p><h2 id="_01ã€redis-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#_01ã€redis-ç®€ä»‹"><span>01ã€Redis ç®€ä»‹</span></a></h2><p>Redis æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œéµå®ˆBSDåè®®ï¼Œæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„<code>key-value</code>æ•°æ®åº“ã€‚</p><p>Redis ç‰¹ç‚¹ï¼š</p><ul><li>Redisæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ã€‚</li><li>Redisä¸ä»…ä»…æ”¯æŒç®€å•çš„key-valueç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾›listï¼Œsetï¼Œzsetï¼Œhashç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚</li><li>Redisæ”¯æŒæ•°æ®çš„å¤‡ä»½ï¼Œå³master-slaveæ¨¡å¼çš„æ•°æ®å¤‡ä»½ã€‚</li></ul><h3 id="redis-ä¼˜åŠ¿" tabindex="-1"><a class="header-anchor" href="#redis-ä¼˜åŠ¿"><span>Redis ä¼˜åŠ¿</span></a></h3><ul><li>æ€§èƒ½æé«˜ â€“ Redisèƒ½è¯»çš„é€Ÿåº¦æ˜¯110000æ¬¡/s,å†™çš„é€Ÿåº¦æ˜¯81000æ¬¡/s ã€‚</li><li>ä¸°å¯Œçš„æ•°æ®ç±»å‹ â€“ Redisæ”¯æŒäºŒè¿›åˆ¶æ¡ˆä¾‹çš„ Strings, Lists, Hashes, Sets åŠ Ordered Sets æ•°æ®ç±»å‹æ“ä½œã€‚</li><li>åŸå­ â€“ Redisçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼ŒåŒæ—¶Redisè¿˜æ”¯æŒå¯¹å‡ ä¸ªæ“ä½œå…¨å¹¶åçš„åŸå­æ€§æ‰§è¡Œã€‚</li><li>ä¸°å¯Œçš„ç‰¹æ€§ â€“ Redisè¿˜æ”¯æŒ publish/subscribe, é€šçŸ¥, key è¿‡æœŸç­‰ç­‰ç‰¹æ€§ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆç”¨redis" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆç”¨redis"><span>ä¸ºä»€ä¹ˆç”¨redis</span></a></h3><h4 id="é«˜æ€§èƒ½" tabindex="-1"><a class="header-anchor" href="#é«˜æ€§èƒ½"><span>é«˜æ€§èƒ½</span></a></h4><ul><li><p><mark>å•çº¿ç¨‹ç®€å•ã€æ— çº¿ç¨‹å¼€é”€</mark> ä½¿ç”¨å•çº¿ç¨‹ç®€å•ï¼Œé¿å…äº†å¤šçº¿ç¨‹çš„ç«äº‰ï¼›åŒæ—¶è¿˜çœå»äº†å¤šçº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„æ—¶é—´å’Œæ€§èƒ½ä¸Šçš„å¼€é”€ã€‚</p></li><li><p>redisä¸»è¦åŸºäºå†…å­˜æ“ä½œå†…å­˜çš„æ‰§è¡Œæ•ˆç‡æœ¬èº«å°±å¾ˆå¿«ï¼Œå¹¶ä¸”redisè¿˜é‡‡ç”¨äº†é«˜æ•ˆçš„æ•°æ®ç»“æ„ã€‚</p></li><li><p>åœ¨è¯·æ±‚ä¸Šé‡‡ç”¨I\Oå¤šè·¯å¤ç”¨æœºåˆ¶å¤šè·¯å¤ç”¨æœºåˆ¶æ˜¯ä¸€ç§åŸºäºéé˜»å¡I/Oæ¨¡å‹ï¼Œå¯ä»¥ä½¿redisé«˜æ•ˆçš„è¿›è¡Œç½‘ç»œé€šä¿¡ï¼ŒI/Oçš„è¯»å†™ä¹Ÿä¸å†é˜»å¡ï¼Œå°±å¯ä»¥å¤„ç†å¤§é‡çš„å®¢æˆ·ç«¯socketè¯·æ±‚ã€‚</p></li></ul><h4 id="é«˜å¹¶å‘" tabindex="-1"><a class="header-anchor" href="#é«˜å¹¶å‘"><span>é«˜å¹¶å‘</span></a></h4><ul><li><p>mysqlå•æœºä¸€èˆ¬åªèƒ½æ”¯æ’‘åˆ°2000Qpsï¼Œè€Œredisç”±äºæ˜¯K/Vå¼çš„æ“ä½œï¼Œå•æœºå¯ä»¥æ”¯æ’‘å¹¶å‘é‡å‡ ä¸‡åˆ°åå‡ ä¸‡ã€‚</p></li><li><p>redisåˆ†å¸ƒå¼é›†ç¾¤åŒ–æ‰©å±•æ€§æé«˜ï¼Œè€Œä¸”ç¨³å®šï¼Œèƒ½å¤Ÿæ”¯æ’‘å¤§é‡çš„æ•°æ®ååï¼Œåªè¦ç¡¬ä»¶æ”¯æŒã€‚</p></li></ul><h4 id="ä¸ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#ä¸ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“å¯¹æ¯”"><span>ä¸ä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“å¯¹æ¯”ï¼š</span></a></h4><ul><li><p>redis çš„ä¼˜åŠ¿æ¯”è¾ƒå¤šï¼Œå¦‚é«˜æ€§èƒ½ï¼Œé«˜å¯ç”¨ï¼Œä¸°å¯Œçš„æ•°æ®ç±»å‹ã€åŸå­æ€§ã€æ‰©å±•æ€§æ¯”è¾ƒå¼ºã€å¯æŒä¹…åŒ–ã€ç”Ÿæ€å®Œå–„ç­‰ç­‰ï¼Œä½†æ˜¯æ¯”è¾ƒæœ‰å†³å®šæ€§çš„è¿˜æ˜¯é«˜æ€§èƒ½å’Œä¸°å¯Œçš„æ•°æ®ç±»å‹æ”¯æŒï¼ˆstringã€listã€setã€sortedsetï¼ˆæœ‰åºé›†åˆï¼‰ã€hashç­‰ï¼‰ï¼Œ</p></li><li><p>ä¸€èˆ¬ä¸€ä¸ªä¸œè¥¿å¥½ä¸å¥½ç”¨ï¼Œå¤šæ•°æ¯”è¾ƒå‡ºæ¥çš„ï¼Œä¸€èˆ¬æˆ‘ä»¬é¡¹ç›®ä¸­å¼•å…¥redis å¤šæ•°æ˜¯ä¸ºäº†å‡è½»å…³ç³»å‹æ•°æ®åº“å‹åŠ›çš„ï¼Œé‚£å°±è·Ÿå…³ç³»å‹æ•°æ®åº“æ¥æ¯”è¾ƒï¼Œå¸¸è§çš„å…³ç³»å‹æ•°æ®åº“æ˜¯åŸºäºç£ç›˜å­˜å‚¨çš„ï¼Œæ•°æ®å­˜å–IOè¾ƒé«˜ï¼Œ</p></li></ul><h2 id="_02ã€redisçš„ä¸‹è½½å’Œå®‰è£…" tabindex="-1"><a class="header-anchor" href="#_02ã€redisçš„ä¸‹è½½å’Œå®‰è£…"><span>02ã€Redisçš„ä¸‹è½½å’Œå®‰è£…</span></a></h2><h3 id="_1-windowä¸‹å®‰è£…redisæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_1-windowä¸‹å®‰è£…redisæœåŠ¡"><span>1.windowä¸‹å®‰è£…RedisæœåŠ¡</span></a></h3><ol><li>Githubè·å–rediså®‰è£…åŒ…ï¼Œ<a href="https://github.com/MSOpenTech/redis" target="_blank" rel="noopener noreferrer">åœ°å€ï¼šRedis</a></li><li>åŒå‡»ç‚¹å‡»å®‰è£…msiæ ¼å¼çš„å®‰è£…åŒ…ï¼Œå¼€å§‹è¿›è¡Œå®‰è£…</li><li>å®‰è£…æ³¨æ„ï¼šæ·»åŠ redisç›®å½•åˆ°ç¯å¢ƒå˜é‡æ–¹ä¾¿ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«ã€ä½¿ç”¨é»˜è®¤ç«¯å£ã€è®¾ç½®æœ€å¤§å†…å­˜å­¦ä¹ å°±100MB</li><li>å¯¹Redisè¿›è¡Œé…ç½®ï¼š <ol><li>ç¼–è¾‘å™¨ç¼–è¾‘redis.windows-service.confæ–‡ä»¶</li><li>æ‰¾åˆ°requirepassé…ç½®ï¼ˆè®¾ç½®å¯†ç ï¼‰ï¼Œå¦‚ï¼šè¾“å…¥requirepass 12345ã€‚ï¼ˆæµ‹è¯•ç¯å¢ƒå¯ä»¥ä¸ç”¨å¯†ç ï¼‰</li><li>ç¡®ä¿æœåŠ¡æ­£å¸¸å¯åŠ¨å³å¯</li></ol></li><li>å¯æ­£å¸¸åœ¨å‘½ä»¤è¡Œæ“ä½œRedisäº†</li></ol><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">è¾“å…¥å‘½ä»¤ï¼šredis-cli</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     ---ï¼ˆå®¢æˆ·ç«¯ç¨‹åºï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6379</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">è¾“å…¥å¯†ç å›è½¦ï¼šauth</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 12345</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è¿”å›æç¤ºOKè¡¨ç¤ºéªŒè¯é€šè¿‡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6379</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">auth</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 12345</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Ok</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-linuxä¸‹å®‰è£…redisæœåŠ¡" tabindex="-1"><a class="header-anchor" href="#_2-linuxä¸‹å®‰è£…redisæœåŠ¡"><span>2.Linuxä¸‹å®‰è£…RedisæœåŠ¡</span></a></h3><ol><li><p>å®‰è£…ç¼–è¯‘ç¯å¢ƒgcc ï¼ˆRedisæ˜¯Cç¼–å†™çš„ï¼Œéœ€è¦Cçš„ç¯å¢ƒï¼‰</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gcc-c++</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>ä¸‹è½½ï¼Œè§£å‹ï¼Œç¼–è¯‘ï¼ˆredisä¸‹è½½åœ°å€ä¸ºï¼š<a href="https://redis.io/download/%EF%BC%89" target="_blank" rel="noopener noreferrer">https://redis.io/download/ï¼‰</a></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/redis/redis/archive/7.0.8.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> tar</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xzf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 7.0.8.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-7.0.8</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> make</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯ç¼–è¯‘å®Œæˆååœ¨<code>src</code>ç›®å½•ä¸‹. è¿è¡Œå¦‚ä¸‹</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src/redis-server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥æœåŠ¡</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æœ¬åœ°è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> src/redis-cli</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># è¿œç¨‹è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-cli</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> host</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> password</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="_3-redisé…ç½®æ–‡ä»¶è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#_3-redisé…ç½®æ–‡ä»¶è¯¦è§£"><span>3.Redisé…ç½®æ–‡ä»¶è¯¦è§£</span></a></h3><ul><li>Redis çš„é…ç½®æ–‡ä»¶ä½äº Redis å®‰è£…ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸º redis.confã€‚</li><li>ä½ å¯ä»¥é€šè¿‡ <strong>CONFIG</strong> å‘½ä»¤æŸ¥çœ‹æˆ–è®¾ç½®é…ç½®é¡¹ã€‚</li></ul><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">å‚æ•°è¯´æ˜</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> é…ç½®é¡¹è¯´æ˜å¦‚ä¸‹ï¼š</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Redisé»˜è®¤ä¸æ˜¯ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œå¯ä»¥é€šè¿‡è¯¥é…ç½®é¡¹ä¿®æ”¹ï¼Œä½¿ç”¨yeså¯ç”¨å®ˆæŠ¤è¿›ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    daemonize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">2.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å½“Redisä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œæ—¶ï¼ŒRedisé»˜è®¤ä¼šæŠŠpidå†™å…¥/var/run/redis.pidæ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡pidfileæŒ‡å®š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    pidfile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /var/run/redis.pid</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">3.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šRedisç›‘å¬ç«¯å£ï¼Œé»˜è®¤ç«¯å£ä¸º6379ï¼Œä½œè€…åœ¨è‡ªå·±çš„ä¸€ç¯‡åšæ–‡ä¸­è§£é‡Šäº†ä¸ºä»€ä¹ˆé€‰ç”¨6379ä½œä¸ºé»˜è®¤ç«¯å£ï¼Œå› ä¸º6379åœ¨æ‰‹æœºæŒ‰é”®ä¸ŠMERZå¯¹åº”çš„å·ç ï¼Œè€ŒMERZå–è‡ªæ„å¤§åˆ©æ­Œå¥³Alessia</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Merzçš„åå­—</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">4.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç»‘å®šçš„ä¸»æœºåœ°å€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    bind</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">5.å½“</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å®¢æˆ·ç«¯é—²ç½®å¤šé•¿æ—¶é—´åå…³é—­è¿æ¥ï¼Œå¦‚æœæŒ‡å®šä¸º0ï¼Œè¡¨ç¤ºå…³é—­è¯¥åŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    timeout</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 300</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šæ—¥å¿—è®°å½•çº§åˆ«ï¼ŒRedisæ€»å…±æ”¯æŒå››ä¸ªçº§åˆ«ï¼šdebugã€verboseã€noticeã€warningï¼Œé»˜è®¤ä¸ºverbose</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    loglevel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> verbose</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">7.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æ—¥å¿—è®°å½•æ–¹å¼ï¼Œé»˜è®¤ä¸ºæ ‡å‡†è¾“å‡ºï¼Œå¦‚æœé…ç½®Redisä¸ºå®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œï¼Œè€Œè¿™é‡Œåˆé…ç½®ä¸ºæ—¥å¿—è®°å½•æ–¹å¼ä¸ºæ ‡å‡†è¾“å‡ºï¼Œåˆ™æ—¥å¿—å°†ä¼šå‘é€ç»™/dev/null</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    logfile</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> stdout</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è®¾ç½®æ•°æ®åº“çš„æ•°é‡ï¼Œé»˜è®¤æ•°æ®åº“ä¸º0ï¼Œå¯ä»¥ä½¿ç”¨SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">dbi</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">å‘½ä»¤åœ¨è¿æ¥ä¸ŠæŒ‡å®šæ•°æ®åº“id</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    databases</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 16</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">9.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šåœ¨å¤šé•¿æ—¶é—´å†…ï¼Œæœ‰å¤šå°‘æ¬¡æ›´æ–°æ“ä½œï¼Œå°±å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥å¤šä¸ªæ¡ä»¶é…åˆ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    save</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">second</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">s&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">change</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">s&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    Redisé»˜è®¤é…ç½®æ–‡ä»¶ä¸­æä¾›äº†ä¸‰ä¸ªæ¡ä»¶ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    save</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 900</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 900ç§’ï¼ˆ15åˆ†é’Ÿï¼‰å†…æœ‰1ä¸ªæ›´æ”¹ï¼Œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    save</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 300</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  300ç§’ï¼ˆ5åˆ†é’Ÿï¼‰å†…æœ‰10ä¸ªæ›´æ”¹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    save</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 60</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 60ç§’å†…æœ‰10000ä¸ªæ›´æ”¹ã€‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">10.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šå­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®ï¼Œé»˜è®¤ä¸ºyesï¼ŒRedisé‡‡ç”¨LZFå‹ç¼©ï¼Œå¦‚æœä¸ºäº†èŠ‚çœCPUæ—¶é—´ï¼Œå¯ä»¥å…³é—­è¯¥é€‰é¡¹ï¼Œä½†ä¼šå¯¼è‡´æ•°æ®åº“æ–‡ä»¶å˜çš„å·¨å¤§</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    rdbcompression</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">11.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé»˜è®¤å€¼ä¸ºdump.rdb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    dbfilename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dump.rdb</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">12.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šæœ¬åœ°æ•°æ®åº“å­˜æ”¾ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">13.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è®¾ç½®å½“æœ¬æœºä¸ºslavæœåŠ¡æ—¶ï¼Œè®¾ç½®masteræœåŠ¡çš„IPåœ°å€åŠç«¯å£ï¼Œåœ¨Rediså¯åŠ¨æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä»masterè¿›è¡Œæ•°æ®åŒæ­¥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    slaveof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">masteri</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">p&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">masterpor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">14.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å½“masteræœåŠ¡è®¾ç½®äº†å¯†ç ä¿æŠ¤æ—¶ï¼ŒslavæœåŠ¡è¿æ¥masterçš„å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    masterauth</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">master-passwor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">15.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è®¾ç½®Redisè¿æ¥å¯†ç ï¼Œå¦‚æœé…ç½®äº†è¿æ¥å¯†ç ï¼Œå®¢æˆ·ç«¯åœ¨è¿æ¥Redisæ—¶éœ€è¦é€šè¿‡AUTH</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">passwor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">d&gt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">å‘½ä»¤æä¾›å¯†ç ï¼Œé»˜è®¤å…³é—­</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    requirepass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> foobared</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">16.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è®¾ç½®åŒä¸€æ—¶é—´æœ€å¤§å®¢æˆ·ç«¯è¿æ¥æ•°ï¼Œé»˜è®¤æ— é™åˆ¶ï¼ŒRediså¯ä»¥åŒæ—¶æ‰“å¼€çš„å®¢æˆ·ç«¯è¿æ¥æ•°ä¸ºRedisè¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æè¿°ç¬¦æ•°ï¼Œå¦‚æœè®¾ç½®</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> maxclients</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0ï¼Œè¡¨ç¤ºä¸ä½œé™åˆ¶ã€‚å½“å®¢æˆ·ç«¯è¿æ¥æ•°åˆ°è¾¾é™åˆ¶æ—¶ï¼ŒRedisä¼šå…³é—­æ–°çš„è¿æ¥å¹¶å‘å®¢æˆ·ç«¯è¿”å›max</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clients</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reachedé”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    maxclients</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 128</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">17.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šRedisæœ€å¤§å†…å­˜é™åˆ¶ï¼ŒRedisåœ¨å¯åŠ¨æ—¶ä¼šæŠŠæ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¾¾åˆ°æœ€å¤§å†…å­˜åï¼ŒRedisä¼šå…ˆå°è¯•æ¸…é™¤å·²åˆ°æœŸæˆ–å³å°†åˆ°æœŸçš„Keyï¼Œå½“æ­¤æ–¹æ³•å¤„ç†</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> åï¼Œä»ç„¶åˆ°è¾¾æœ€å¤§å†…å­˜è®¾ç½®ï¼Œå°†æ— æ³•å†è¿›è¡Œå†™å…¥æ“ä½œï¼Œä½†ä»ç„¶å¯ä»¥è¿›è¡Œè¯»å–æ“ä½œã€‚Redisæ–°çš„vmæœºåˆ¶ï¼Œä¼šæŠŠKeyå­˜æ”¾å†…å­˜ï¼ŒValueä¼šå­˜æ”¾åœ¨swapåŒº</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    maxmemory</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">byte</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">s&gt;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">18.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šæ˜¯å¦åœ¨æ¯æ¬¡æ›´æ–°æ“ä½œåè¿›è¡Œæ—¥å¿—è®°å½•ï¼ŒRedisåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯å¼‚æ­¥çš„æŠŠæ•°æ®å†™å…¥ç£ç›˜ï¼Œå¦‚æœä¸å¼€å¯ï¼Œå¯èƒ½ä¼šåœ¨æ–­ç”µæ—¶å¯¼è‡´ä¸€æ®µæ—¶é—´å†…çš„æ•°æ®ä¸¢å¤±ã€‚å› ä¸º</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redisæœ¬èº«åŒæ­¥æ•°æ®æ–‡ä»¶æ˜¯æŒ‰ä¸Šé¢saveæ¡ä»¶æ¥åŒæ­¥çš„ï¼Œæ‰€ä»¥æœ‰çš„æ•°æ®ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…åªå­˜åœ¨äºå†…å­˜ä¸­ã€‚é»˜è®¤ä¸ºno</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    appendonly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">19.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šæ›´æ–°æ—¥å¿—æ–‡ä»¶åï¼Œé»˜è®¤ä¸ºappendonly.aof</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     appendfilename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> appendonly.aof</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">20.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šæ›´æ–°æ—¥å¿—æ¡ä»¶ï¼Œå…±æœ‰3ä¸ªå¯é€‰å€¼ï¼š</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     noï¼šè¡¨ç¤ºç­‰æ“ä½œç³»ç»Ÿè¿›è¡Œæ•°æ®ç¼“å­˜åŒæ­¥åˆ°ç£ç›˜ï¼ˆå¿«ï¼‰</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     alwaysï¼šè¡¨ç¤ºæ¯æ¬¡æ›´æ–°æ“ä½œåæ‰‹åŠ¨è°ƒç”¨fsync</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">å°†æ•°æ®å†™åˆ°ç£ç›˜ï¼ˆæ…¢ï¼Œå®‰å…¨ï¼‰</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     everysecï¼šè¡¨ç¤ºæ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼ˆæŠ˜è¡·ï¼Œé»˜è®¤å€¼ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    appendfsync</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> everysec</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">21.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šæ˜¯å¦å¯ç”¨è™šæ‹Ÿå†…å­˜æœºåˆ¶ï¼Œé»˜è®¤å€¼ä¸ºnoï¼Œç®€å•çš„ä»‹ç»ä¸€ä¸‹ï¼ŒVMæœºåˆ¶å°†æ•°æ®åˆ†é¡µå­˜æ”¾ï¼Œç”±Rediså°†è®¿é—®é‡è¾ƒå°‘çš„é¡µå³å†·æ•°æ®swapåˆ°ç£ç›˜ä¸Šï¼Œè®¿é—®å¤šçš„é¡µé¢ç”±ç£ç›˜è‡ªåŠ¨æ¢å‡ºåˆ°å†…å­˜ä¸­ï¼ˆåœ¨åé¢çš„æ–‡ç« æˆ‘ä¼šä»”ç»†åˆ†æRedisçš„VMæœºåˆ¶ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     vm-enabled</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">22.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è™šæ‹Ÿå†…å­˜æ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤å€¼ä¸º/tmp/redis.swapï¼Œä¸å¯å¤šä¸ªRediså®ä¾‹å…±äº«</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     vm-swap-file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /tmp/redis.swap</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">23.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å°†æ‰€æœ‰å¤§äºvm-max-memoryçš„æ•°æ®å­˜å…¥è™šæ‹Ÿå†…å­˜,æ— è®ºvm-max-memoryè®¾ç½®å¤šå°,æ‰€æœ‰ç´¢å¼•æ•°æ®éƒ½æ˜¯å†…å­˜å­˜å‚¨çš„</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Redisçš„ç´¢å¼•æ•°æ®</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> å°±æ˜¯keys</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">,ä¹Ÿå°±æ˜¯è¯´,å½“vm-max-memoryè®¾ç½®ä¸º0çš„æ—¶å€™,å…¶å®æ˜¯æ‰€æœ‰valueéƒ½å­˜åœ¨äºç£ç›˜ã€‚é»˜è®¤å€¼ä¸º0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     vm-max-memory</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">24.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Redis</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> swapæ–‡ä»¶åˆ†æˆäº†å¾ˆå¤šçš„pageï¼Œä¸€ä¸ªå¯¹è±¡å¯ä»¥ä¿å­˜åœ¨å¤šä¸ªpageä¸Šé¢ï¼Œä½†ä¸€ä¸ªpageä¸Šä¸èƒ½è¢«å¤šä¸ªå¯¹è±¡å…±äº«ï¼Œvm-page-sizeæ˜¯è¦æ ¹æ®å­˜å‚¨çš„</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æ•°æ®å¤§å°æ¥è®¾å®šçš„ï¼Œä½œè€…å»ºè®®å¦‚æœå­˜å‚¨å¾ˆå¤šå°å¯¹è±¡ï¼Œpageå¤§å°æœ€å¥½è®¾ç½®ä¸º32æˆ–è€…64bytesï¼›å¦‚æœå­˜å‚¨å¾ˆå¤§å¤§å¯¹è±¡ï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ›´å¤§çš„pageï¼Œå¦‚æœä¸</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ç¡®å®šï¼Œå°±ä½¿ç”¨é»˜è®¤å€¼</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     vm-page-size</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 32</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">25.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è®¾ç½®swapæ–‡ä»¶ä¸­çš„pageæ•°é‡ï¼Œç”±äºé¡µè¡¨ï¼ˆä¸€ç§è¡¨ç¤ºé¡µé¢ç©ºé—²æˆ–ä½¿ç”¨çš„bitmapï¼‰æ˜¯åœ¨æ”¾åœ¨å†…å­˜ä¸­çš„ï¼Œï¼Œåœ¨ç£ç›˜ä¸Šæ¯8ä¸ªpageså°†æ¶ˆè€—1byteçš„å†…å­˜ã€‚</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     vm-pages</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 134217728</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">26.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è®¾ç½®è®¿é—®swapæ–‡ä»¶çš„çº¿ç¨‹æ•°,æœ€å¥½ä¸è¦è¶…è¿‡æœºå™¨çš„æ ¸æ•°,å¦‚æœè®¾ç½®ä¸º0,é‚£ä¹ˆæ‰€æœ‰å¯¹swapæ–‡ä»¶çš„æ“ä½œéƒ½æ˜¯ä¸²è¡Œçš„ï¼Œå¯èƒ½ä¼šé€ æˆæ¯”è¾ƒé•¿æ—¶é—´çš„å»¶è¿Ÿã€‚é»˜è®¤å€¼ä¸º4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">     vm-max-threads</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 4</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">27.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> è®¾ç½®åœ¨å‘å®¢æˆ·ç«¯åº”ç­”æ—¶ï¼Œæ˜¯å¦æŠŠè¾ƒå°çš„åŒ…åˆå¹¶ä¸ºä¸€ä¸ªåŒ…å‘é€ï¼Œé»˜è®¤ä¸ºå¼€å¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    glueoutputbuf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">28.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šåœ¨è¶…è¿‡ä¸€å®šçš„æ•°é‡æˆ–è€…æœ€å¤§çš„å…ƒç´ è¶…è¿‡æŸä¸€ä¸´ç•Œå€¼æ—¶ï¼Œé‡‡ç”¨ä¸€ç§ç‰¹æ®Šçš„å“ˆå¸Œç®—æ³•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    hash-max-zipmap-entries</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 64</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    hash-max-zipmap-value</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">29.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šæ˜¯å¦æ¿€æ´»é‡ç½®å“ˆå¸Œï¼Œé»˜è®¤ä¸ºå¼€å¯ï¼ˆåé¢åœ¨ä»‹ç»Redisçš„å“ˆå¸Œç®—æ³•æ—¶å…·ä½“ä»‹ç»ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    activerehashing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">30.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> æŒ‡å®šåŒ…å«å…¶å®ƒçš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨åŒä¸€ä¸»æœºä¸Šå¤šä¸ªRediså®ä¾‹ä¹‹é—´ä½¿ç”¨åŒä¸€ä»½é…ç½®æ–‡ä»¶ï¼Œè€ŒåŒæ—¶å„ä¸ªå®ä¾‹åˆæ‹¥æœ‰è‡ªå·±çš„ç‰¹å®šé…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">    include</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /path/to/local.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_03ã€å…³äºredis-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_03ã€å…³äºredis-å‘½ä»¤"><span>03ã€å…³äºRedis å‘½ä»¤</span></a></h2><h3 id="a-keyå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#a-keyå‘½ä»¤"><span>a.Keyå‘½ä»¤</span></a></h3><p>å‘½ä»¤æ–‡æ¡£ï¼š<a href="https://redis.io/commands/" target="_blank" rel="noopener noreferrer">https://redis.io/commands/</a></p><p>ä¸‹è¡¨ç»™å‡ºäº†ä¸ Redis é”®ç›¸å…³çš„åŸºæœ¬å‘½ä»¤ï¼š</p><table><thead><tr><th style="text-align:left;">åºå·</th><th style="text-align:left;">å‘½ä»¤åŠæè¿°</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3528.html" target="_blank" rel="noopener noreferrer">DEL key</a> è¯¥å‘½ä»¤ç”¨äºåœ¨ key å­˜åœ¨æ˜¯åˆ é™¤ keyã€‚</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3529.html" target="_blank" rel="noopener noreferrer">DUMP key</a> åºåˆ—åŒ–ç»™å®š key ï¼Œå¹¶è¿”å›è¢«åºåˆ—åŒ–çš„å€¼ã€‚</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3530.html" target="_blank" rel="noopener noreferrer">EXISTS key</a> æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨ã€‚</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3531.html" target="_blank" rel="noopener noreferrer">EXPIRE key</a> seconds ä¸ºç»™å®š key è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚</td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3532.html" target="_blank" rel="noopener noreferrer">EXPIREAT key timestamp</a> EXPIREAT çš„ä½œç”¨å’Œ EXPIRE ç±»ä¼¼ï¼Œéƒ½ç”¨äºä¸º key è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ ä¸åŒåœ¨äº EXPIREAT å‘½ä»¤æ¥å—çš„æ—¶é—´å‚æ•°æ˜¯ UNIX æ—¶é—´æˆ³(unix timestamp)ã€‚</td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3533.html" target="_blank" rel="noopener noreferrer">PEXPIRE key milliseconds</a> è®¾ç½® key çš„è¿‡æœŸæ—¶é—´äº¿ä»¥æ¯«ç§’è®¡ã€‚</td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3534.html" target="_blank" rel="noopener noreferrer">PEXPIREAT key milliseconds-timestamp</a> è®¾ç½® key è¿‡æœŸæ—¶é—´çš„æ—¶é—´æˆ³(unix timestamp) ä»¥æ¯«ç§’è®¡</td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3535.html" target="_blank" rel="noopener noreferrer">KEYS pattern</a> æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆç»™å®šæ¨¡å¼( pattern)çš„ key ã€‚</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3536.html" target="_blank" rel="noopener noreferrer">MOVE key db</a> å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“ db å½“ä¸­ã€‚</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3537.html" target="_blank" rel="noopener noreferrer">PERSIST key</a> ç§»é™¤ key çš„è¿‡æœŸæ—¶é—´ï¼Œkey å°†æŒä¹…ä¿æŒã€‚</td></tr><tr><td style="text-align:left;">11</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3538.html" target="_blank" rel="noopener noreferrer">PTTL key</a> ä»¥æ¯«ç§’ä¸ºå•ä½è¿”å› key çš„å‰©ä½™çš„è¿‡æœŸæ—¶é—´ã€‚</td></tr><tr><td style="text-align:left;">12</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3539.html" target="_blank" rel="noopener noreferrer">TTL key</a> ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›ç»™å®š key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(TTL, time to live)ã€‚</td></tr><tr><td style="text-align:left;">13</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3540.html" target="_blank" rel="noopener noreferrer">RANDOMKEY</a> ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›ä¸€ä¸ª key ã€‚</td></tr><tr><td style="text-align:left;">14</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3541.html" target="_blank" rel="noopener noreferrer">RENAME key newkey</a> ä¿®æ”¹ key çš„åç§°</td></tr><tr><td style="text-align:left;">15</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3542.html" target="_blank" rel="noopener noreferrer">RENAMENX key newkey</a> ä»…å½“ newkey ä¸å­˜åœ¨æ—¶ï¼Œå°† key æ”¹åä¸º newkey ã€‚</td></tr><tr><td style="text-align:left;">16</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3543.html" target="_blank" rel="noopener noreferrer">TYPE key</a> è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹ã€‚</td></tr></tbody></table><p><strong>1ã€æŸ¥çœ‹æ‰€æœ‰çš„key</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">keys</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>2ã€åˆ é™¤çš„key</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">del</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> key</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>3ã€æ£€æŸ¥ç»™å®š key æ˜¯å¦å­˜åœ¨</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EXISTS</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> key</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>4ã€ ä¸ºç»™å®š key è®¾ç½®è¿‡æœŸæ—¶é—´</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">EXPIRE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> seconds</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>5ã€PERSIST ç”¨æˆ·åˆ é™¤keyçš„è¿‡æœŸæ—¶é—´</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PERSIST</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> age</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>6ã€å°†å½“å‰æ•°æ®åº“çš„ key ç§»åŠ¨åˆ°ç»™å®šçš„æ•°æ®åº“ db å½“ä¸­ã€‚</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">move</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> db</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>7ã€ä»¥ç§’ä¸ºå•ä½ï¼Œè¿”å›ç»™å®š key çš„å‰©ä½™ç”Ÿå­˜æ—¶é—´(TTL, time to live)ã€‚</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ttl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> key</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>8ã€ä»¥æ¯«ç§’ä¸ºå•ä½è¿”å› key çš„å‰©ä½™çš„è¿‡æœŸæ—¶é—´</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">PTTL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> key</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>9ã€ä»å½“å‰æ•°æ®åº“ä¸­éšæœºè¿”å›ä¸€ä¸ª key</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RANDOMKEY</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>10ã€ä¿®æ”¹ key çš„åç§°</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">RENAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> newkey</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>11ã€è¿”å› key æ‰€å‚¨å­˜çš„å€¼çš„ç±»å‹</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">TYPE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> key</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>12ã€ç”¨äºé€‰æ‹©æ•°æ®åº“ï¼Œæ•°æ®åº“ä¸€å…±0~15</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">select</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> 1</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="b-æœåŠ¡ç«¯å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#b-æœåŠ¡ç«¯å‘½ä»¤"><span>b.æœåŠ¡ç«¯å‘½ä»¤</span></a></h3><p><strong>1ã€pingï¼Œå¦‚æœæœåŠ¡å™¨è¿è¡Œæ­£å¸¸çš„è¯ï¼Œä½¿ç”¨ping è¿”å›ä¸€ä¸ªpong</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ping</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>2ã€QUIT å¯ä»¥é€šè¿‡å‘½ä»¤é€€å‡ºå½“å‰Redisçš„å®¢æˆ·ç«¯é“¾æ¥</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">QUIT</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>3ã€DBSIZE æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­keyçš„æ¡ç›®ï¼Œç±»ä¼¼äºkeys</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dbsize</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>4ã€INFO ç”¨äºæŸ¥çœ‹RedisæœåŠ¡å™¨å„ç§ä¿¡æ¯å’Œç»Ÿè®¡æ•°å€¼</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>5ã€CONFIG GET æŸ¥çœ‹redisæœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹rediså®‰è£…çš„ä½ç½®ï¼Œå¦‚æœä½ æƒ³è·å–æ‰€æœ‰çš„redisæœåŠ¡é…ç½®çš„ä¿¡æ¯ä½¿ç”¨:config get *</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">config</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dir</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>6ã€FLUSHDB ç”¨äºåˆ é™¤å½“å‰é€‰æ‹©çš„æ•°æ®åº“æ‰€æœ‰çš„key</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">flush</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> db</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>7ã€FLUSHALL ç”¨äºåˆ é™¤æ‰€æœ‰æ•°æ®åº“ä¸­çš„key</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">flushall</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="_04ã€æ•°æ®ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_04ã€æ•°æ®ç»“æ„"><span>04ã€æ•°æ®ç»“æ„</span></a></h2><p>ä¸Šé¢æˆ‘ä»¬è¯´è¿‡redisé‡‡ç”¨äº†é«˜æ•ˆçš„æ•°æ®ç»“æ„ï¼ŒRedisæ”¯æŒ5ç§æ•°æ®ç±»å‹ï¼šstringï¼Œhashï¼Œlistï¼Œsetï¼Œzsetã€‚</p><figure><img src="https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_struct.png" alt="æ•°æ®ç±»å‹" tabindex="0" loading="lazy"><figcaption>æ•°æ®ç±»å‹</figcaption></figure><h3 id="_1-å­—ç¬¦ä¸²string" tabindex="-1"><a class="header-anchor" href="#_1-å­—ç¬¦ä¸²string"><span>1. å­—ç¬¦ä¸²String</span></a></h3><p>è¡¨åˆ—å‡ºäº†å¸¸ç”¨çš„ redis å­—ç¬¦ä¸²å‘½ä»¤ï¼š</p><table><thead><tr><th style="text-align:left;"><strong>åºå·</strong></th><th style="text-align:left;"><strong>å‘½ä»¤åŠæè¿°</strong></th></tr></thead><tbody><tr><td style="text-align:left;"><strong>--1--</strong></td><td style="text-align:left;"><strong><code>set key value </code>è®¾ç½®æŒ‡å®š key çš„å€¼</strong></td></tr><tr><td style="text-align:left;"><strong>--2--</strong></td><td style="text-align:left;"><strong><code>get key</code> è·å–æŒ‡å®š key çš„å€¼ã€‚</strong></td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;"><code>getrange key start end</code>è¿”å› key ä¸­å­—ç¬¦ä¸²å€¼çš„å­å­—ç¬¦</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;"><code>getset key value</code> å°†ç»™å®š key çš„å€¼è®¾ä¸º value ï¼Œå¹¶è¿”å› key çš„æ—§å€¼(old value)ã€‚</td></tr><tr><td style="text-align:left;"><strong>--5--</strong></td><td style="text-align:left;"><strong><code>getbit key offset</code> å¯¹ key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè·å–æŒ‡å®šåç§»é‡ä¸Šçš„ä½(bit)ã€‚</strong></td></tr><tr><td style="text-align:left;"><strong>--6--</strong></td><td style="text-align:left;"><strong><code>mget key1 [key2..]</code> è·å–æ‰€æœ‰(ä¸€ä¸ªæˆ–å¤šä¸ª)ç»™å®š key çš„å€¼ã€‚</strong></td></tr><tr><td style="text-align:left;"><strong>--7--</strong></td><td style="text-align:left;"><strong><code>setbit key offset value</code>å¯¹ key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œè®¾ç½®æˆ–æ¸…é™¤æŒ‡å®šåç§»é‡ä¸Šçš„ä½(bit)ã€‚</strong></td></tr><tr><td style="text-align:left;"><strong>--8--</strong></td><td style="text-align:left;"><strong><code>setex key seconds value</code>å°†å€¼ value å…³è”åˆ° key ï¼Œå¹¶å°† key çš„è¿‡æœŸæ—¶é—´è®¾ä¸º seconds (ä»¥ç§’ä¸ºå•ä½)ã€‚</strong></td></tr><tr><td style="text-align:left;"><strong>--9--</strong>!</td><td style="text-align:left;"><strong><code>setnx key value</code> åªæœ‰åœ¨ key ä¸å­˜åœ¨æ—¶è®¾ç½® key çš„å€¼ã€‚</strong></td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;"><code>setrange key offset value</code>ç”¨ value å‚æ•°è¦†å†™ç»™å®š key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼ï¼Œä»åç§»é‡ offset å¼€å§‹ã€‚</td></tr><tr><td style="text-align:left;">11</td><td style="text-align:left;"><code>strlen key</code> è¿”å› key æ‰€å‚¨å­˜çš„å­—ç¬¦ä¸²å€¼çš„é•¿åº¦ã€‚</td></tr><tr><td style="text-align:left;">12</td><td style="text-align:left;"><code>mset key value key value ...</code> åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ã€‚</td></tr><tr><td style="text-align:left;">13</td><td style="text-align:left;"><code>msetnx key value [key value ...]</code>åŒæ—¶è®¾ç½®ä¸€ä¸ªæˆ–å¤šä¸ª key-value å¯¹ï¼Œå½“ä¸”ä»…å½“æ‰€æœ‰ç»™å®š key éƒ½ä¸å­˜åœ¨ã€‚</td></tr><tr><td style="text-align:left;">14</td><td style="text-align:left;"><code>psetex key milliseconds value</code> è¿™ä¸ªå‘½ä»¤å’Œ SETEX å‘½ä»¤ç›¸ä¼¼ï¼Œä½†å®ƒä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½® key çš„ç”Ÿå­˜æ—¶é—´ï¼Œè€Œä¸æ˜¯åƒ SETEX å‘½ä»¤é‚£æ ·ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚</td></tr><tr><td style="text-align:left;"><strong>--15--</strong></td><td style="text-align:left;"><strong><code>incr key</code> å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å¢ä¸€ã€‚</strong></td></tr><tr><td style="text-align:left;"><strong>--16--</strong></td><td style="text-align:left;"><strong><code>incrby key increment </code>å°† key æ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šç»™å®šçš„å¢é‡å€¼ï¼ˆincrementï¼‰</strong> ã€‚==</td></tr><tr><td style="text-align:left;"><strong>--17--</strong></td><td style="text-align:left;"><strong><code>incrbyfloat key increment </code>å°† key æ‰€å‚¨å­˜çš„å€¼åŠ ä¸Šç»™å®šçš„æµ®ç‚¹å¢é‡å€¼ï¼ˆincrementï¼‰</strong> ã€‚</td></tr><tr><td style="text-align:left;"><strong>--18--</strong></td><td style="text-align:left;"><strong><code>decr key </code>å°† key ä¸­å‚¨å­˜çš„æ•°å­—å€¼å‡ä¸€ã€‚</strong></td></tr><tr><td style="text-align:left;"><strong>--19--</strong></td><td style="text-align:left;"><strong><code>decrby key decrement key</code> æ‰€å‚¨å­˜çš„å€¼å‡å»ç»™å®šçš„å‡é‡å€¼ï¼ˆdecrementï¼‰ ã€‚</strong></td></tr><tr><td style="text-align:left;">20</td><td style="text-align:left;"><code>append key value </code>å¦‚æœ key å·²ç»å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ APPEND å‘½ä»¤å°† value è¿½åŠ åˆ° key åŸæ¥çš„å€¼çš„æœ«å°¾ã€‚</td></tr></tbody></table><h3 id="_2-åˆ—è¡¨list" tabindex="-1"><a class="header-anchor" href="#_2-åˆ—è¡¨list"><span>2.åˆ—è¡¨List</span></a></h3><table><thead><tr><th style="text-align:left;">åºå·</th><th style="text-align:left;">å‘½ä»¤åŠæè¿°</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;"><code>blpop key1 [key2 ] timeout</code> ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;"><code>brpop key1 key2 timeout</code> ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œ å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;"><code>brpoplpush source destination timeout </code>ä»åˆ—è¡¨ä¸­å¼¹å‡ºä¸€ä¸ªå€¼ï¼Œå°†å¼¹å‡ºçš„å…ƒç´ æ’å…¥åˆ°å¦å¤–ä¸€ä¸ªåˆ—è¡¨ä¸­å¹¶è¿”å›å®ƒï¼› å¦‚æœåˆ—è¡¨æ²¡æœ‰å…ƒç´ ä¼šé˜»å¡åˆ—è¡¨ç›´åˆ°ç­‰å¾…è¶…æ—¶æˆ–å‘ç°å¯å¼¹å‡ºå…ƒç´ ä¸ºæ­¢ã€‚</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;"><code>lindex key index</code>é€šè¿‡ç´¢å¼•è·å–åˆ—è¡¨ä¸­çš„å…ƒç´ </td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;">`linsert key before</td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;"><code>llen key</code>è·å–åˆ—è¡¨é•¿åº¦</td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;"><code>lpop key</code>ç§»å‡ºå¹¶è·å–åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;"><code>lpush key value1 value2</code>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;"><code>lpushx key value</code>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå€¼æ’å…¥åˆ°å·²å­˜åœ¨çš„åˆ—è¡¨å¤´éƒ¨</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;"><code>lrange key start stop</code>è·å–åˆ—è¡¨æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ </td></tr><tr><td style="text-align:left;">11</td><td style="text-align:left;"><code>lrem key count value</code> ç§»é™¤åˆ—è¡¨å…ƒç´ </td></tr><tr><td style="text-align:left;"><strong>--12--</strong></td><td style="text-align:left;"><strong><code>lset key index value</code> é€šè¿‡ç´¢å¼•è®¾ç½®åˆ—è¡¨å…ƒç´ çš„å€¼</strong></td></tr><tr><td style="text-align:left;">13</td><td style="text-align:left;"><code>ltrim key start stop</code>å¯¹ä¸€ä¸ªåˆ—è¡¨è¿›è¡Œä¿®å‰ª(trim)ï¼Œå°±æ˜¯è¯´ï¼Œè®©åˆ—è¡¨åªä¿ç•™æŒ‡å®šåŒºé—´å†…çš„å…ƒç´ ï¼Œä¸åœ¨æŒ‡å®šåŒºé—´ä¹‹å†…çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ã€‚</td></tr><tr><td style="text-align:left;">14</td><td style="text-align:left;"><code>rpop key</code>ç§»é™¤å¹¶è·å–åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ </td></tr><tr><td style="text-align:left;">15</td><td style="text-align:left;"><code>rpoplpush source destination</code>ç§»é™¤åˆ—è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶å°†è¯¥å…ƒç´ æ·»åŠ åˆ°å¦ä¸€ä¸ªåˆ—è¡¨å¹¶è¿”å›</td></tr><tr><td style="text-align:left;">16</td><td style="text-align:left;"><code>rpush key value1 value2</code>åœ¨åˆ—è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå€¼</td></tr><tr><td style="text-align:left;">17</td><td style="text-align:left;"><code>rpushx key value</code> ä¸ºå·²å­˜åœ¨çš„åˆ—è¡¨æ·»åŠ å€¼</td></tr></tbody></table><h3 id="_3-å“ˆå¸Œè¡¨hash" tabindex="-1"><a class="header-anchor" href="#_3-å“ˆå¸Œè¡¨hash"><span>3.å“ˆå¸Œè¡¨hash</span></a></h3><table><thead><tr><th style="text-align:left;">åºå·</th><th style="text-align:left;">å‘½ä»¤åŠæè¿°</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>1</strong></td><td style="text-align:left;"><strong><code>hdel key field2 field2</code>åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå“ˆå¸Œè¡¨å­—æ®µ</strong></td></tr><tr><td style="text-align:left;"><strong>2</strong></td><td style="text-align:left;"><strong><code>hexists key field</code> æŸ¥çœ‹å“ˆå¸Œè¡¨ key ä¸­ï¼ŒæŒ‡å®šçš„å­—æ®µæ˜¯å¦å­˜åœ¨ã€‚</strong></td></tr><tr><td style="text-align:left;"><strong>3</strong></td><td style="text-align:left;"><strong><code>hget key field</code>è·å–å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®šå­—æ®µçš„å€¼</strong></td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;"><strong><code>hgetall key</code> è·å–åœ¨å“ˆå¸Œè¡¨ä¸­æŒ‡å®š key çš„æ‰€æœ‰å­—æ®µå’Œå€¼</strong></td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;"><code>hincrby key field increment </code>ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æ•´æ•°å€¼åŠ ä¸Šå¢é‡ increment ã€‚</td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;"><code>hincrbyfloat key field increment</code> ä¸ºå“ˆå¸Œè¡¨ key ä¸­çš„æŒ‡å®šå­—æ®µçš„æµ®ç‚¹æ•°å€¼åŠ ä¸Šå¢é‡ increment ã€‚</td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;"><code>hkeys key</code>è·å–æ‰€æœ‰å“ˆå¸Œè¡¨ä¸­çš„å­—æ®µ</td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;"><code>hlen key</code> è·å–å“ˆå¸Œè¡¨ä¸­å­—æ®µçš„æ•°é‡</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;"><code>hmget key field1 field2 </code>è·å–æ‰€æœ‰ç»™å®šå­—æ®µçš„å€¼</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;"><code>hmset key field1 value1 field2 value2</code>åŒæ—¶å°†å¤šä¸ª field-value (åŸŸ-å€¼)å¯¹è®¾ç½®åˆ°å“ˆå¸Œè¡¨ key ä¸­ã€‚</td></tr><tr><td style="text-align:left;">11</td><td style="text-align:left;"><strong><code>hset key field value </code>å°†å“ˆå¸Œè¡¨ key ä¸­çš„å­—æ®µ field çš„å€¼è®¾ä¸º value ã€‚</strong></td></tr><tr><td style="text-align:left;">12</td><td style="text-align:left;"><strong><code>hsetnx key field value</code> åªæœ‰åœ¨å­—æ®µ field ä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½®å“ˆå¸Œè¡¨å­—æ®µçš„å€¼ã€‚</strong></td></tr><tr><td style="text-align:left;">13</td><td style="text-align:left;"><strong><code>hvals key</code>è·å–å“ˆå¸Œè¡¨ä¸­æ‰€æœ‰å€¼</strong></td></tr><tr><td style="text-align:left;"><strong>--14--</strong></td><td style="text-align:left;"><strong><code>hscan key cursor [MATCH pattern] [COUNT count]</code> è¿­ä»£å“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹ã€‚</strong></td></tr></tbody></table><h3 id="_4-é›†åˆset" tabindex="-1"><a class="header-anchor" href="#_4-é›†åˆset"><span>4.é›†åˆSet</span></a></h3><table><thead><tr><th style="text-align:left;">åºå·</th><th style="text-align:left;">å‘½ä»¤åŠæè¿°</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">SADD key member1 member2å‘é›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;">SCARD key è·å–é›†åˆçš„æˆå‘˜æ•°</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;">SDIFF key1 key2 è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„å·®é›†</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;">SDIFFSTORE destination key1 key2è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„å·®é›†å¹¶å­˜å‚¨åœ¨ destination ä¸­</td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;">SINTER key1 key2è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†</td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;">SINTERSTORE destination key1 key2 è¿”å›ç»™å®šæ‰€æœ‰é›†åˆçš„äº¤é›†å¹¶å­˜å‚¨åœ¨ destination ä¸­</td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;">SISMEMBER key memberåˆ¤æ–­ member å…ƒç´ æ˜¯å¦æ˜¯é›†åˆ key çš„æˆå‘˜</td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;">SMEMBERS keyè¿”å›é›†åˆä¸­çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;">SMOVE source destination memberå°† member å…ƒç´ ä» source é›†åˆç§»åŠ¨åˆ° destination é›†åˆ</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;">SPOP keyç§»é™¤å¹¶è¿”å›é›†åˆä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ </td></tr><tr><td style="text-align:left;">11</td><td style="text-align:left;">SRANDMEMBER key count è¿”å›é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªéšæœºæ•°</td></tr><tr><td style="text-align:left;">12</td><td style="text-align:left;">SREM key member1 member2ç§»é™¤é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr><tr><td style="text-align:left;">13</td><td style="text-align:left;">SUNION key1 key2è¿”å›æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†</td></tr><tr><td style="text-align:left;">14</td><td style="text-align:left;">SUNIONSTORE destination key1 key2æ‰€æœ‰ç»™å®šé›†åˆçš„å¹¶é›†å­˜å‚¨åœ¨ destination é›†åˆä¸­</td></tr><tr><td style="text-align:left;">15</td><td style="text-align:left;">SSCAN key cursor [MATCH pattern] [COUNT count] è¿­ä»£é›†åˆä¸­çš„å…ƒç´ </td></tr></tbody></table><h3 id="_5-æœ‰åºé›†åˆzset" tabindex="-1"><a class="header-anchor" href="#_5-æœ‰åºé›†åˆzset"><span>5.æœ‰åºé›†åˆZset</span></a></h3><table><thead><tr><th style="text-align:left;">åºå·</th><th style="text-align:left;">å‘½ä»¤åŠæè¿°</th></tr></thead><tbody><tr><td style="text-align:left;">1</td><td style="text-align:left;">[ZADD key score1 member1 <a href="https://www.redis.net.cn/order/3609.html" target="_blank" rel="noopener noreferrer">score2 member2]</a> å‘æœ‰åºé›†åˆæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ï¼Œæˆ–è€…æ›´æ–°å·²å­˜åœ¨æˆå‘˜çš„åˆ†æ•°</td></tr><tr><td style="text-align:left;">2</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3610.html" target="_blank" rel="noopener noreferrer">ZCARD key</a> è·å–æœ‰åºé›†åˆçš„æˆå‘˜æ•°</td></tr><tr><td style="text-align:left;">3</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3611.html" target="_blank" rel="noopener noreferrer">ZCOUNT key min max</a> è®¡ç®—åœ¨æœ‰åºé›†åˆä¸­æŒ‡å®šåŒºé—´åˆ†æ•°çš„æˆå‘˜æ•°</td></tr><tr><td style="text-align:left;">4</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3612.html" target="_blank" rel="noopener noreferrer">ZINCRBY key increment member</a> æœ‰åºé›†åˆä¸­å¯¹æŒ‡å®šæˆå‘˜çš„åˆ†æ•°åŠ ä¸Šå¢é‡ increment</td></tr><tr><td style="text-align:left;">5</td><td style="text-align:left;">[ZINTERSTORE destination numkeys key <a href="https://www.redis.net.cn/order/3613.html" target="_blank" rel="noopener noreferrer">key ...]</a> è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„äº¤é›†å¹¶å°†ç»“æœé›†å­˜å‚¨åœ¨æ–°çš„æœ‰åºé›†åˆ key ä¸­</td></tr><tr><td style="text-align:left;">6</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3614.html" target="_blank" rel="noopener noreferrer">ZLEXCOUNT key min max</a> åœ¨æœ‰åºé›†åˆä¸­è®¡ç®—æŒ‡å®šå­—å…¸åŒºé—´å†…æˆå‘˜æ•°é‡</td></tr><tr><td style="text-align:left;">7</td><td style="text-align:left;">[ZRANGE key start stop <a href="https://www.redis.net.cn/order/3615.html" target="_blank" rel="noopener noreferrer">WITHSCORES]</a> é€šè¿‡ç´¢å¼•åŒºé—´è¿”å›æœ‰åºé›†åˆæˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</td></tr><tr><td style="text-align:left;">8</td><td style="text-align:left;">[ZRANGEBYLEX key min max <a href="https://www.redis.net.cn/order/3616.html" target="_blank" rel="noopener noreferrer">LIMIT offset count]</a> é€šè¿‡å­—å…¸åŒºé—´è¿”å›æœ‰åºé›†åˆçš„æˆå‘˜</td></tr><tr><td style="text-align:left;">9</td><td style="text-align:left;">[ZRANGEBYSCORE key min max <a href="https://www.redis.net.cn/order/3617.html" target="_blank" rel="noopener noreferrer">WITHSCORES] [LIMIT]</a> é€šè¿‡åˆ†æ•°è¿”å›æœ‰åºé›†åˆæŒ‡å®šåŒºé—´å†…çš„æˆå‘˜</td></tr><tr><td style="text-align:left;">10</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3618.html" target="_blank" rel="noopener noreferrer">ZRANK key member</a> è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„ç´¢å¼•</td></tr><tr><td style="text-align:left;">11</td><td style="text-align:left;">[ZREM key member <a href="https://www.redis.net.cn/order/3619.html" target="_blank" rel="noopener noreferrer">member ...]</a> ç§»é™¤æœ‰åºé›†åˆä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜</td></tr><tr><td style="text-align:left;">12</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3620.html" target="_blank" rel="noopener noreferrer">ZREMRANGEBYLEX key min max</a> ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„å­—å…¸åŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td style="text-align:left;">13</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3621.html" target="_blank" rel="noopener noreferrer">ZREMRANGEBYRANK key start stop</a> ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„æ’ååŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td style="text-align:left;">14</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3622.html" target="_blank" rel="noopener noreferrer">ZREMRANGEBYSCORE key min max</a> ç§»é™¤æœ‰åºé›†åˆä¸­ç»™å®šçš„åˆ†æ•°åŒºé—´çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td style="text-align:left;">15</td><td style="text-align:left;">[ZREVRANGE key start stop <a href="https://www.redis.net.cn/order/3623.html" target="_blank" rel="noopener noreferrer">WITHSCORES]</a> è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåŒºé—´å†…çš„æˆå‘˜ï¼Œé€šè¿‡ç´¢å¼•ï¼Œåˆ†æ•°ä»é«˜åˆ°åº•</td></tr><tr><td style="text-align:left;">16</td><td style="text-align:left;">[ZREVRANGEBYSCORE key max min <a href="https://www.redis.net.cn/order/3624.html" target="_blank" rel="noopener noreferrer">WITHSCORES]</a> è¿”å›æœ‰åºé›†ä¸­æŒ‡å®šåˆ†æ•°åŒºé—´å†…çš„æˆå‘˜ï¼Œåˆ†æ•°ä»é«˜åˆ°ä½æ’åº</td></tr><tr><td style="text-align:left;">17</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3625.html" target="_blank" rel="noopener noreferrer">ZREVRANK key member</a> è¿”å›æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼Œæœ‰åºé›†æˆå‘˜æŒ‰åˆ†æ•°å€¼é€’å‡(ä»å¤§åˆ°å°)æ’åº</td></tr><tr><td style="text-align:left;">18</td><td style="text-align:left;"><a href="https://www.redis.net.cn/order/3626.html" target="_blank" rel="noopener noreferrer">ZSCORE key member</a> è¿”å›æœ‰åºé›†ä¸­ï¼Œæˆå‘˜çš„åˆ†æ•°å€¼</td></tr><tr><td style="text-align:left;">19</td><td style="text-align:left;">[ZUNIONSTORE destination numkeys key <a href="https://www.redis.net.cn/order/3627.html" target="_blank" rel="noopener noreferrer">key ...]</a> è®¡ç®—ç»™å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæœ‰åºé›†çš„å¹¶é›†ï¼Œå¹¶å­˜å‚¨åœ¨æ–°çš„ key ä¸­</td></tr><tr><td style="text-align:left;">20</td><td style="text-align:left;">[ZSCAN key cursor <a href="https://www.redis.net.cn/order/3628.html" target="_blank" rel="noopener noreferrer">MATCH pattern] [COUNT count]</a> è¿­ä»£æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼ˆåŒ…æ‹¬å…ƒç´ æˆå‘˜å’Œå…ƒç´ åˆ†å€¼ï¼‰</td></tr></tbody></table><h3 id="æ‰©å±•" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•"><span>æ‰©å±•</span></a></h3><h4 id="geoåœ°ç†ä½ç½®" tabindex="-1"><a class="header-anchor" href="#geoåœ°ç†ä½ç½®"><span>Geoåœ°ç†ä½ç½®</span></a></h4><h4 id="hyperloglogæŠ€æœ¯ç»Ÿè®¡" tabindex="-1"><a class="header-anchor" href="#hyperloglogæŠ€æœ¯ç»Ÿè®¡"><span>HyperLoglogæŠ€æœ¯ç»Ÿè®¡</span></a></h4><h4 id="bloomfilterå¸ƒéš†è¿‡æ»¤å™¨" tabindex="-1"><a class="header-anchor" href="#bloomfilterå¸ƒéš†è¿‡æ»¤å™¨"><span>bloomfilterå¸ƒéš†è¿‡æ»¤å™¨</span></a></h4><h2 id="_05ã€redisæŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_05ã€redisæŒä¹…åŒ–"><span>05ã€RedisæŒä¹…åŒ–</span></a></h2><p>Redis æ˜¯ä¸€æ¬¾åŸºäºå†…å­˜çš„éå…³ç³»å‹æ•°æ®åº“ï¼Œå®ƒä¼šå°†æ•°æ®å…¨éƒ¨å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚ä½†æ˜¯å¦‚æœ Redis æœåŠ¡å™¨å‡ºç°æŸäº›æ„å¤–æƒ…å†µï¼Œæ¯”å¦‚å®•æœºæˆ–è€…æ–­ç”µç­‰ï¼Œé‚£ä¹ˆå†…å­˜ä¸­çš„æ•°æ®å°±ä¼šå…¨éƒ¨ä¸¢å¤±ã€‚å› æ­¤å¿…é¡»æœ‰<strong>ä¸€ç§æœºåˆ¶èƒ½å¤Ÿä¿è¯ Redis å‚¨å­˜çš„æ•°æ®ä¸ä¼šå› æ•…éšœè€Œä¸¢å¤±</strong>ï¼Œè¿™å°±æ˜¯ Redis çš„æ•°æ®æŒä¹…åŒ–æœºåˆ¶ã€‚</p><p>æ•°æ®çš„æŒä¹…åŒ–å­˜å‚¨æ˜¯ Redis çš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒèƒ½å¤Ÿå°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°æœ¬åœ°ç£ç›˜ä¸­ï¼Œå®ç°å¯¹æ•°æ®çš„æŒä¹…å­˜å‚¨ã€‚è¿™æ ·å³ä½¿åœ¨æœåŠ¡å™¨å‘ç”Ÿæ•…éšœä¹‹åï¼Œä¹Ÿèƒ½é€šè¿‡æœ¬åœ°ç£ç›˜å¯¹æ•°æ®è¿›è¡Œæ¢å¤ã€‚</p><p>Redis æä¾›äº†ä¸¤ç§æŒä¹…åŒ–æœºåˆ¶ï¼š</p><ul><li>ç¬¬ä¸€ç§æ˜¯ RDBï¼Œåˆç§°å¿«ç…§ï¼ˆsnapshotï¼‰æ¨¡å¼ï¼Œï¼ˆé»˜è®¤ä½¿ç”¨ï¼‰å°†å†…å­˜æ•°æ®å†™å…¥åˆ°äºŒè¿›åˆ¶æ–‡ä»¶</li><li>ç¬¬äºŒç§æ˜¯ AOF æ—¥å¿—ï¼Œä¹Ÿå°±è¿½åŠ æ¨¡å¼ã€‚å°†ä¿®æ”¹å‘½ä»¤å†™å…¥åˆ°å­˜å‚¨æ–‡ä»¶</li></ul><h3 id="rdb-å¿«ç…§æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#rdb-å¿«ç…§æ¨¡å¼"><span>RDB-å¿«ç…§æ¨¡å¼</span></a></h3><p>æˆ‘ä»¬çŸ¥é“ Redis æ˜¯å•çº¿ç¨‹çš„ï¼Œå³ä¸€ä¸ªçº¿ç¨‹å®Œæˆå®¢æˆ·ç«¯çš„å¹¶å‘è¯»å†™ï¼Œè‹¥æ˜¯è¿˜è¦åœ¨è¿™ä¸ªè¿›ç¨‹æ‰§è¡Œå¤‡ä»½æ“ä½œï¼ˆå¯¹æ–‡ä»¶è¿›è¡ŒIOè¯»å†™ï¼‰ï¼Œä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚ä¸ºæ­¤è§£å†³åŠæ³•æ˜¯åˆ©ç”¨<strong>å¤šè¿›ç¨‹</strong>ï¼Œå¤‡ä»½ä½¿ç”¨å­è¿›ç¨‹è¿›è¡Œæ“ä½œ</p><p>RDB å®é™…ä¸Šæ˜¯ Redis å†…éƒ¨çš„ä¸€ä¸ªå®šæ—¶å™¨äº‹ä»¶ï¼Œå®ƒæ¯éš”ä¸€æ®µå›ºå®šæ—¶é—´å°±å»æ£€æŸ¥å½“å‰æ•°æ®å‘ç”Ÿæ”¹å˜çš„æ¬¡æ•°å’Œæ”¹å˜çš„æ—¶é—´é¢‘ç‡ï¼Œçœ‹å®ƒä»¬æ˜¯å¦æ»¡è¶³é…ç½®æ–‡ä»¶ä¸­è§„å®šçš„æŒä¹…åŒ–è§¦å‘æ¡ä»¶ã€‚å½“æ»¡è¶³æ¡ä»¶æ—¶ï¼ŒRedis å°±ä¼šé€šè¿‡æ“ä½œç³»ç»Ÿè°ƒç”¨ fork() æ¥åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œè¯¥å­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹äº«æœ‰ç›¸åŒçš„åœ°å€ç©ºé—´ã€‚</p><p>Redis é€šè¿‡å­è¿›ç¨‹éå†æ•´ä¸ªå†…å­˜ç©ºé—´æ¥è·å–å­˜å‚¨çš„æ•°æ®ï¼Œä»è€Œå®Œæˆæ•°æ®æŒä¹…åŒ–æ“ä½œã€‚æ³¨æ„ï¼Œæ­¤æ—¶çš„ä¸»è¿›ç¨‹åˆ™ä»ç„¶å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œçˆ¶å­è¿›ç¨‹ä¹‹é—´é€šè¿‡æ“ä½œç³»ç»Ÿçš„ COW æœºåˆ¶å®ç°äº†æ•°æ®æ®µåˆ†ç¦»ï¼Œä»è€Œä¿è¯äº†çˆ¶å­è¿›ç¨‹ä¹‹é—´äº’ä¸å½±å“</p><figure><img src="https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis-RDB.png" alt="rdb" tabindex="0" loading="lazy"><figcaption>rdb</figcaption></figure><blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨ä¸€ä¸ªè§¦å‘æœºåˆ¶æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡Œå¤‡ä»½ï¼Œç„¶åå¤‡ä»½ç”¨å­è¿›ç¨‹æ“ä½œï¼ˆä¸»è¿›ç¨‹ç»§ç»­å¯¹å¤–æä¾›æœåŠ¡ä¸å—å½±å“ï¼‰</p></blockquote><h4 id="_1-è§¦å‘ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_1-è§¦å‘ç­–ç•¥"><span>1.è§¦å‘ç­–ç•¥</span></a></h4><p>RDB æŒä¹…åŒ–æä¾›äº†ä¸¤ç§è§¦å‘ç­–ç•¥ï¼šä¸€ç§æ˜¯æ‰‹åŠ¨è§¦å‘ï¼Œå¦ä¸€ç§æ˜¯è‡ªåŠ¨è§¦å‘</p><p>é…ç½®æ–‡ä»¶å®šä¹‰ï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ•°æ®åº“å¤‡ä»½çš„æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dbfilename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dump.rdb</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é»˜è®¤æ˜¯ï¼šdir ./  ä¹Ÿå°±æ˜¯rediså®‰è£…ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/data</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„æˆæƒï¼š<code>chmod 777 /data/opt/redis/data</code></p><ol><li><p><strong>æ‰‹åŠ¨è§¦å‘</strong></p><p>æ‰‹åŠ¨è§¦å‘æ˜¯é€šè¿‡<code>SAVAE</code>å‘½ä»¤æˆ–è€…<code>BGSAVE</code>å‘½ä»¤å°†å†…å­˜æ•°æ®ä¿å­˜åˆ°ç£ç›˜æ–‡ä»¶ä¸­ã€‚å¦‚ä¸‹æ‰€ç¤º</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6379</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">SAVE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">OK</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6379</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">BGSAVE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Background</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> saving</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> started</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6379</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">LASTSAVE</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">integer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">1611298430</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šè¿°å‘½ä»¤<code>BGSAVE</code>ä»åå°æ‰§è¡Œæ•°æ®ä¿å­˜æ“ä½œï¼Œå…¶å¯ç”¨æ€§è¦ä¼˜äºæ‰§è¡Œ SAVE å‘½ä»¤</p><ul><li>SAVE å‘½ä»¤ä¼šé˜»å¡ Redis æœåŠ¡å™¨è¿›ç¨‹ï¼Œç›´åˆ° dump.rdb æ–‡ä»¶åˆ›å»ºå®Œæ¯•ä¸ºæ­¢ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ä¸èƒ½å¤„ç†ä»»ä½•çš„å‘½ä»¤è¯·æ±‚ã€‚</li><li><code>BGSAVE</code>å‘½ä»¤æ˜¯éé˜»å¡å¼çš„ï¼Œæ‰€è°“éé˜»å¡å¼ï¼ŒæŒ‡çš„æ˜¯åœ¨è¯¥å‘½ä»¤æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¹¶ä¸å½±å“ Redis æœåŠ¡å™¨å¤„ç†å®¢æˆ·ç«¯çš„å…¶ä»–è¯·æ±‚ã€‚è¿™æ˜¯å› ä¸º Redis æœåŠ¡å™¨ä¼š fork() ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–æ“ä½œï¼ˆæ¯”å¦‚åˆ›å»ºæ–°çš„ dunp.rdb æ–‡ä»¶ï¼‰ï¼Œè€Œçˆ¶è¿›ç¨‹åˆ™ç»§ç»­å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚å½“å­è¿›ç¨‹å¤„ç†å®Œåä¼šå‘çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œé€šçŸ¥å®ƒå·²ç»å¤„ç†å®Œæ¯•ã€‚æ­¤æ—¶ï¼Œçˆ¶è¿›ç¨‹ä¼šç”¨æ–°çš„ dump.rdb æ–‡ä»¶è¦†ç›–æ‰åŸæ¥çš„æ—§æ–‡ä»¶ã€‚</li></ul><p>å› ä¸º<code>SAVE</code>å‘½ä»¤æ— éœ€åˆ›å»ºå­è¿›ç¨‹ï¼Œæ‰€ä»¥æ‰§è¡Œé€Ÿåº¦è¦ç•¥å¿«äº<code>BGSAVE</code>å‘½ä»¤ï¼Œä½†æ˜¯<code>SAVE</code>å‘½ä»¤æ˜¯é˜»å¡å¼çš„ï¼Œå› æ­¤å…¶å¯ç”¨æ€§æ¬ ä½³ï¼Œå¦‚æœåœ¨æ•°æ®é‡è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼ŒåŸºæœ¬ä¸Šä½“ä¼šä¸åˆ°ä¸¤ä¸ªå‘½ä»¤çš„å·®åˆ«ï¼Œä¸è¿‡ä»ç„¶å»ºè®®æ‚¨ä½¿ç”¨ <code>BGSAVE</code>å‘½ä»¤ã€‚</p><p>æ³¨æ„ï¼šLASTSAVE å‘½ä»¤ç”¨äºæŸ¥çœ‹ BGSAVE å‘½ä»¤æ˜¯å¦æ‰§è¡ŒæˆåŠŸã€‚</p></li><li><p><strong>è‡ªåŠ¨è§¦å‘ç­–ç•¥</strong></p><p>è‡ªåŠ¨è§¦å‘ç­–ç•¥ï¼Œæ˜¯æŒ‡ Redis åœ¨æŒ‡å®šçš„æ—¶é—´å†…ï¼Œæ•°æ®å‘ç”Ÿäº†å¤šå°‘æ¬¡å˜åŒ–æ—¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œ<code>BGSAVE</code>å‘½ä»¤ã€‚è‡ªåŠ¨è§¦å‘çš„æ¡ä»¶åŒ…å«åœ¨äº† Redis çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><figure><img src="https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_RDBConf.png" alt="config" tabindex="0" loading="lazy"><figcaption>config</figcaption></figure><p>ä¸Šå›¾æ‰€ç¤ºï¼Œ save m n çš„å«ä¹‰æ˜¯åœ¨æ—¶é—´ m ç§’å†…ï¼Œå¦‚æœ Redis æ•°æ®è‡³å°‘å‘ç”Ÿäº† n æ¬¡å˜åŒ–ï¼Œé‚£ä¹ˆå°±è‡ªåŠ¨æ‰§è¡Œ<code>BGSAVE</code>å‘½ä»¤ã€‚é…ç½®ç­–ç•¥è¯´æ˜å¦‚ä¸‹ï¼š</p><ul><li>save 900 1 è¡¨ç¤ºåœ¨ 900 ç§’å†…ï¼Œè‡³å°‘æ›´æ–°äº† 1 æ¡æ•°æ®ï¼ŒRedis è‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤ï¼Œå°†æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ã€‚</li><li>save 300 10 è¡¨ç¤ºåœ¨ 300 ç§’å†…ï¼Œè‡³å°‘æ›´æ–°äº† 10 æ¡æ•°æ®ï¼ŒRedis è‡ªåŠ¨è§¦ BGSAVE å‘½ä»¤ï¼Œå°†æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ã€‚</li><li>save 60 10000 è¡¨ç¤º 60 ç§’å†…ï¼Œè‡³å°‘æ›´æ–°äº† 10000 æ¡æ•°æ®ï¼ŒRedis è‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤ï¼Œå°†æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ã€‚</li></ul><p>åªè¦ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶ä»»æ„æ»¡è¶³ä¸€ä¸ªï¼ŒæœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨æ‰§è¡Œ<code>BGSAVE</code>å‘½ä»¤ã€‚å½“ç„¶æ‚¨å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè‡ªå·±è°ƒæ•´è§¦å‘ç­–ç•¥ã€‚</p><p>æ³¨æ„ï¼šæ¯æ¬¡åˆ›å»º RDB æ–‡ä»¶ä¹‹åï¼ŒRedis æœåŠ¡å™¨ä¸ºå®ç°è‡ªåŠ¨æŒä¹…åŒ–è€Œè®¾ç½®çš„æ—¶é—´è®¡æ•°å’Œæ¬¡æ•°è®¡æ•°å°±ä¼šè¢«æ¸…é›¶ï¼Œå¹¶é‡æ–°å¼€å§‹è®¡æ•°ï¼Œå› æ­¤å¤šä¸ªç­–ç•¥çš„æ•ˆæœä¸ä¼šå åŠ ã€‚</p></li></ol><h4 id="_2-rdbçš„é”™è¯¯å¤„ç†" tabindex="-1"><a class="header-anchor" href="#_2-rdbçš„é”™è¯¯å¤„ç†"><span>2.RDBçš„é”™è¯¯å¤„ç†</span></a></h4><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">stop-writes-on-bgsave-error</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>åå°å­˜å‚¨å‘é€é”™è¯¯æ—¶ï¼Œç¦æ­¢å†™å…¥ï¼Œé»˜è®¤å€¼æ˜¯yes,é»˜è®¤æƒ…å†µä¸‹ï¼Œredisåœ¨åå°ç”Ÿæˆçš„å¿«ç…§æ–‡ä»¶æ—¶å¤±è´¥ï¼Œå°±ä¼šåœæ­¢æ¥æ”¶æ•°æ®ï¼Œç›®çš„æ˜¯è®©ç”¨æˆ·èƒ½çŸ¥é“æ²¡æœ‰æŒä¹…åŒ–åŠŸèƒ½ã€‚</p><h4 id="_3-rdbçš„æ•°æ®å‹ç¼©" tabindex="-1"><a class="header-anchor" href="#_3-rdbçš„æ•°æ®å‹ç¼©"><span>3.RDBçš„æ•°æ®å‹ç¼©</span></a></h4><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">rdbcompression</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>æŒ‡å®šå­˜å‚¨è‡³æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦å‹ç¼©æ•°æ®ï¼Œé»˜è®¤ä¸ºyesï¼ŒRedisé‡‡ç”¨LZFå‹ç¼©ï¼Œå¦‚æœä¸ºäº†èŠ‚çœCPUæ—¶é—´ï¼Œå¯ä»¥å…³é—­è¯¥é€‰é¡¹ï¼Œä½†ä¼šå¯¼è‡´æ•°æ®åº“æ–‡ä»¶å˜çš„å·¨å¤§,ä¸å»ºè®®å…³é—­ã€‚</p><h3 id="aof-æ—¥å¿—æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#aof-æ—¥å¿—æ¨¡å¼"><span>AOF-æ—¥å¿—æ¨¡å¼</span></a></h3><p>AOF è¢«ç§°ä¸ºè¿½åŠ æ¨¡å¼ï¼Œæˆ–æ—¥å¿—æ¨¡å¼ï¼Œæ˜¯ Redis æä¾›çš„å¦ä¸€ç§æŒä¹…åŒ–ç­–ç•¥ï¼Œå®ƒèƒ½å¤Ÿå­˜å‚¨ Redis æœåŠ¡å™¨å·²ç»æ‰§è¡Œè¿‡çš„çš„å‘½ä»¤ï¼Œå¹¶ä¸”åªè®°å½•å¯¹å†…å­˜æœ‰è¿‡ä¿®æ”¹çš„å‘½ä»¤ï¼Œè¿™ç§æ•°æ®è®°å½•æ–¹æ³•ï¼Œè¢«å«åšâ€œå¢é‡å¤åˆ¶â€ï¼Œå…¶é»˜è®¤å­˜å‚¨æ–‡ä»¶ä¸º<code>appendonly.aof</code>ã€‚</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># è¿‡ç¨‹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Rediså®¢æˆ·ç«¯/go/java/Pythonå®¢æˆ·ç«¯</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ï¼šå‘é€å†™å‘½ä»¤â€”â€”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">â€”&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">RedisæœåŠ¡å™¨â€”â€”â€”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">â€”&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">åŒæ­¥å†™å‘½ä»¤â€”â€”</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">â€”&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">AOFæ–‡ä»¶</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯¥æ–‡ä»¶å­˜å‚¨äº†æœåŠ¡å™¨æ‰§è¡Œè¿‡çš„æ‰€æœ‰ä¿®æ”¹å‘½ä»¤ï¼Œå› æ­¤ï¼Œåªè¦æœåŠ¡å™¨é‡æ–°æ‰§è¡Œä¸€æ¬¡ .aof æ–‡ä»¶ï¼Œå°±å¯ä»¥å®ç°è¿˜åŸæ•°æ®çš„ç›®çš„</p><h4 id="_1-å®ç°æœºåˆ¶-å†™å…¥å’Œé‡å†™" tabindex="-1"><a class="header-anchor" href="#_1-å®ç°æœºåˆ¶-å†™å…¥å’Œé‡å†™"><span>1.å®ç°æœºåˆ¶-å†™å…¥å’Œé‡å†™</span></a></h4><p>å†™å…¥æœºåˆ¶ï¼š</p><p>æ”¶åˆ°ä¿®æ”¹å‘½ä»¤å°±ä¼šå¯¹å…¶è¿›è¡Œæ ¡éªŒï¼Œæ²¡é—®é¢˜å°±ä¼šå°†å‘½ä»¤è¿½åŠ åˆ°.aofæ–‡ä»¶ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªIOæ“ä½œï¼Œä¸ºäº†æé«˜è¯»å†™æ•ˆç‡ï¼Œä¼šæš‚æ—¶å°†æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªå†…å­˜ç¼“å†²åŒºä¸­ï¼Œå†™æ»¡äº†æ‰ä¼šå°†å†…å®¹å†™å…¥åˆ°ç£ç›˜ã€‚æœåŠ¡æŒ‚äº†ï¼Œä¹Ÿå¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶çš„å‘½ä»¤å…¨éƒ¨æ‰§è¡Œä¸€éå°±å¯æ¢å¤ä»¥å‰çš„æ ·å­</p><p>é‡å†™æœºåˆ¶ï¼š</p><p>Redis åœ¨é•¿æœŸè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œaof æ–‡ä»¶ä¼šè¶Šå˜è¶Šé•¿ã€‚å¦‚æœæœºå™¨å®•æœºé‡å¯ï¼Œâ€œé‡æ¼”â€æ•´ä¸ª aof æ–‡ä»¶ä¼šéå¸¸è€—æ—¶ï¼Œå¯¼è‡´é•¿æ—¶é—´ Redis æ— æ³•å¯¹å¤–æä¾›æœåŠ¡ã€‚å› æ­¤å°±éœ€è¦å¯¹ aof æ–‡ä»¶åšä¸€ä¸‹â€œç˜¦èº«â€è¿åŠ¨ã€‚</p><p>ä¸ºäº†è®© aof æ–‡ä»¶çš„å¤§å°æ§åˆ¶åœ¨åˆç†çš„èŒƒå›´å†…ï¼ŒRedis æä¾›äº† AOF é‡å†™æœºåˆ¶ï¼Œæ‰‹åŠ¨æ‰§è¡Œ<code>BGREWRITEAOF</code>å‘½ä»¤ï¼Œå¼€å§‹é‡å†™ aof æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6379</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">BGREWRITEAOF</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Background</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> append</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> only</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rewriting</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> started</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä¸Šè¿°æ“ä½œåï¼ŒæœåŠ¡å™¨ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ aof æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li>æ–°çš„ aof æ–‡ä»¶è®°å½•çš„æ•°æ®åº“æ•°æ®å’ŒåŸ aof æ–‡ä»¶è®°å½•çš„æ•°æ®åº“æ•°æ®å®Œå…¨ä¸€è‡´ï¼›</li><li>æ–°çš„ aof æ–‡ä»¶ä¼šä½¿ç”¨å°½å¯èƒ½å°‘çš„å‘½ä»¤æ¥è®°å½•æ•°æ®åº“æ•°æ®ï¼Œå› æ­¤æ–°çš„ aof æ–‡ä»¶çš„ä½“ç§¯ä¼šå°å¾ˆå¤šï¼›</li><li>AOF é‡å†™æœŸé—´ï¼ŒæœåŠ¡å™¨ä¸ä¼šè¢«é˜»å¡ï¼Œå®ƒå¯ä»¥æ­£å¸¸å¤„ç†å®¢æˆ·ç«¯å‘é€çš„å‘½ä»¤ã€‚</li></ul><p>ä¸‹è¡¨å¯¹åŸæœ‰ aof æ–‡ä»¶å’Œæ–°ç”Ÿæˆçš„ aof æ–‡ä»¶åšäº†å¯¹æ¯”ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th>åŸæœ‰aofæ–‡ä»¶</th><th>é‡å†™åaofæ–‡ä»¶</th></tr></thead><tbody><tr><td>select 0</td><td>SELECT 0</td></tr><tr><td>sadd myset Jack</td><td>SADD myset Jack Helen JJ Lisa</td></tr><tr><td>sadd myset Helen</td><td>SET msg &#39;hello tarena&#39;</td></tr><tr><td>sadd myset JJ</td><td>RPUSH num 4 6 8</td></tr><tr><td>sadd myset Lisa</td><td></td></tr><tr><td>INCR number</td><td></td></tr><tr><td>INCR number</td><td></td></tr><tr><td>DEL number</td><td></td></tr><tr><td>SET message &#39;<a href="http://www.baidu.com" target="_blank" rel="noopener noreferrer">www.baidu.com</a>&#39;</td><td></td></tr><tr><td>SET message &#39;<a href="http://www.biancheng.net" target="_blank" rel="noopener noreferrer">www.biancheng.net</a>&#39;</td><td></td></tr><tr><td>RPUSH num 2 4 6</td><td></td></tr><tr><td>RPUSH num 8</td><td></td></tr><tr><td>LPOP num</td><td></td></tr></tbody></table><p>ä»ä¸Šè¡¨å¯ä»¥çœ‹å‡ºï¼Œæ–°ç”Ÿæˆçš„ aof æ–‡ä»¶ä¸­ï¼Œå®ƒçš„å‘½ä»¤æ ¼å¼åšäº†å¾ˆå¤§ç¨‹åº¦çš„ç®€åŒ–ã€‚</p><p><strong>è‡ªåŠ¨è§¦å‘é‡å†™</strong></p><p>Redis ä¸ºè‡ªåŠ¨è§¦å‘ AOF é‡å†™åŠŸèƒ½ï¼Œæä¾›äº†ç›¸åº”çš„é…ç½®ç­–ç•¥ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼šä¿®æ”¹ Redis é…ç½®æ–‡ä»¶ï¼Œè®©æœåŠ¡å™¨è‡ªåŠ¨æ‰§è¡Œ BGREWRITEAOF å‘½ä»¤ã€‚</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#é»˜è®¤é…ç½®é¡¹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">auto-aof-rewrite-percentage</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 100</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # è¡¨ç¤ºaofæ–‡ä»¶å¢é‡çš„æ¯”ä¾‹æ¥è§¦å‘ï¼Œ100è¡¨ç¤ºï¼šæ–‡ä»¶å¢é‡å¤§äº100%æ‰é‡å†™ï¼Œå³å¤§ä¸€å€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">auto-aof-rewrite-min-size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 64mb</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # è¡¨ç¤ºè§¦å‘AOFé‡å†™çš„æœ€å°æ–‡ä»¶ä½“ç§¯,å¤§äºæˆ–ç­‰äº64MBè‡ªåŠ¨è§¦å‘ã€‚</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å¼€å¯aof" tabindex="-1"><a class="header-anchor" href="#_2-å¼€å¯aof"><span>2.å¼€å¯AOF</span></a></h4><p><strong>AOF æœºåˆ¶é»˜è®¤å¤„äºæœªå¼€å¯çŠ¶æ€</strong>ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ Redis é…ç½®æ–‡ä»¶å¼€å¯ AOFï¼Œå¦‚ä¸‹æ‰€ç¤º</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># windowsç³»ç»Ÿ</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŠŠnoæ”¹ä¸º yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">appendonly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#ç¡®å®šå­˜å‚¨æ–‡ä»¶åæ˜¯å¦æ­£ç¡®</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">appendfilename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;appendonly.aof&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#é‡å¯æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --service-stop</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --service-start</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#Linuxç³»ç»Ÿ</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/redis/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">appendonly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # æŠŠ no æ”¹ä¸º yes</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#ç¡®å®šå­˜å‚¨æ–‡ä»¶åæ˜¯å¦æ­£ç¡®</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">appendfilename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;appendonly.aof&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#é‡å¯æœåŠ¡ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/init.d/redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æç¤ºï¼šæœ¬èŠ‚å»ºè®®åœ¨æ‚¨åœ¨ Linux ç³»ç»Ÿä¸Šæ“ä½œ Redisï¼Œå¦åˆ™ä¸€äº› AOF çš„æ€§èƒ½æ— æ³•ä½“ç°ã€‚</p><h4 id="_3-aofé…ç½®ç­–ç•¥" tabindex="-1"><a class="header-anchor" href="#_3-aofé…ç½®ç­–ç•¥"><span>3.AOFé…ç½®ç­–ç•¥</span></a></h4><p>ä¸Šé¢ä»‹ç»äº†å†™æœºåˆ¶è¿‡ç¨‹ä¸­ï¼Œè‹¥æ˜¯é‡åˆ°å®•æœºå‰ï¼Œç¼“å­˜å†…çš„æ•°æ®æ²¡èƒ½åŠæ—¶å†™å…¥ç£ç›˜å°±ä¼šæœ‰ä¸¢å¤±é£é™©ï¼Œç¼“å­˜åˆ°å†…å­˜çš„ä¿®æ”¹å‘½ä»¤è¶Šå¤šï¼Œä¸¢å¤±çš„æ•°æ®è¶Šå¤šã€‚</p><p>ä¸ºäº†æ•°æ®çš„å®‰å…¨è€ƒè™‘ï¼Œä¼šä¸ºAOFæä¾›äº†ç­–ç•¥é…ç½®ï¼š</p><figure><img src="https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_AOFConf.png" alt="aof" tabindex="0" loading="lazy"><figcaption>aof</figcaption></figure><p>ç­–ç•¥è¯´æ˜ï¼š</p><ul><li>Alwaysï¼šæœåŠ¡å™¨æ¯å†™å…¥ä¸€ä¸ªå‘½ä»¤ï¼Œå°±è°ƒç”¨ä¸€æ¬¡ fsync å‡½æ•°ï¼Œå°†ç¼“å†²åŒºé‡Œé¢çš„å‘½ä»¤å†™å…¥åˆ°ç¡¬ç›˜ï¼Œä¸ä¼šä¸¢å¤±ä»»ä½•å·²ç»å®Œæˆçš„æ“ä½œçš„å‘½ä»¤æ•°æ®ï¼Œä½†æ˜¯æ‰§è¡Œé€Ÿåº¦æ…¢</li><li>Everysecï¼ˆé»˜è®¤ï¼‰ï¼šæœåŠ¡å™¨æ¯ä¸€ç§’è°ƒç”¨ä¸€æ¬¡ fsync å‡½æ•°ï¼ŒæœåŠ¡æ•…éšœæœ€å¤šä¸¢å¤±1ç§’çš„æ•°æ®</li><li>Noï¼šæœåŠ¡å™¨ä¸ä¸»åŠ¨è°ƒç”¨ fsync å‡½æ•°ï¼Œä»€ä¹ˆæƒ…å†µå†™å…¥ç£ç›˜ç”±æ“ä½œç³»ç»Ÿå†³å®šã€‚ä¸¢å¤±æ•°é‡ä¸ç¡®å®šï¼Œä¸å®‰å…¨</li></ul><p>æ³¨æ„ï¼šLinux ç³»ç»Ÿçš„ fsync() å‡½æ•°å¯ä»¥å°†æŒ‡å®šæ–‡ä»¶çš„å†…å®¹ä»å†…æ ¸ç¼“å­˜åˆ·åˆ°ç¡¬ç›˜ä¸­ï¼Œç”±äºæ˜¯ç£ç›˜çš„IOæ“ä½œï¼Œæ‰€ä»¥è¿™ä¸ªå¾ˆæ…¢ï¼Œæ¯æ¬¡éƒ½æ‰§è¡Œå¾ˆå½±å“æ€§èƒ½ï¼Œè‹¥æ˜¯Noç­–ç•¥å¾ˆä¸å®‰å…¨ä¸æ¨èï¼Œä¸ºæ­¤å¸¸ç”¨çš„è¿˜æ˜¯1ç§’æ‰§è¡Œä¸€æ¬¡</p><h3 id="aofå’Œrdbå¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#aofå’Œrdbå¯¹æ¯”"><span>AOFå’ŒRDBå¯¹æ¯”</span></a></h3><table><thead><tr><th>RDBæŒä¹…åŒ–</th><th>AOFæŒä¹…åŒ–</th></tr></thead><tbody><tr><td>å…¨é‡å¤‡ä»½ï¼Œä¸€æ¬¡ä¿å­˜æ•´ä¸ªæ•°æ®åº“ã€‚</td><td>å¢é‡å¤‡ä»½ï¼Œä¸€æ¬¡åªä¿å­˜ä¸€ä¸ªä¿®æ”¹æ•°æ®åº“çš„å‘½ä»¤ã€‚</td></tr><tr><td>æ¯æ¬¡æ‰§è¡ŒæŒä¹…åŒ–æ“ä½œçš„é—´éš”æ—¶é—´è¾ƒé•¿ã€‚</td><td>ä¿å­˜çš„é—´éš”é»˜è®¤ä¸ºä¸€ç§’é’Ÿï¼ˆEverysecï¼‰</td></tr><tr><td>æ•°æ®ä¿å­˜ä¸ºäºŒè¿›åˆ¶æ ¼å¼ï¼Œå…¶è¿˜åŸé€Ÿåº¦å¿«ã€‚</td><td>ä½¿ç”¨æ–‡æœ¬æ ¼å¼è¿˜åŸæ•°æ®ï¼Œæ‰€ä»¥æ•°æ®è¿˜åŸé€Ÿåº¦ä¸€èˆ¬ã€‚</td></tr><tr><td>æ‰§è¡Œ SAVE å‘½ä»¤æ—¶ä¼šé˜»å¡æœåŠ¡å™¨ï¼Œä½†æ‰‹åŠ¨æˆ–è€…è‡ªåŠ¨è§¦å‘çš„ BGSAVE ä¸ä¼šé˜»å¡æœåŠ¡å™¨</td><td>AOFæŒä¹…åŒ–æ— è®ºä½•æ—¶éƒ½ä¸ä¼šé˜»å¡æœåŠ¡å™¨ã€‚</td></tr></tbody></table><p><strong>å¦‚æœè¿›è¡Œæ•°æ®æ¢å¤æ—¶ï¼Œæ—¢æœ‰ dump.rdbæ–‡ä»¶ï¼Œåˆæœ‰ appendonly.aof æ–‡ä»¶ï¼Œæ‚¨åº”è¯¥å…ˆé€šè¿‡ appendonly.aof æ¢å¤æ•°æ®ï¼Œè¿™èƒ½æœ€å¤§ç¨‹åº¦åœ°ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ã€‚</strong></p><p><strong>è¿™ç§å·¥ä½œæ–¹å¼ä½¿å¾—Rediså¯ä»¥ä»copy-on-writeæœºåˆ¶ä¸­è·ç›Šã€‚(AOFçš„é‡å†™ä¹Ÿåˆ©ç”¨äº†å†™æ—¶å¤åˆ¶)</strong></p><p><strong>å†™æ—¶å¤åˆ¶ æ˜¯ä¸€ç§è®¡ç®—æœºç¨‹åºè®¾è®¡é¢†åŸŸçš„ä¼˜åŒ–ç­–ç•¥ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå¦‚æœæœ‰å¤šä¸ªè°ƒç”¨è€…åŒæ—¶è¦æ±‚ç›¸åŒèµ„æºï¼Œä»–ä»¬ä¼šå…±åŒè·å–ç›¸åŒçš„æŒ‡é’ˆæŒ‡å‘ç›¸åŒçš„èµ„æºï¼Œç›´åˆ°æŸä¸ªè°ƒç”¨è€…è¯•å›¾ä¿®æ”¹èµ„æºçš„å†…å®¹æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šçœŸæ­£å¤åˆ¶ä¸€ä»½ä¸“ç”¨å‰¯æœ¬ç»™è¯¥è°ƒç”¨è€…ï¼Œè€Œå…¶ä»–è°ƒç”¨è€…æ‰€è§åˆ°çš„æœ€åˆçš„èµ„æºä»ç„¶ä¿æŒä¸å˜ã€‚è¿™è¿‡ç¨‹å¯¹å…¶ä»–çš„è°ƒç”¨è€…éƒ½æ˜¯é€æ˜çš„ã€‚æ­¤ä½œæ³•ä¸»è¦çš„ä¼˜ç‚¹æ˜¯å¦‚æœè°ƒç”¨è€…æ²¡æœ‰ä¿®æ”¹è¯¥èµ„æºï¼Œå°±ä¸ä¼šæœ‰å‰¯æœ¬è¢«åˆ›å»ºï¼Œå› æ­¤å¤šä¸ªè°ƒç”¨è€…åªæ˜¯è¯»å–æ“ä½œæ—¶å¯ä»¥å…±äº«åŒä¸€ä»½èµ„æºã€‚</strong></p><h2 id="_06ã€äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#_06ã€äº‹åŠ¡"><span>06ã€äº‹åŠ¡</span></a></h2><h2 id="_07ã€redisä¸»ä»å¤åˆ¶" tabindex="-1"><a class="header-anchor" href="#_07ã€redisä¸»ä»å¤åˆ¶"><span>07ã€Redisä¸»ä»å¤åˆ¶</span></a></h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>ä¸»ä»æ¨¡å¼æ˜¯æ­å»ºRedisé›†ç¾¤æœ€ç®€å•çš„æ–¹å¼ï¼ï¼</p><p>ç¼ºé™·ï¼š</p><p>1ã€ ä¸å…·å¤‡è‡ªåŠ¨å®¹é”™å’Œæ¢å¤åŠŸèƒ½ï¼Œä¸»æŒ‚äº†è¦è®¤ä¸ºå¹²é¢„ï¼Œè€Œä¸”è‹¥æ˜¯æ•°æ®æ²¡æœ‰åŒæ­¥åˆ°ä»ä¹Ÿä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´</p><p>2ã€åªæœ‰ä¸€ä¸ªä¸»ï¼Œå†™å’Œå­˜å‚¨èƒ½åŠ›å—é™ï¼Œæ•°æ®å…¨é‡åŒæ­¥è‹¥æ˜¯æ•°æ®å¤§å°±ä¼šå‡ºç°å¡é¡¿ç°è±¡</p></div><p>åœ¨è½¯ä»¶çš„æ¶æ„ä¸­ï¼Œä¸»ä»æ¨¡å¼ï¼ˆMaster-Slaveï¼‰æ˜¯ä½¿ç”¨è¾ƒå¤šçš„ä¸€ç§æ¶æ„ã€‚ä¸»ï¼ˆMasterï¼‰å’Œä»ï¼ˆSlaveï¼‰åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œå½“ä¸»èŠ‚ç‚¹æœåŠ¡å™¨å†™å…¥æ•°æ®æ—¶ï¼ŒåŒæ—¶ä¹Ÿä¼šå°†æ•°æ®åŒæ­¥è‡³ä»èŠ‚ç‚¹æœåŠ¡å™¨ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œ<strong>ä¸»èŠ‚ç‚¹è´Ÿè´£å†™å…¥æ•°æ®ï¼Œè€Œä»èŠ‚ç‚¹è´Ÿè´£è¯»å–æ•°æ®ã€‚</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹master/slaveçš„å…³ç³»</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">info</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> replcation</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">##ä¸»ä»å…³è”å¤åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">savelof</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ä¸»ä»å¤åˆ¶å…³è”</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">## ç»ˆæ­¢å¤åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">saveof</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> one</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Redisçš„ä¸»ä»ç‰¹ç‚¹ï¼š</p><ul><li>masterèŠ‚ç‚¹å’ŒslaveèŠ‚ç‚¹è‹¥æ˜¯æ–­å¼€è¿æ¥ï¼Œslaveå¯è‡ªåŠ¨é‡è¿ï¼Œè¿æ¥æˆåŠŸåä¼šåŒæ­¥ä¸€æ¬¡æ•°æ®</li><li>é…ç½®å¥½åï¼Œmasterè´Ÿè´£å†™ï¼Œslaveè´Ÿè´£è¯»ï¼ˆå¯é…ç½®å°†æŒä¹…åŒ–æ“ä½œåœ¨slaveæ‰§è¡Œï¼‰</li><li>masterç«¯åŒæ­¥æ•°æ®æ˜¯éé˜»å¡çš„ï¼Œå³masterå¯ä»¥å¤„ç†å®¢æˆ·ç«¯å†™æ“ä½œï¼Œä¹Ÿå¯ä»¥åŒæ—¶è¿›è¡ŒåŒæ­¥æ•°æ®</li><li>ä¸»èŠ‚ç‚¹çš„æ•°æ®çš„æ¸…ç©ºï¼Œä¹Ÿä¼šæ¸…ç©ºä»slaveèŠ‚ç‚¹çš„æ•°æ®ä¿¡æ¯.</li></ul><h3 id="å¥½å¤„" tabindex="-1"><a class="header-anchor" href="#å¥½å¤„"><span>å¥½å¤„</span></a></h3><ul><li>é¿å…Redisçš„å•ç‚¹æ•…éšœï¼ˆé«˜å¯ç”¨è¿˜æ˜¯è¦çœ‹å“¨å…µæ¨¡å¼æ¥å®ç°ï¼‰</li><li>åšåˆ°è¯»å†™åˆ†ç¦»ï¼Œæ„å»ºè¯»å†™åˆ†ç¦»æ¶æ„ï¼Œæ»¡è¶³è¯»å¤šå†™å°‘çš„åº”ç”¨åœºæ™¯</li></ul><h3 id="ä¸»ä»æ¨¡å¼å®ç°" tabindex="-1"><a class="header-anchor" href="#ä¸»ä»æ¨¡å¼å®ç°"><span>ä¸»ä»æ¨¡å¼å®ç°</span></a></h3><p>Redis æä¾›äº†ä¸¤ç§å®ç°ä¸»ä»æ¨¡å¼çš„æ–¹æ³•ï¼Œä¸‹é¢è¿›è¡Œé€ä¸€ä»‹ç»ã€‚ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»¬åªä»ä¸€å°æœºå™¨ä¸Šæ­å»ºä¸»ä»æ¨¡å¼ã€‚</p><h4 id="_1-å‘½ä»¤æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_1-å‘½ä»¤æ–¹å¼"><span>1ï¼‰å‘½ä»¤æ–¹å¼</span></a></h4><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>é…ç½®ä¸»ä»è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæ¨èè¿˜æ˜¯ç”¨å‘½ä»¤æ–¹å¼æ„å»º</p></div><p>å‘½ä»¤è¯­æ³•ï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --port</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">slave-por</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t&gt; </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">--slaveof</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">master-i</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">p&gt; &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">master-por</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">t&gt;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å‚æ•°</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--port</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     è®¾ç½®ä»èŠ‚ç‚¹çš„ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">--slaveof</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  æŒ‡å®šä¸»èŠ‚ç‚¹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1.å‘½ä»¤å¯åŠ¨ï¼ˆå¯åŠ¨åå°±æ˜¯ä¸€ä¸ªæ­£å¸¸æä¾›ä¸€ä¸ªåªè¯»çš„RedisæœåŠ¡äº†ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6300</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --slaveof</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --masterauth</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --requirepass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --daemonize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># è§£é‡Šï¼š--masterauth ï¼šè¿æ¥ä¸»èŠ‚ç‚¹çš„å¯†ç ï¼Œä¸»è‹¥æ˜¯è®¾ç½®å¯†ç ï¼Œä»éœ€è¦å¯†ç æ‰å¯è¿æ¥åˆ°ä¸»   -requirepass mkxiaoer ï¼š è®¿é—®å½“å‰redisæœåŠ¡å¯†ç   --daemonizeï¼šå½“å‰RedisæœåŠ¡ä»¥å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰æ¨¡å¼è¿è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 63001</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  # ç›´æ¥å¯åŠ¨ä¸€ä¸ªredisæœåŠ¡è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„redisæœåŠ¡ï¼Œå¯è¯»å†™</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2.æ‰§è¡Œè¯»æ“ä½œå‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> name</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">&quot;jack&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#ä¸èƒ½æ‰§è¡Œå†™å‘½ä»¤</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">set</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> BangDe</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">READONLY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> You</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> can&#39;t write against a read only slave.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"># 3.å°†å½“å‰ç‹¬ç«‹çš„redisæœåŠ¡å˜æˆä¸€ä¸ªä»èŠ‚ç‚¹ï¼šslaveof  ip ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">127.0.0.1:63001&gt; SLAVEOF 127.0.0.1 6379</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">OK</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"># 4.ä»æ”¹ä¸ºç‹¬ç«‹RedisæœåŠ¡ï¼šSLAVEOF no one   ï¼ˆåç»­åˆå¯ç»§ç»­è¯»å†™äº†ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">127.0.0.1:63001&gt; SLAVEOF no one</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">OK</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è®¾ç½®ä¸»ä»çš„æ—¥å¿—ï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.101 </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Server initialized #æœåŠ¡åˆå§‹åŒ–</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.108 * Ready to accept connections </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#å‡†å¤‡è¿æ¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.108 * Connecting to MASTER 127.0.0.1:6379 </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#è¿æ¥åˆ°ä¸»æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.109 * MASTER &lt;-&gt; REPLICA sync started </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#å¯åŠ¨å‰¯æœ¬åŒæ­¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.110 * Non blocking connect </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SYNC fired the event.#è‡ªåŠ¨è§¦å‘SYNCå‘½ä»¤ï¼Œè¯·æ±‚åŒæ­¥æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.110 * Master replied to PING, replication can continue...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.112 * Partial resynchronization not possible (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">no</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> cached</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.431 * Full resync from master: 6eb220706f73107990c2b886dbc2c12a8d0d9d05:0</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.857 * MASTER &lt;-&gt; REPLICA sync: receiving 6916 bytes from master </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#ä»ä¸»æœºæ¥å—äº†æ•°æ®ï¼Œå¹¶å°†å…¶å­˜åœ¨äºç£ç›˜</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.874 * MASTER &lt;-&gt; REPLICA sync: Flushing old data </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#æ¸…ç©ºåŸæœ‰æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.874 * MASTER &lt;-&gt; REPLICA sync: Loading DB in memory </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#å°†ç£ç›˜ä¸­æ•°æ®è½½å…¥å†…å­˜</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[18160] 20 Jan 17:40:34.879 * MASTER &lt;-&gt; REPLICA sync: Finished with success </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#åŒæ­¥æ•°æ®å®Œæˆ</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-é…ç½®æ–‡ä»¶æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-é…ç½®æ–‡ä»¶æ–¹å¼"><span>2ï¼‰é…ç½®æ–‡ä»¶æ–¹å¼</span></a></h4><p>é…ç½®å°±æ¯”è¾ƒç®€å•ä¸€äº›ï¼Œç›´æ¥ä¸ºæ¯ä¸€ä¸ªæœåŠ¡åˆ›å»ºä¸€ä¸ªxxx.confæ–‡ä»¶ç„¶åç”¨å‘½ä»¤æ ¹æ®è¿™ä¸ªæ–‡ä»¶å¯åŠ¨å°±è¡Œ</p><p>æ–°å»ºæ–‡ä»¶Redis_6302.confï¼Œå¹¶æ·»åŠ é…ç½®ä¿¡æ¯ï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">slaveof</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">   # æŒ‡å®šä¸»èŠ‚ç‚¹çš„ipå’Œç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6302</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">                # æŒ‡å®šä»èŠ‚ç‚¹çš„ç«¯å£</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘½ä»¤è¡Œå¯åŠ¨RedisæœåŠ¡</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis_6302.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æµ‹è¯•</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-cli</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6302</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.0.1:6300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">HSET</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> user:username</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> biangcheng</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#å†™å…¥å¤±è´¥</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">error</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">READONLY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> You</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> can&#39;t write against a read only slave.</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_08ã€rediså“¨å…µ" tabindex="-1"><a class="header-anchor" href="#_08ã€rediså“¨å…µ"><span>08ã€Rediså“¨å…µ</span></a></h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>é«˜é˜¶ç‰ˆçš„ä¸»ä»å¤åˆ¶ï¼Œå•çº¯çš„ä¸»ä»å­˜åœ¨ä¸å…·å¤‡è‡ªåŠ¨æ¢å¤çš„åŠŸèƒ½ã€‚æœåŠ¡å®•æœºéœ€è¦äººä¸ºå¹²é¢„</p><p>Redis å®˜æ–¹æ¨èä¸€ç§é«˜å¯ç”¨æ–¹æ¡ˆ -- <strong>Redis Sentinel å“¨å…µæ¨¡å¼</strong></p></div><h3 id="åŸç†" tabindex="-1"><a class="header-anchor" href="#åŸç†"><span>åŸç†</span></a></h3><p>Sentinel é€šè¿‡ç›‘æ§çš„æ–¹å¼è·å–ä¸»æœºçš„å·¥ä½œçŠ¶æ€æ˜¯å¦æ­£å¸¸ï¼Œå½“ä¸»æœºå‘ç”Ÿæ•…éšœæ—¶ï¼Œ Sentinel ä¼šè‡ªåŠ¨è¿›è¡Œ Failoverï¼ˆå³æ•…éšœè½¬ç§»ï¼‰ï¼Œå¹¶å°†å…¶ç›‘æ§çš„ä»æœºæå‡ä¸»æœåŠ¡å™¨ï¼ˆmasterï¼‰ï¼Œä»è€Œä¿è¯äº†ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§ã€‚</p><p>å“¨å…µæ¨¡å¼æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ¨¡å¼ï¼ŒRedis ä¸ºå…¶æä¾›äº†ä¸“å±çš„å“¨å…µå‘½ä»¤ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>ç‹¬ç«‹çš„è¿›ç¨‹</strong>ï¼Œ<strong>èƒ½å¤Ÿç‹¬ç«‹è¿è¡Œ</strong></p><p>å“¨å…µä¸¤ä¸ªé‡è¦çš„ä½œç”¨ï¼š</p><ul><li>å“¨å…µèŠ‚ç‚¹æ¯ç§’ä¼šå‘ç”Ÿ<strong>pingå‘½ä»¤</strong>ï¼Œé€šè¿‡å›å¤<strong>åˆ¤æ–­è¿è¡ŒçŠ¶æ€</strong></li><li>æ£€æŸ¥åˆ°ä¸»æœåŠ¡æ•…éšœæ—¶ï¼Œ<strong>è‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªä»èŠ‚ç‚¹å‡çº§ä¸ºä¸»æœåŠ¡</strong>ã€‚ä½¿ç”¨<strong>PubSub å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œé€šçŸ¥å…¶ä»–èŠ‚ç‚¹ä¿®æ”¹é…æ–‡ä»¶</strong>ï¼Œè·Ÿéšæ–°çš„ä¸»æœåŠ¡</li></ul><p><strong>åœ¨å®é™…ç”Ÿäº§æƒ…å†µä¸­ï¼ŒRedis Sentinel æ˜¯é›†ç¾¤çš„é«˜å¯ç”¨çš„ä¿éšœï¼Œä¸ºé¿å… Sentinel å‘ç”Ÿæ„å¤–ï¼Œå®ƒä¸€èˆ¬æ˜¯ç”± 3ï½5 ä¸ªèŠ‚ç‚¹ç»„æˆï¼Œè¿™æ ·å°±ç®—æŒ‚äº†ä¸ªåˆ«èŠ‚ç‚¹ï¼Œè¯¥é›†ç¾¤ä»ç„¶å¯ä»¥æ­£å¸¸è¿è½¬ã€‚å…¶ç»“æ„å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p><figure><img src="https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_Sentinel.png" alt="å¤šå“¨å…µæ¨¡å¼" tabindex="0" loading="lazy"><figcaption>å¤šå“¨å…µæ¨¡å¼</figcaption></figure><p>ä¸Šå›¾æ‰€ç¤ºï¼Œå¤šä¸ªå“¨å…µä¹‹é—´ä¹Ÿå­˜åœ¨äº’ç›¸ç›‘æ§ï¼Œè¿™å°±å½¢æˆäº†å¤šå“¨å…µæ¨¡å¼ï¼Œç°åœ¨å¯¹è¯¥æ¨¡å¼çš„å·¥ä½œè¿‡ç¨‹è¿›è¡Œè®²è§£ï¼Œä»‹ç»å¦‚ä¸‹ï¼š</p><h4 id="_1-ä¸»è§‚ä¸‹çº¿" tabindex="-1"><a class="header-anchor" href="#_1-ä¸»è§‚ä¸‹çº¿"><span>1) ä¸»è§‚ä¸‹çº¿</span></a></h4><p>ä¸»è§‚ä¸‹çº¿ï¼Œé€‚ç”¨äºä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨ã€‚å¦‚æœåœ¨è§„å®šçš„æ—¶é—´å†…(é…ç½®å‚æ•°ï¼šdown-after-milliseconds)ï¼ŒSentinel èŠ‚ç‚¹æ²¡æœ‰æ”¶åˆ°ç›®æ ‡æœåŠ¡å™¨çš„æœ‰æ•ˆå›å¤ï¼Œåˆ™åˆ¤å®šè¯¥æœåŠ¡å™¨ä¸ºâ€œä¸»è§‚ä¸‹çº¿â€ã€‚æ¯”å¦‚ Sentinel1 å‘ä¸»æœåŠ¡å‘é€äº†<code>PING</code>å‘½ä»¤ï¼Œåœ¨è§„å®šæ—¶é—´å†…æ²¡æ”¶åˆ°ä¸»æœåŠ¡å™¨<code>PONG</code>å›å¤ï¼Œåˆ™ Sentinel1 åˆ¤å®šä¸»æœåŠ¡å™¨ä¸ºâ€œä¸»è§‚ä¸‹çº¿â€ã€‚</p><h4 id="_2-å®¢è§‚ä¸‹çº¿" tabindex="-1"><a class="header-anchor" href="#_2-å®¢è§‚ä¸‹çº¿"><span>2) å®¢è§‚ä¸‹çº¿</span></a></h4><p>å®¢è§‚ä¸‹çº¿ï¼Œåªé€‚ç”¨äºä¸»æœåŠ¡å™¨ã€‚ Sentinel1 å‘ç°ä¸»æœåŠ¡å™¨å‡ºç°äº†æ•…éšœï¼Œå®ƒä¼šé€šè¿‡ç›¸åº”çš„å‘½ä»¤ï¼Œè¯¢é—®å…¶å®ƒ Sentinel èŠ‚ç‚¹å¯¹ä¸»æœåŠ¡å™¨çš„çŠ¶æ€åˆ¤æ–­ã€‚å¦‚æœè¶…è¿‡åŠæ•°ä»¥ä¸Šçš„ Sentinel èŠ‚ç‚¹è®¤ä¸ºä¸»æœåŠ¡å™¨ down æ‰ï¼Œåˆ™ Sentinel1 èŠ‚ç‚¹åˆ¤å®šä¸»æœåŠ¡ä¸ºâ€œå®¢è§‚ä¸‹çº¿â€ã€‚</p><h4 id="_3-æŠ•ç¥¨é€‰ä¸¾" tabindex="-1"><a class="header-anchor" href="#_3-æŠ•ç¥¨é€‰ä¸¾"><span>3) æŠ•ç¥¨é€‰ä¸¾</span></a></h4><p>æŠ•ç¥¨é€‰ä¸¾ï¼Œæ‰€æœ‰ Sentinel èŠ‚ç‚¹ä¼šé€šè¿‡æŠ•ç¥¨æœºåˆ¶ï¼ŒæŒ‰ç…§è°å‘ç°è°å»å¤„ç†çš„åŸåˆ™ï¼Œé€‰ä¸¾ Sentinel1 ä¸ºé¢†å¤´èŠ‚ç‚¹å»åš Failoverï¼ˆæ•…éšœè½¬ç§»ï¼‰æ“ä½œã€‚Sentinel1 èŠ‚ç‚¹åˆ™æŒ‰ç…§ä¸€å®šçš„è§„åˆ™åœ¨æ‰€æœ‰ä»èŠ‚ç‚¹ä¸­é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜çš„ä½œä¸ºä¸»æœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡å‘å¸ƒè®¢åŠŸèƒ½é€šçŸ¥å…¶ä½™çš„ä»èŠ‚ç‚¹ï¼ˆslaveï¼‰æ›´æ”¹é…ç½®æ–‡ä»¶ï¼Œè·Ÿéšæ–°ä¸Šä»»çš„ä¸»æœåŠ¡å™¨ï¼ˆmasterï¼‰ã€‚è‡³æ­¤å°±å®Œæˆäº†ä¸»ä»åˆ‡æ¢çš„æ“ä½œã€‚</p><p>å¯¹ä¸Šå¯¹è¿°è¿‡ç¨‹åšç®€å•æ€»ç»“ï¼š</p><blockquote><p>Sentinel è´Ÿè´£ç›‘æ§ä¸»ä»èŠ‚ç‚¹çš„â€œå¥åº·â€çŠ¶æ€ã€‚å½“ä¸»èŠ‚ç‚¹æŒ‚æ‰æ—¶ï¼Œè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæœ€ä¼˜çš„ä»èŠ‚ç‚¹åˆ‡æ¢ä¸ºä¸»èŠ‚ç‚¹ã€‚å®¢æˆ·ç«¯æ¥è¿æ¥ Redis é›†ç¾¤æ—¶ï¼Œä¼šé¦–å…ˆè¿æ¥ Sentinelï¼Œé€šè¿‡ Sentinel æ¥æŸ¥è¯¢ä¸»èŠ‚ç‚¹çš„åœ°å€ï¼Œç„¶åå†å»è¿æ¥ä¸»èŠ‚ç‚¹è¿›è¡Œæ•°æ®äº¤äº’ã€‚å½“ä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œå®¢æˆ·ç«¯ä¼šé‡æ–°å‘ Sentinel è¦åœ°å€ï¼ŒSentinel ä¼šå°†æœ€æ–°çš„ä¸»èŠ‚ç‚¹åœ°å€å‘Šè¯‰å®¢æˆ·ç«¯ã€‚å› æ­¤åº”ç”¨ç¨‹åºæ— éœ€é‡å¯å³å¯è‡ªåŠ¨å®Œæˆä¸»ä»èŠ‚ç‚¹åˆ‡æ¢ã€‚</p></blockquote><h3 id="å“¨å…µçš„é…ç½®å’Œä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#å“¨å…µçš„é…ç½®å’Œä½¿ç”¨"><span>å“¨å…µçš„é…ç½®å’Œä½¿ç”¨</span></a></h3><blockquote><p>å“¨å…µSentinelçš„ä½¿ç”¨ï¼šé…ç½®å¯¹åº”çš„Sentinel.confæ–‡ä»¶ï¼Œç„¶åredis-sentinelæˆ–è€…redis-serverå‘½ä»¤å»å¯åŠ¨å³å¯</p></blockquote><p>ä¸‹é¢å¯¹ Sentinel é…ç½®æ–‡ä»¶çš„å…¶ä»–é…ç½®é¡¹åšç®€å•è¯´æ˜ï¼š</p><table><thead><tr><th>é…ç½®é¡¹</th><th>å‚æ•°ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>dir</td><td>æ–‡ä»¶ç›®å½•</td><td>å“¨å…µè¿›ç¨‹æœåŠ¡çš„æ–‡ä»¶å­˜æ”¾ç›®å½•ï¼Œé»˜è®¤ä¸º /tmpã€‚</td></tr><tr><td>port</td><td>ç«¯å£å·</td><td>å¯åŠ¨å“¨å…µçš„è¿›ç¨‹ç«¯å£å·ï¼Œé»˜è®¤ä¸º 26379ã€‚</td></tr><tr><td>sentinel down-after-milliseconds</td><td>&lt;æœåŠ¡åç§°&gt;&lt;æ¯«ç§’æ•°(æ•´æ•°)&gt;</td><td>åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…ï¼Œè‹¥ä¸»èŠ‚ç‚¹æ²¡æœ‰åº”ç­”å“¨å…µçš„ PING å‘½ä»¤ï¼Œæ­¤æ—¶å“¨å…µè®¤ä¸ºæœåŠ¡å™¨ä¸»è§‚ä¸‹çº¿ï¼Œé»˜è®¤æ—¶é—´ä¸º 30 ç§’ã€‚</td></tr><tr><td>sentinel parallel-syncs</td><td>&lt;æœåŠ¡åç§°&gt;&lt;æœåŠ¡å™¨æ•°(æ•´æ•°)&gt;</td><td>æŒ‡å®šå¯ä»¥æœ‰å¤šå°‘ä¸ª Redis æœåŠ¡åŒæ­¥æ–°çš„ä¸»æœºï¼Œä¸€èˆ¬è€Œè¨€ï¼Œè¿™ä¸ªæ•°å­—è¶Šå°åŒæ­¥æ—¶é—´è¶Šé•¿ï¼Œè€Œè¶Šå¤§ï¼Œåˆ™å¯¹ç½‘ç»œèµ„æºè¦æ±‚å°±è¶Šé«˜ã€‚</td></tr><tr><td>sentinel failover-timeout</td><td>&lt;æœåŠ¡åç§°&gt;&lt;æ¯«ç§’æ•°(æ•´æ•°)&gt;</td><td>æŒ‡å®šæ•…éšœè½¬ç§»å…è®¸çš„æ¯«ç§’æ•°ï¼Œè‹¥è¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œå°±è®¤ä¸ºæ•…éšœè½¬ç§»æ‰§è¡Œå¤±è´¥ï¼Œé»˜è®¤ä¸º 3 åˆ†é’Ÿã€‚</td></tr><tr><td>sentinel notification-script</td><td>&lt;æœåŠ¡åç§°&gt;&lt;è„šæœ¬è·¯å¾„&gt;</td><td>è„šæœ¬é€šçŸ¥ï¼Œé…ç½®å½“æŸä¸€äº‹ä»¶å‘ç”Ÿæ—¶æ‰€éœ€è¦æ‰§è¡Œçš„è„šæœ¬ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬æ¥é€šçŸ¥ç®¡ç†å‘˜ï¼Œä¾‹å¦‚å½“ç³»ç»Ÿè¿è¡Œä¸æ­£å¸¸æ—¶å‘é‚®ä»¶é€šçŸ¥ç›¸å…³äººå‘˜ã€‚</td></tr><tr><td>sentinel auth-pass &lt; master-name&gt; &lt; password&gt;</td><td>&lt;æœåŠ¡å™¨åç§°&gt;&lt;å¯†ç &gt;</td><td>è‹¥ä¸»æœåŠ¡å™¨è®¾ç½®äº†å¯†ç ï¼Œåˆ™å“¨å…µå¿…é¡»ä¹Ÿé…ç½®å¯†ç ï¼Œå¦åˆ™å“¨å…µæ— æ³•å¯¹ä¸»ä»æœåŠ¡å™¨è¿›è¡Œç›‘æ§ã€‚è¯¥å¯†ç ä¸ä¸»æœåŠ¡å™¨å¯†ç ç›¸åŒã€‚</td></tr><tr><td>sentinel monitor &lt; master-name&gt; &lt; ip&gt; &lt; redis-port&gt; &lt; quorum&gt;</td><td>&lt;æœåŠ¡å™¨åç§°&gt;&lt; ip&gt;&lt;æœåŠ¡ç«¯å£&gt;&lt;åˆ¤å®šäººæ•°&gt;</td><td>è®©sentinel ç›‘å¬ä¸»æœåŠ¡ï¼Œquorumæ˜¯å¤šå°‘ä¸ªsentinelç›‘å¬åˆ°å®•æœºæ‰åˆ¤å®šä¸ºå®•æœºè¿›è¡Œæ•…éšœè½¬ç§»ï¼ˆæ•°é‡æ ¹æ®sentinel æ•°é‡è®¾ç½®ï¼šä¸€èˆ¬æ˜¯sentinel æ•°/2 + 1ï¼‰</td></tr></tbody></table><h3 id="å“¨å…µæ¨¡å¼åº”ç”¨" tabindex="-1"><a class="header-anchor" href="#å“¨å…µæ¨¡å¼åº”ç”¨"><span>å“¨å…µæ¨¡å¼åº”ç”¨</span></a></h3><p>Redis Sentinel å“¨å…µæ¨¡å¼é€‚åˆäºåœ¨ Linux ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸‹é¢çš„åº”ç”¨éƒ½åŸºäº centoså®ç°ã€‚</p><h4 id="_1-æ­å»ºä¸»ä»æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_1-æ­å»ºä¸»ä»æ¨¡å¼"><span>1) æ­å»ºä¸»ä»æ¨¡å¼</span></a></h4><p>æ¥ä¸‹æ¥ï¼Œåœ¨æœ¬åœ°ç¯å¢ƒä½¿ç”¨ä¸»ä»æ¨¡å¼æ­å»ºä¸€ä¸ªæ‹¥æœ‰ä¸‰å°æœåŠ¡å™¨çš„ Redis é›†ç¾¤èŠ‚ç‚¹</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --daemonize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6300</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --slaveof</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --daemonize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6300</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --slaveof</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --daemonize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-å•ç‰ˆæœ¬é…ç½®sentinelå“¨å…µ" tabindex="-1"><a class="header-anchor" href="#_2-å•ç‰ˆæœ¬é…ç½®sentinelå“¨å…µ"><span>2ï¼‰å•ç‰ˆæœ¬é…ç½®sentinelå“¨å…µ</span></a></h4><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1.ç¼–å†™é…ç½®æ–‡ä»¶ï¼švim sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> monitor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> auth-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ä¸»èŠ‚ç‚¹å®•æœºä»¥åé€‰ä¸¾çš„é—´éš”æ—¶é—´10s å•ä½æ˜¯æ¯«ç§’</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> down-after-milliseconds</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Generated by CONFIG REWRITE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/www/redis-7.0.8&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">protected-mode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 26379</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">latency-tracking-info-percentiles</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 50</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 99</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 99.9</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">user</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nopass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ~</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">*</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;* +@all</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myid</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> c71c7cc530f5d800db6c78bc537c9a4764a7895f</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> config-epoch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> leader-epoch</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> current-epoch</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2. å¯åŠ¨å“¨å…µå³å¯</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é›†ç¾¤å°±æ­å»ºå¥½äº†ï¼Œç„¶åå°†masterç›´æ¥killæ‰ï¼Œè‡ªåŠ¨é€‰ä¸¾ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºmasterï¼Œä»æ–°å¯åŠ¨6379å°±ä¼šè‡ªåŠ¨ä½œä¸ºä»èŠ‚ç‚¹</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-é›†ç¾¤ç‰ˆæœ¬é…ç½®sentinelå“¨å…µ" tabindex="-1"><a class="header-anchor" href="#_3-é›†ç¾¤ç‰ˆæœ¬é…ç½®sentinelå“¨å…µ"><span>3) é›†ç¾¤ç‰ˆæœ¬é…ç½®sentinelå“¨å…µ</span></a></h4><p>é¦–å…ˆ<strong>æ–°å»º sentinel.conf æ–‡ä»¶</strong>ï¼Œå¹¶å¯¹å…¶è¿›è¡Œé…ç½®</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1.é…ç½®æ–‡ä»¶ï¼šsentinel26379.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> monitor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> auth-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ä¸»èŠ‚ç‚¹å®•æœºä»¥åé€‰ä¸¾çš„é—´éš”æ—¶é—´10s å•ä½æ˜¯æ¯«ç§’</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> down-after-milliseconds</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Generated by CONFIG REWRITE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/www/redis-7.0.8&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">protected-mode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 26379</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2.é…ç½®æ–‡ä»¶ï¼šsentinel26380.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> monitor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> auth-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ä¸»èŠ‚ç‚¹å®•æœºä»¥åé€‰ä¸¾çš„é—´éš”æ—¶é—´10s å•ä½æ˜¯æ¯«ç§’</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> down-after-milliseconds</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Generated by CONFIG REWRITE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/www/redis-7.0.8&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">protected-mode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 26380</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 3.é…ç½®æ–‡ä»¶ï¼šsentinel26381.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> monitor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 6379</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> auth-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ä¸»èŠ‚ç‚¹å®•æœºä»¥åé€‰ä¸¾çš„é—´éš”æ—¶é—´10s å•ä½æ˜¯æ¯«ç§’</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> down-after-milliseconds</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myredis</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># Generated by CONFIG REWRITE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/www/redis-7.0.8&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">protected-mode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 26381</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å¯åŠ¨å“¨å…µ</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">æ–¹å¼ä¸€:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-sentinel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sentinel.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">æ–¹å¼äºŒ:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sentinel.conf</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --sentinel</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_09ã€redisé›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_09ã€redisé›†ç¾¤"><span>09ã€Redisé›†ç¾¤</span></a></h2><p><strong>æœ‰å“¨å…µä¸ºå•¥è¿˜æœ‰é›†ç¾¤ï¼Ÿ</strong></p><p>ä¸Šé¢çš„è™½ç„¶æä¾›é«˜å¯ç”¨ï¼Œä½†æ˜¯è¿˜å­˜åœ¨å±€é™ï¼š<strong>æ²¡æœ‰è§£å†³æ•°æ®åˆ†ç‰‡ï¼Œå¯¼è‡´æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰å…¨éƒ¨çš„æ•°æ®ï¼Œè‹¥æ˜¯æ•°æ®é‡å¤§äº†å°±ä¼šå—é™äºå†…å®¹å®¹é‡ï¼Œè¿˜æœ‰å†™æ“ä½œéƒ½åœ¨ä¸»èŠ‚ç‚¹ä¸Šï¼Œå¾ˆå®¹æ˜“é€ æˆæ€§èƒ½ç“¶é¢ˆ</strong></p><p>è¿›é˜¶ç‰ˆçš„Clusterä¼˜åŠ¿ï¼šæ•°æ®è‡ªåŠ¨åˆ†ç‰‡ï¼Œ<strong>çªç ´å•æœºå†…å­˜é™åˆ¶</strong>ï¼›æ¯ä¸ªåˆ†ç‰‡æ˜¯ä¸»ä»ç»“æ„ï¼Œ<strong>æä¾›é«˜å¯ç”¨</strong>ï¼›å¤šä¸ªä¸»èŠ‚ç‚¹å¯åŒæ—¶å¤„ç†è¯»å†™ï¼Œ<strong>æå‡å†™æ€§èƒ½</strong>ï¼›å®¢æˆ·ç«¯å¯ä¸ä»»æ„èŠ‚ç‚¹é€šä¿¡ï¼Œ<strong>è‡ªåŠ¨è·¯ç”±åˆ°æ­£ç¡®çš„èŠ‚ç‚¹</strong>ã€‚</p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>Sentinelè§£å†³çš„æ˜¯å¯ç”¨æ€§é—®é¢˜(Available)</p><p>Clusterè§£å†³çš„æ˜¯æ‰©å±•æ€§é—®é¢˜(Scalable)</p><p>å…·ä½“é¡¹ç›®ä¸­é€‰æ‹©å“ªä¸ªï¼Œè¿˜æ˜¯éœ€è¦ç»“åˆå®é™…éœ€æ±‚é€‰æ‹©ã€‚å°é¡¹ç›®è¯»å¤šå†™å°‘Sentinelè¶³å¤Ÿï¼Œå¤§å‹é¡¹ç›®æœ‰å¤§é‡å†™å°±éœ€è¦Clusterã€‚ä¸è¦è¿‡åº¦è®¾è®¡ï¼ï¼ï¼</p></div><br><h3 id="åŸç†-1" tabindex="-1"><a class="header-anchor" href="#åŸç†-1"><span>åŸç†</span></a></h3><p>Redisé›†ç¾¤æ˜¯ä¸€ä¸ªç”±å¤šä¸ªä¸»ä»èŠ‚ç‚¹ç»„æˆçš„åˆ†å¸ƒå¼æœåŠ¡å™¨ç¾¤ï¼Œå®ƒå…·æœ‰å¤åˆ¶ï¼Œé«˜å¯ç”¨å’Œåˆ†ç‰‡ç‰¹æ€§ã€‚Redisçš„é›†ç¾¤å°†æ‰€æœ‰çš„æ•°æ®å­˜å‚¨åŒºåŸŸåˆ’åˆ†ä¸º<strong>16384ä¸ªæ§½ï¼ˆslotï¼‰</strong>ã€‚æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†æ§½ã€‚æ§½çš„ä¿¡æ¯å­˜å‚¨äºæ¯ä¸ªèŠ‚ç‚¹ä¸­ã€‚Redisé›†ç¾¤è¦å°†æ¯ä¸ªèŠ‚ç‚¹è®¾ç½®æˆé›†ç¾¤æ¨¡å¼ï¼Œå®ƒæ²¡æœ‰ä¸­å¿ƒèŠ‚ç‚¹çš„æ¦‚å¿µï¼Œå¯ä»¥æ°´å¹³æ‰©å±•ï¼Œå®ƒçš„æ€§èƒ½å’Œé«˜å¯ç”¨ç”¨æ€§å‡ä¼˜è¶Šäºä¸»ä»æ¨¡å¼å’Œå“¨å…µæ¨¡å¼ã€‚è€Œä¸”é›†ç¾¤é…ç½®éå¸¸ç®€å•ã€‚å¦‚ä¸‹å›¾ï¼š</p><figure><img src="https://gavvy-cloud.oss-cn-shenzhen.aliyuncs.com/web/Redis_cluster.png" alt="cluster" tabindex="0" loading="lazy"><figcaption>cluster</figcaption></figure><p><strong>ç‰¹ç‚¹</strong></p><ol><li><strong>æ•°æ®åˆ†ç‰‡ï¼ˆShardingï¼‰</strong>: Redis é›†ç¾¤é‡‡ç”¨ <strong>å“ˆå¸Œæ§½ï¼ˆhash slotï¼‰</strong> æ¥åˆ’åˆ†æ•°æ®ã€‚æ€»å…±æœ‰ 16384 ä¸ªå“ˆå¸Œæ§½ï¼Œæ•°æ®æ ¹æ®é”®çš„å“ˆå¸Œå€¼æ˜ å°„åˆ°ä¸åŒçš„æ§½ä¸­ã€‚æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ç®¡ç†è‹¥å¹²ä¸ªå“ˆå¸Œæ§½ï¼Œå› æ­¤æ¯ä¸ªèŠ‚ç‚¹åªå¤„ç†éƒ¨åˆ†æ•°æ®ã€‚</li><li><strong>é«˜å¯ç”¨æ€§</strong>: Redis é›†ç¾¤æ”¯æŒæ¯ä¸ªä¸»èŠ‚ç‚¹æœ‰å¤šä¸ªå‰¯æœ¬ï¼ˆReplicaï¼‰ã€‚å½“ä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œé›†ç¾¤ä¼šè‡ªåŠ¨å°†å‰¯æœ¬æå‡ä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ï¼Œä»è€Œä¿è¯æœåŠ¡çš„æŒç»­å¯ç”¨ã€‚</li><li><strong>æ— ä¸­å¿ƒåŒ–ç®¡ç†</strong>: Redis é›†ç¾¤æ²¡æœ‰å•ç‚¹æ•…éšœçš„ä¸­å¿ƒèŠ‚ç‚¹ï¼Œè€Œæ˜¯é€šè¿‡æ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´ç›¸äº’é€šä¿¡æ¥ç®¡ç†é›†ç¾¤çš„çŠ¶æ€ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½çŸ¥é“é›†ç¾¤çš„æ‹“æ‰‘ç»“æ„ï¼Œå¯ä»¥ç‹¬ç«‹å¤„ç†è¯·æ±‚ã€‚</li><li><strong>è‡ªåŠ¨æ•…éšœè½¬ç§»</strong>: å¦‚æœæŸä¸ªä¸»èŠ‚ç‚¹å¤±è´¥ï¼Œé›†ç¾¤ä¼šè‡ªåŠ¨å°†å…¶å‰¯æœ¬æå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œç¡®ä¿æ•°æ®çš„å¯ç”¨æ€§ï¼Œé¿å…æ•°æ®ä¸¢å¤±ã€‚</li><li><strong>å®¢æˆ·ç«¯æ”¯æŒ</strong>: ä¸ºäº†ä¿è¯ Redis é›†ç¾¤çš„æ­£å¸¸è¿è¡Œï¼Œå®¢æˆ·ç«¯éœ€è¦èƒ½å¤Ÿè¯†åˆ«èŠ‚ç‚¹ä¹‹é—´çš„åˆ†å¸ƒï¼Œå¹¶æ­£ç¡®åœ°å‘é€è¯·æ±‚ã€‚æ”¯æŒ Redis é›†ç¾¤çš„å®¢æˆ·ç«¯é€šå¸¸ä¼šæ ¹æ®é”®çš„å“ˆå¸Œå€¼æ¥åˆ¤æ–­è¯·æ±‚åº”å‘é€åˆ°å“ªä¸ªèŠ‚ç‚¹ã€‚</li></ol><p><strong>æ¶æ„</strong></p><p>Redis é›†ç¾¤æ˜¯ç”±è‹¥å¹²ä¸ª <strong>ä¸»èŠ‚ç‚¹ï¼ˆmaster nodeï¼‰</strong> å’Œ <strong>å‰¯æœ¬èŠ‚ç‚¹ï¼ˆreplica nodeï¼‰</strong> ç»„æˆçš„ï¼ŒèŠ‚ç‚¹ä¹‹é—´é€šè¿‡ Gossip åè®®ä¿æŒé›†ç¾¤çŠ¶æ€çš„ä¸€è‡´æ€§ã€‚</p><ul><li><strong>ä¸»èŠ‚ç‚¹</strong>ï¼šæ¯ä¸ªä¸»èŠ‚ç‚¹è´Ÿè´£è‹¥å¹²ä¸ªå“ˆå¸Œæ§½ï¼Œå¹¶ä¸”å­˜å‚¨ä¸€éƒ¨åˆ†æ•°æ®ã€‚</li><li><strong>å‰¯æœ¬èŠ‚ç‚¹</strong>ï¼šæ¯ä¸ªå‰¯æœ¬èŠ‚ç‚¹æ˜¯æŸä¸ªä¸»èŠ‚ç‚¹çš„å‰¯æœ¬ï¼Œè´Ÿè´£å¤‡ä»½ä¸»èŠ‚ç‚¹çš„æ•°æ®ã€‚å½“ä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œå‰¯æœ¬èŠ‚ç‚¹ä¼šè¢«æå‡ä¸ºä¸»èŠ‚ç‚¹ã€‚</li></ul><h3 id="ç»„æˆ" tabindex="-1"><a class="header-anchor" href="#ç»„æˆ"><span>ç»„æˆ</span></a></h3><p><strong>ä¸»èŠ‚ç‚¹</strong>ï¼ˆMasterï¼‰ï¼šæ¯ä¸ªä¸»èŠ‚ç‚¹è´Ÿè´£å­˜å‚¨ä¸€å®šæ•°é‡çš„å“ˆå¸Œæ§½å’Œæ•°æ®ã€‚</p><p><strong>å‰¯æœ¬èŠ‚ç‚¹</strong>ï¼ˆReplicaï¼‰ï¼šå‰¯æœ¬èŠ‚ç‚¹æ˜¯ä¸»èŠ‚ç‚¹çš„å¤åˆ¶å“ï¼Œç”¨äºæä¾›æ•°æ®çš„é«˜å¯ç”¨æ€§ã€‚å½“ä¸»èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼Œå‰¯æœ¬èŠ‚ç‚¹ä¼šæ¥ç®¡å…¶ä»»åŠ¡ï¼Œä¿è¯æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</p><p><strong>æ§½ï¼ˆSlotï¼‰</strong>ï¼šRedis é›†ç¾¤çš„å“ˆå¸Œæ§½æ˜¯æ•°æ®åˆ†å¸ƒçš„åŸºç¡€ã€‚æ•´ä¸ªé›†ç¾¤åŒ…å« 16384 ä¸ªå“ˆå¸Œæ§½ï¼Œæ¯ä¸ªä¸»èŠ‚ç‚¹ç®¡ç†å…¶ä¸­çš„ä¸€éƒ¨åˆ†æ§½ã€‚</p><h3 id="éƒ¨ç½²é›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²é›†ç¾¤"><span>éƒ¨ç½²é›†ç¾¤</span></a></h3><h4 id="_1-ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-ç¯å¢ƒå‡†å¤‡"><span>1ï¼‰ç¯å¢ƒå‡†å¤‡</span></a></h4><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><ul><li>ä¸»èŠ‚ç‚¹è‡³å°‘è¦æœ‰3ä¸ª</li><li>ä¸»èŠ‚ç‚¹ä¸èƒ½å°‘äºæ€»èŠ‚ç‚¹çš„ä¸€åŠ</li></ul></div><p>è™šæ‹Ÿæœºæˆ–è€…æœåŠ¡å™¨ï¼ˆlinuxæ“ä½œç³»ç»Ÿï¼‰ï¼šå®‰è£…å¥½redis</p><p>ç›®æ ‡ï¼š6ä¸ªèŠ‚ç‚¹æ„å»ºä¸‰ä¸»ä¸‰ä»çš„é›†ç¾¤</p><h4 id="_2-å•æœºé›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_2-å•æœºé›†ç¾¤"><span>2ï¼‰å•æœºé›†ç¾¤</span></a></h4><blockquote><p>IPï¼š124.220.6.62</p><p>redisçš„ç‰ˆæœ¬ï¼š7.0.8</p><p>éƒ¨ç½²é›†ç¾¤çš„ç«¯å£ï¼š8001ã€8002ã€8003ã€8004ã€8005ã€8006</p></blockquote><p>å…·ä½“æ­¥éª¤ï¼š</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1.å¤åˆ¶5ä»½redis.confæ–‡ä»¶-------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /cluster</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /cluster</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8001</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8002</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8003</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8004</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8005</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8006</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8001/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8002/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8003/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8004/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis.conf</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8005/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cp</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8006/redis.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2.è®¾ç½®å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼ˆä»¥8001ä¸ºä¾‹ï¼‰----------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘  ä¿æŠ¤æ¨¡å¼å¯åŠ¨</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">daemonize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘¡ ä¿®æ”¹ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">port</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8001</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘¢ ä¿®æ”¹æ•°æ®å­˜å‚¨çš„ç›®å½•ï¼Œè¿™é‡Œå¿…é¡»è¦æŒ‡å®šä¸åŒçš„ç›®å½•ä½ç½®ï¼Œå¦åˆ™ä¼šé€ æˆæ•°æ®çš„ä¸¢å¤±</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">dir</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8001</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘£ å¼€å¯é›†ç¾¤æ¨¡å¼</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster-enabled</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘¤ é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯æ–‡ä»¶ï¼Œè¿™é‡Œæœ€å¥½å’Œç«¯å£ä¿æŒä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster-config-file</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes-8001.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘¥ é›†ç¾¤èŠ‚ç‚¹çš„è¶…æ—¶æ—¶é™ï¼Œå•ä½æ˜¯æ¯«ç§’</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster-node-timeout</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 10000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘¦ ä¿®æ”¹ä¸ºä¸»è®²çš„ipåœ°å€ï¼Œé»˜è®¤åœ°å€æ˜¯ï¼š127.0.0.1ï¼Œéœ€è¦ä¿®æ”¹æˆå…¶ä»–èŠ‚ç‚¹è®¡ç®—æœºå¯ä»¥è®¿é—®çš„ipåœ°å€ï¼Œå¦åˆ™åˆ›å»ºé›†ç¾¤çš„æ—¶å€™æ— æ³•è®¿é—®å¯¹åº”èŠ‚å•æœºçš„ç«¯å£ï¼Œæ— æ³•åˆ›å»ºé›†ç¾¤ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æœ¬æœºå»ºè®®è®¾ç½®ï¼š æœ¬æœºip</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¦‚æœæ˜¯å¤šæœºè®¾ç½®ï¼šé˜¿é‡Œäº‘çš„å†…ç½‘IPæˆ–è€…æ³¨é‡Šæ‰æˆ–è€…bind:0.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">bind</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0.0.0.0</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘§ å—ä¿æŠ¤çš„æ¨¡å¼ï¼Œå…³é—­ï¼Œå¦åˆ™ä¹Ÿä¼šé€ æˆé›†ç¾¤æ²¡åŠæ³•åˆ›å»ºæˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">protected-mode</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘¨ å¼€å¯aofçš„æ•°æ®æŒä¹…åŒ–</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">appendonly</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘© aofæŒä¹…åŒ–çš„æ–‡ä»¶å</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">appendfilename</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;appendonly8001.aof&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘ª aofæ”¾æ–‡ä»¶æ‰€æ”¾çš„ä½ç½®ï¼Œå®ƒæ˜¯å’Œdirä¸€èµ·æ‹¼æ¥å½¢æˆï¼Œæ¯”å¦‚ï¼š/www/redis-7.0.8/cluster/8001/aof/appendonly8001.aof</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">appenddirname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;aof&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘« å½“å‰æœåŠ¡èŠ‚ç‚¹çš„å¯†ç </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">requirepass</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># â‘¬ å¦‚æœè‡ªèº«ä½œä¸ºä»èŠ‚ç‚¹ä»¥åï¼Œå¦‚æœé“¾æ¥masterèŠ‚ç‚¹æœ‰å¯†ç ï¼Œä¸€å®šè¦é…ç½®ï¼Œå»ºè®®è®¾ç½®å¯†ç çš„æ—¶å€™éƒ½ä¿æŒä¸€è‡´</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">masterauth</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 3.åˆ†åˆ«å¯åŠ¨è¿™6ä¸ªèŠ‚ç‚¹ ----------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8001/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8002/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8003/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8004/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8005/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /www/redis-7.0.8/cluster/8006/redis.conf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 4.æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸ  -----------------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ps</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ef</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  redis</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 5.ç”¨redis-cliåˆ›å»ºredisé›†ç¾¤----------------------------------------------------</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-cli</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --cluster</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> create</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --cluster-replicas</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8001</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  127.0.0.1:8002</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8003</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8004</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8005</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8006</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># --cluster-replicas 1 æ•°å­—è¡¨ç¤ºå¤šå°‘ä¸ªä»èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># -a æ¯ä¸ªèŠ‚ç‚¹çš„å¯†ç </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 6.è¿›å…¥ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¯æŸ¥çœ‹ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-cli -c -h 127.0.0.1 -p 8001 </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; auth mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cluster info   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#æŸ¥çœ‹é›†ç¾¤çŠ¶æ€</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster_state:ok</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">             # çŠ¶æ€æ­£å¸¸</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster_slots_assigned:16384</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster_slots_ok:16384</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster_slots_pfail:0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster_slots_fail:0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster_known_nodes:6</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">        # èŠ‚ç‚¹æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cluster_size:3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cluster nodes   </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">d88b17b0abb2a82dc4350e93abaebe0353228df2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8004@18004</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slave</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 6192b1d7512ec3fd4bd880cc455a47da54f4feca</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675915939398</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6192b1d7512ec3fd4bd880cc455a47da54f4feca</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8002@18002</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675915938000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 5461-10922</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ã€‚ã€‚ã€‚</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># èŠ‚ç‚¹å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># è‹¥æ˜¯è¦å…³é—­èŠ‚ç‚¹ï¼Œä½¿ç”¨å‘½ä»¤ï¼š</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">redis-cli</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -c</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -h</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 127.0.0.1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -p</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 8001</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mkxiaoer</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shutdown</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢çš„æ“ä½œæ­£å¸¸éƒ½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›æ“ä½œæ¯”å¦‚ï¼šæ–°å¢ä¸»/ä»èŠ‚ç‚¹ã€åˆ é™¤ä¸»/ä»èŠ‚ç‚¹ï¼ˆä¼šæ¶‰åŠåˆ°hashæ§½çš„åˆ†é…ï¼‰</p><p><strong>1.æ–°å¢ä¸»èŠ‚ç‚¹</strong>ï¼ˆåŠ å…¥é›†ç¾¤ï¼Œè¿˜è¦é‡æ–°åˆ†é…æ§½ï¼‰</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># åˆ›å»ºä¸€ä¸ªredis8007çš„ä¸»èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cp redis.conf /www/redis-7.0.8/cluster/8007/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¯åŠ¨ä¸»èŠ‚ç‚¹8007</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-server /www/redis-7.0.8/cluster/8007/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é€šè¿‡add-nodeå‘½ä»¤å¢åŠ é›†ç¾¤èŠ‚ç‚¹ï¼Œè¿™é‡Œ8001åšä¸ªé™ªè¡¬ï¼Œä½ å¯ä»¥åœ¨é›†ç¾¤ä¸­éšä¾¿æ‰¾ä¸ªå…¶ä»–çš„ä¹Ÿæ˜¯å¯ä»¥çš„</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-cli --cluster add-node 127.0.0.1:8007 127.0.0.1:8001 -a mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-cli -p 8001</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; auth mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cluster info</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ‰‹åŠ¨ä¸ºä¸»èŠ‚ç‚¹åˆ†é…hashæ§½</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-cli --cluster reshard 127.0.0.1:8007 -a mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ç»™ä¸»èŠ‚ç‚¹8007åˆ†é…å¤šå°‘ä¸ªæ§½ä½ï¼Œè¿™é‡Œè®¾å®šæ˜¯1000</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; How many slots </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">do</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> want</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> move</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (from </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 16384</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)? 1000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ç»™8007å¼€å§‹è¿›è¡Œè®¾å®šæ“ä½œ,è¿™é‡Œçš„idæ˜¯8007çš„master d0b678984c3c6f06b6c4510694d76b8381a45762</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; What is the receiving node ID? d0b678984c3c6f06b6c4510694d76b8381a45762</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; Please enter all the source node IDs.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;all&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slots.</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # all.ä»£è¡¨å°†å…¨éƒ¨é‡æ–°åˆ†é…çš„hashæ§½ä½</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;done&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> once</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> entered</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IDs.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #1: all</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># è¾“å…¥yeså¼€å§‹è¿›è¡Œé‡æ–°åˆ†é…hashæ§½ï¼Œç„¶åå°±ä¼šè‡ªåŠ¨å»è°ƒæ•´å’Œé‡æ–°åˆ†é…æ§½ä½</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; Do you want to proceed with the proposed reshard plan (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yes/no</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)?  yes</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹æ˜¯å¦åˆ†é…æˆåŠŸ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-cli -p 8007</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; auth mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cluster info</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cluster nodes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">d88b17b0abb2a82dc4350e93abaebe0353228df2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8004@18004</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slave</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 6192b1d7512ec3fd4bd880cc455a47da54f4feca</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923474000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6d555d82e36280900e8de704896e4b3846465655</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8001@18001</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myself,master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923474000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 666-5460</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">41f8ccda22abebaa726191b765c88eae00cd3655</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8006@18006</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slave</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 6d555d82e36280900e8de704896e4b3846465655</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923474000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6192b1d7512ec3fd4bd880cc455a47da54f4feca</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8002@18002</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923474095</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 6129-10922</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">d45cce869590400ad7dbda32a825ab0741d0e41e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8005@18005</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slave</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> e1df9acf919b9234611883d093a7ff4b687a9dee</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923473000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">e1df9acf919b9234611883d093a7ff4b687a9dee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8003@18003</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923476100</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 11589-16383</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aced14e6f490ca573bed0042f185ce22298d6a9d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8007@18007</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923475097</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0-665</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 5461-6128</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10923-11588</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>2. æ–°å¢Redisçš„ä»èŠ‚ç‚¹</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å…ˆæ·»åŠ ä¸€ä¸ªä»èŠ‚ç‚¹8008</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cp redis.conf /www/redis-7.0.8/cluster/8008/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¯åŠ¨ä»èŠ‚ç‚¹8008</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-server /www/redis-7.0.8/cluster/8008/redis.conf</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŠŠä»èŠ‚ç‚¹8008åŠ å…¥åˆ°é›†ç¾¤ä¸­</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-cli --cluster add-node 127.0.0.1:8008 127.0.0.1:8001 -a mkxiaoer</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹çš„ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-cli -p 8008</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯ï¼Œå¯ä»¥å¾—åˆ°ç°åœ¨8008å’Œ8007è¿˜æ²¡å…³ç³»</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cluster nodes</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å¼€å§‹ç»‘å®š8008å’Œ8007å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æŠŠ8008å˜æˆ8007çš„ä»èŠ‚ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ç»‘å®šçš„å‘½ä»¤æ˜¯  CLUSTER REPLICATE  id (ä¸»èŠ‚ç‚¹çš„id 8007)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æ‰§è¡Œè¿™ä¸ªå‘½ä»¤å¿…é¡»è¿›å…¥åˆ°8008çš„å®¢æˆ·ç«¯ä¸­å»æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; CLUSTER REPLICATE d0b678984c3c6f06b6c4510694d76b8381a45762</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ä¿¡æ¯å³å¯ã€‚</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; cluster nodes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">d45cce869590400ad7dbda32a825ab0741d0e41e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8005@18005</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slave</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> e1df9acf919b9234611883d093a7ff4b687a9dee</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923789000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">aced14e6f490ca573bed0042f185ce22298d6a9d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8007@18007</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923789879</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 0-665</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 5461-6128</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 10923-11588</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6192b1d7512ec3fd4bd880cc455a47da54f4feca</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8002@18002</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923787876</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 6129-10922</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">6d555d82e36280900e8de704896e4b3846465655</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8001@18001</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923790881</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 666-5460</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">d88b17b0abb2a82dc4350e93abaebe0353228df2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8004@18004</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slave</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 6192b1d7512ec3fd4bd880cc455a47da54f4feca</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923791883</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">64ab4eb42ae02de188270c114d41d83006122a91</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8008@18008</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> myself,slave</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aced14e6f490ca573bed0042f185ce22298d6a9d</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923791000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">e1df9acf919b9234611883d093a7ff4b687a9dee</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8003@18003</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> master</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923791000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 11589-16383</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">41f8ccda22abebaa726191b765c88eae00cd3655</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 127.0.0.1:8006@18006</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slave</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 6d555d82e36280900e8de704896e4b3846465655</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1675923790000</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> connected</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.åˆ é™¤ä»èŠ‚ç‚¹8008</strong></p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; redis-cli --cluster del-node 127.0.0.1:8008 bf396950d13769ba4fd4bc5bf4ce7185d24b27e5 -a mkxiaoer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><strong>4.åˆ é™¤ä¸»èŠ‚ç‚¹</strong>ï¼ˆå…ˆç§»é™¤æ•°æ®ï¼Œå†åˆ é™¤ä¸»èŠ‚ç‚¹ï¼‰</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" data-title="sh" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># é‡æ–°æŠŠ8007çš„å ç”¨hashæ§½è¿›è¡Œé‡Šæ”¾æˆ–è€…è¯´æŠŠæ•°æ®è¿›è¡Œè¿ç§»ï¼Œç„¶ååœ¨åˆ é™¤</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;  redis-cli --cluster reshard 127.0.0.1:8007 -a mkxiaoer --cluster-from d0b678984c3c6f06b6c4510694d76b8381a45762</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">How</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> many</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slots</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> do</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> want</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> move</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (from </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 16384</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)? 1000</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># aced14e6f490ca573bed0042f185ce22298d6a9dè¿™é‡Œçš„idæ˜¯åˆ«çš„masterid</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">What</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> receiving</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ID?</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> aced14e6f490ca573bed0042f185ce22298d6a9d</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Please</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> enter</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IDs.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;all&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> use</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> as</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hash</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> slots.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;done&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> once</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> entered</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> all</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> nodes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> IDs.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Source</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> node</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #1: all</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; Do you want to proceed with the proposed reshard plan (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yes/no</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)?  yes</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt; ç„¶åå°±ä¼šè‡ªåŠ¨å»è°ƒæ•´å’Œé‡æ–°åˆ†é…æ§½ä½</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># å®Œæ•´å†™æ³•,å¯ä»¥å–ä»£ä¸Šé¢çš„æ­¥éª¤</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#&gt;redis-cli --cluster reshard 192.168.116.175:8007 --cluster-from d0b678984c3c6f06b6c4510694d76b8381a45762 --cluster-to 60e3755761c9cbdacb183f59e3d6205da5335e86 --cluster-slots 1000 --cluster-yes</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># ç„¶ååœ¨æ‰§è¡Œåˆ é™¤å³å¯</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&gt;  redis-cli --cluster del-node 127.0.0.1:8007 d0b678984c3c6f06b6c4510694d76b8381a45762 -a mkxiaoer</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-å¤šæœºé›†ç¾¤" tabindex="-1"><a class="header-anchor" href="#_3-å¤šæœºé›†ç¾¤"><span>3ï¼‰å¤šæœºé›†ç¾¤</span></a></h4><blockquote><p>å•æœºé›†ç¾¤ï¼šåŒä¸€ä¸ªipï¼Œåªèƒ½ä½¿ç”¨ä¸åŒçš„ç«¯å£éš”ç¦»</p><p>å¤šæœºé›†ç¾¤ï¼šæœ‰ä¸åŒçš„ipäº†ï¼Œç«¯å£å°±å¯ä»¥ä¸€æ ·äº†</p><p>ä¸¤è€…é…ç½®å°±è¿™ä¸ªåŒºåˆ«ï¼Œä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯å¤šè®¡éƒ¨ç½²</p></blockquote><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“"><span>æ€»ç»“</span></a></h2><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>è¿™é‡Œå‚è€ƒä¸€ä¸‹å°ç™½Debugçš„æ€è·¯æ¥æ‹ä¸€éRedis</p></div><p>é—®ï¼š</p><p>ä¸€ä¸ªå•†å“æœåŠ¡ï¼Œå¯¹å¤–å¯æä¾›æ¯ç§’10Kæ¬¡æŸ¥è¯¢ï¼Œè€Œæ•°æ®åº“åªèƒ½æä¾›æ¯ç§’5Kæ¬¡æŸ¥è¯¢ï¼Œä¸Šçº¿MySQLä¼šç›´æ¥å´©æºƒï¼Œæ¯”å¦‚ç§’æ€æ´»åŠ¨å•¥çš„ï¼Œæ€ä¹ˆæ ·æ‰èƒ½è®©MySQLä¸è¢«å‹å—çš„åŒæ—¶å•†å“æœåŠ¡åˆèƒ½æ”¯æŒæ¯ç§’10Kæ¬¡æŸ¥è¯¢å‘¢ï¼Ÿ</p><p>è§£ï¼š</p><p>åŠ ä¸€ä¸ªä¸­é—´å±‚ï¼šå°†æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­å»æ¥æŠµæŒ¡å¤§éƒ¨åˆ†çš„æŸ¥è¯¢è¯·æ±‚</p><h2 id="ä¼˜åŒ–" tabindex="-1"><a class="header-anchor" href="#ä¼˜åŒ–"><span>ä¼˜åŒ–</span></a></h2><p>æ•°æ®ä¸ä¸€è‡´é—®é¢˜æ€ä¹ˆå¤„ç†ï¼Ÿ</p><!--[--><div class="mermaid-actions"><button class="preview-button" title="preview"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1316 1024" fill="currentColor"><path d="M658.286 0C415.89 0 0 297.106 0 512c0 214.82 415.89 512 658.286 512 242.322 0 658.285-294.839 658.285-512S900.608 0 658.286 0zm0 877.714c-161.573 0-512-221.769-512-365.714 0-144.018 350.427-365.714 512-365.714 161.572 0 512 217.16 512 365.714s-350.428 365.714-512 365.714z"/><path d="M658.286 292.571a219.429 219.429 0 1 0 0 438.858 219.429 219.429 0 0 0 0-438.858zm0 292.572a73.143 73.143 0 1 1 0-146.286 73.143 73.143 0 0 1 0 146.286z"/></svg></button><button class="download-button" title="download"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" fill="currentColor"><path d="M828.976 894.125H190.189c-70.55 0-127.754-57.185-127.754-127.753V606.674c0-17.634 14.31-31.933 31.933-31.933h63.889c17.634 0 31.932 14.299 31.932 31.933v95.822c0 35.282 28.596 63.877 63.877 63.877h511.033c35.281 0 63.877-28.595 63.877-63.877v-95.822c0-17.634 14.298-31.933 31.943-31.933h63.878c17.635 0 31.933 14.299 31.933 31.933v159.7c0 70.566-57.191 127.751-127.754 127.751zM249.939 267.51c12.921-12.92 33.885-12.92 46.807 0l148.97 148.972V94.893c0-17.634 14.302-31.947 31.934-31.947h63.876c17.638 0 31.946 14.313 31.946 31.947v321.589l148.97-148.972c12.922-12.92 33.876-12.92 46.797 0l46.814 46.818c12.922 12.922 12.922 33.874 0 46.807L552.261 624.93c-1.14 1.138-21.664 13.684-42.315 13.693-20.877.01-41.88-12.542-43.021-13.693L203.122 361.135c-12.923-12.934-12.923-33.885 0-46.807l46.817-46.818z"/></svg></button></div><div class="mermaid-wrapper"><div class="loading-icon-wrapper mermaid-loading" style="display:flex;align-items:center;justify-content:center;height:96px;"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><blockquote><p>ä¸Šé¢è¿™ä¸ªæ—¶åºå›¾ä¸­ï¼ŒæœåŠ¡1å› ä¸ºç½‘ç»œå»¶è¿Ÿé€ æˆå°†rediså·²ç»ç¼“å­˜äº†æ–°çš„æ•°æ®è¦†ç›–äº†æ—§æ•°æ®ï¼Œå¯¼è‡´redisæ•°æ®å’Œæ•°æ®åº“æ•°æ®ä¸ä¸€è‡´</p></blockquote><p>å¯¹äºè¿™ç§ç¼“å­˜ç®¡ç†ï¼Œä¸€èˆ¬åšæ³•æ˜¯åœ¨å†™å®Œæ•°æ®åº“åï¼Œåˆ é™¤æˆ–æ›´æ–°ç¼“å­˜æ•°æ®ã€‚è™½ç„¶æ˜¯ä¸¤ä¸ªæ­¥éª¤éåŸå­æ“ä½œå¯èƒ½ä¼šå­˜åœ¨æ—¶é—´è¯¯å·®ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶é—´å·®å¾ˆå°ï¼Œå½±å“å¹¶ä¸å¤§ã€‚æ­£å¸¸æƒ…å†µä¸‹æ˜¯å¯ä»¥ã€‚å…³é”®æ˜¯éœ€è¦è€ƒè™‘å…¶ä¸­ç¼“å­˜æœåŠ¡crashæ‰äº†ï¼Œå°±æ˜¯æ•°æ®åº“å†™å…¥æ“ä½œäº†ï¼Œä½†æ˜¯å‡†å¤‡å†™å…¥ç¼“å­˜æ—¶ç¼“å­˜æŒ‚äº†ï¼Œä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´é—®é¢˜</p><p>æ–¹æ¡ˆä¸€ï¼šè®¾ç½®è¾ƒçŸ­çš„ç¼“å­˜æ—¶é—´</p><p>ç¼“å­˜å°†æ•°æ®è¿‡æœŸæ—¶é—´è®¾ç½®ä¸€ä¸ªæ¯”è¾ƒçŸ­çš„äº‹ä»¶ï¼Œæ¯”å¦‚è®¾å®šä¸€åˆ†é’Ÿï¼Œç„¶åæ¯åˆ†é’Ÿå»ç”Ÿæˆéœ€è¦è¢«æŸ¥è¯¢çš„ç¼“å­˜æ•°æ®ã€‚</p><p>å®ç°ç®€å•ï¼Œä½†æ˜¯å¹¶å‘é‡é«˜çš„æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°å¤§é‡æ•°æ®ä¸ä¸€è‡´</p><p>æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæˆ–è€…è®¢é˜…binlogï¼‰</p><p>å¹¶å‘é‡é«˜è€Œä¸”å¯¹äºæ•°æ®ä¸€è‡´æ€§è¦æ±‚é«˜ï¼Œå°±å¯ä»¥åœ¨ä¿®æ”¹å®Œæ•°æ®åº“ï¼Œå‘ç”Ÿä¸€æ¡æ›´æ–°ç¼“å­˜çš„æ¶ˆæ¯ï¼Œåœ¨æ¶ˆè´¹ç«¯å°†è·å–åˆ°çš„æ¶ˆæ¯å°†ç¼“å­˜æ•°æ®æ›´æ–°</p><p>å¯ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œä½†æ˜¯æ¡†æ¶ä¼šå˜ç¬¨é‡ï¼Œéœ€è¦å¦å¤–ç»´æŠ¤ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—</p><p>æ–¹æ¡ˆä¸‰ï¼šdtm äºŒé˜¶æ®µæ¶ˆæ¯</p><p>DTMï¼ˆDistributed Transaction Managerï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ç®¡ç†å™¨ï¼‰æ˜¯ä¸€ç§ç”¨äºå¤„ç†åˆ†å¸ƒå¼äº‹åŠ¡çš„å·¥å…·ï¼ŒDTMä¼šå°†å¤æ‚ä¸šåŠ¡è¿›è¡Œæ‹†åˆ†å¤šä¸ªç‹¬ç«‹çš„æ­¥éª¤ï¼Œæ¯ä¸€ä¸ªæ­¥éª¤é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æ¥åè°ƒï¼Œç¡®ä¿è¦ä¹ˆå…¨éƒ¨æˆåŠŸè¦ä¹ˆå…¨éƒ¨å¤±è´¥</p></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Cospk/edit/main/src/middleware/æ•°æ®åº“/Redis.md" aria-label="åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/3/18 03:55:25</span></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: xie18115@gmail.com">xiaoxie01</span>,<!--]--><!--[--><span class="vp-meta-info" title="email: xie18115@outlook.com">xiaoxie001</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL%E9%AB%98%E7%BA%A7.html" aria-label="MySQLé«˜çº§"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->MySQLé«˜çº§</div></a><a class="route-link auto-link next" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis-Go.html" aria-label="Redis - Go"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">Redis - Go<!----></div></a></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">é»˜è®¤é¡µè„š</div><div class="vp-copyright">Copyright Â© 2025 xiaoxie </div></footer></div><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/vuepress-app/assets/app-CG6bgqhH.js" defer></script>
  </body>
</html>
