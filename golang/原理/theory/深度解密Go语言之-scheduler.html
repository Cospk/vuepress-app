<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.66" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://Cospk.github.io/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%AF%86Go%E8%AF%AD%E8%A8%80%E4%B9%8B-scheduler.html"><meta property="og:site_name" content="Golang全栈指南"><meta property="og:title" content="深度解密Go语言之 scheduler"><meta property="og:description" content="好久不见，你还好吗？距离上一篇文章已经过去了一个多月了，迟迟未更新文章，我也很着急啊。 跟大家汇报一下，这段时间我在看 proc.go 的源码，其实就是调度器的源码。代码有几千行之多，不像以往的 map，channel 等等。想把这些代码都看明白，是一个庞大的工程。到今天为止，我也不敢说我都看明白了。 要深挖下去的话，会无穷无尽，所以阶段性的探索就到这..."><meta property="og:type" content="article"><meta property="og:image" content="https://static.studygolang.com/190902/4eed86fd1edd43bcffad9201517dfe91.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-08-27T12:02:38.000Z"><meta property="article:modified_time" content="2025-08-27T12:02:38.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"深度解密Go语言之 scheduler","image":["https://static.studygolang.com/190902/4eed86fd1edd43bcffad9201517dfe91.png","https://static.studygolang.com/190902/602ba900990f28ad4fa14e035b867983.png","https://static.studygolang.com/190902/4aaa622ddaf65135097530cb607710c9.png","https://static.studygolang.com/190902/11baaef991964b4ec3a121530488cd7e.png","https://static.studygolang.com/190902/68714518eb3b96f7be0dbccc2519b3f7.png","https://static.studygolang.com/190902/ff11f4721f1a5972fd04db163be81dc6.png","https://static.studygolang.com/190902/ca9760b58b3f37422d93dd4d41c5d436.png","https://static.studygolang.com/190902/ed2f6ce7cf9c93ea46e414f33dc9b88e.png","https://static.studygolang.com/190902/eb0cf1dd27171f63bfb5151784edf9d0.png","https://static.studygolang.com/190902/ce62525ce76060abe1bf5756fff4bd0b.png","https://static.studygolang.com/190902/cf34a5b466865e37ed5a7166b45bd574.png","https://static.studygolang.com/190902/241ac4dc79a77ac90fc33291743b140d.png","https://static.studygolang.com/190902/57f09f1cedfb353c242e95530433bc7e.png","https://static.studygolang.com/190902/7daa57ae26866156db45164aa08bbff4.png","https://static.golangjob.cn/static/img/footer.png?imageView2/2/w/280"],"dateModified":"2025-08-27T12:02:38.000Z","author":[{"@type":"Person","name":"Cospk","url":"https://savvygo.cn"}]}</script><link rel="icon" href="/vuepress-app/favicon.svg"><title>深度解密Go语言之 scheduler | Golang全栈指南</title><meta name="description" content="好久不见，你还好吗？距离上一篇文章已经过去了一个多月了，迟迟未更新文章，我也很着急啊。 跟大家汇报一下，这段时间我在看 proc.go 的源码，其实就是调度器的源码。代码有几千行之多，不像以往的 map，channel 等等。想把这些代码都看明白，是一个庞大的工程。到今天为止，我也不敢说我都看明白了。 要深挖下去的话，会无穷无尽，所以阶段性的探索就到这...">
    <link rel="preload" href="/vuepress-app/assets/style-BU0LSV_n.css" as="style"><link rel="stylesheet" href="/vuepress-app/assets/style-BU0LSV_n.css">
    <link rel="modulepreload" href="/vuepress-app/assets/app-DIJDtupu.js"><link rel="modulepreload" href="/vuepress-app/assets/深度解密Go语言之-scheduler.html-psf_2qRb.js"><link rel="modulepreload" href="/vuepress-app/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/vuepress-app/assets/index.html-BMYgyfDp.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/portfolio.html-4bxlMBYl.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.算法.html-CvQ1gy67.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.设计模式.html-oqIrtBe8.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/2.规划.html-BTctlwB6.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/git 规范.html-pOzt2Sya.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/git.html-ixPi_0Ze.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/markdown.html-Dy_QlVnL.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/好物分享.html-B6NfvEM_.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-8AQshAED.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/best-practice-template.html-BLs6dmQM.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/reference-template.html-CRcAKI7_.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/tutorial-template.html-DD31Wvmc.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/writing-standards.html-CYxaf07f.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-E7qiWZU4.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Consul.html-D9i7V0zV.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Docker.html-CALiwnXG.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/GRPC.html-BDKbTmRI.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Jaeger.html-DGQmYk9d.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kong.html-BY9r39zx.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kubernetes.html-rzGxnWd0.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Nacos.html-CpWI1heb.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-CqzJH2kl.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Sentinel.html-QBl6g7n4.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BQep9Ms_.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-W0IZn2xO.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html--HZ9Xv38.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BNzatcUR.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/网络基础.html-53H3D8RM.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.use.html-BfZix_tO.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.howWork.html-CL03OcGt.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-f8ivuiuF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-CxO_qeK1.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-C-Cxe3ur.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/常用包大全.html-BWGXltvN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/01-介绍与安装.html-BLLTtCrI.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/02-Hello-World.html-B4m4QWVp.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/03-变量.html-DBpH8CZF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/04-类型.html-3lTaKrEX.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/05-常量.html-Dem3SKBW.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/06-函数.html-TWV5xDWN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/07-包.html-Bb9b61PO.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/08-if-else-语句.html-BKuKh2bl.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/09-循环.html-xBYX8gSg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/10-switch-语句.html-DmGE68tD.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/11-数组和切片.html-DrrlC8sJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/12-可变参数函数.html-CVgsTexs.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/13-Maps.html-DcKwMN0L.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/14-字符串.html-D71PugAn.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/15-指针.html-BQKNFZz4.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/16-结构体.html-BR_npihr.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/17-方法.html-Cea2EL0W.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/18-接口.html-5vpBAdeJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/19-接口.html-IZQZkccS.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/20-并发入门.html-DFCOqalS.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/21-Go-协程.html-C7X86pID.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/22-信道.html-C5SZUNIN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/23-缓冲信道和工作池.html-Dw9yzm21.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/24-Select.html-BZRmoLwg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/25-Mutex.html-DlRLxIO0.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/26-结构体取代类.html-Cb0CQeQI.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/27-组合取代继承.html-D-1lRcAm.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/28-多态.html-D5cES2MF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/29-Defer.html-BTOlmwqG.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/30-错误处理.html--URdZGOa.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/31-自定义错误.html-qjjG4dD1.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/32-panic-和-recover.html-C__hWiny.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/33-函数是一等公民.html-CKtAIjCE.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/34-反射.html-gT_ubIYV.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/35-读取文件.html-Dim6lJth.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/36-写入文件.html-DMMy5Akp.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-Ce4QncUh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.interface.html-Bcwpxkz_.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/10.cgo.html-Cc3IBgZh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/11.pprof.html-B1TBiF-S.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/12.followUp.html-ChgosObn.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/2.generic.html-t9F8JkZ-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/3.reflect.html-CsqwkGQg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/4.types.html-DTz3KnZN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/5.error.html-CYyqf_8g.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/6.file.html-IQGOyJmj.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/7.concurrency.html-DWHb7NV7.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/8.module.html-D1WyiQU-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/9.test.html-BDgM0J0K.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-CpG6FWU3.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/notes.html-B6gucJy2.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/test.html-D2d8EnW4.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.基础语法.html-iIWzYafk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/2.进阶原理.html-83xh_rnD.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-wT1nHTio.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/大厂面试题.html-Dwwv4_YP.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/对象池.html-CbIFXFAU.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/极智天下.html-CUbP6xEh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/面试题（答案）.html-DcUI8xsg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Elasticsearch-Go.html-DH3iL3t-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Elasticsearch.html-Dbqk6yba.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MYSQL高级.html-DjU99qc2.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MongoDB-Go.html-LC00SqHY.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MongoDB.html-BsiiWKPF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MySQL-Go.html-BP44ICxm.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/MySQL.html-DvFuWdDI.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-No9QF5uf.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Redis-Go.html-68Ve0Bms.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Redis.html-COY3AC-z.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/EMQX.html-Z2ULNNu9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kafka1.html-CIwYmfIl.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kafka_go.html-BtHi9Ay4.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-CoyHYM4r.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/RocketMQ.html-DKnvI3P9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/kafka.html-C45XgCVY.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kong.html-CFRTKV3Q.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Nginx.html-DobIArYS.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-C_myC_ON.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Docker-Do.html-CAeX33hD.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Docker.html-CrfPN4Ea.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Jenkins.html-D7fd_zxG.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Kubernetes.html-CiCaNrju.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-D3i7y_nz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/kubernetes-Do.html-Mn8O0iYA.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/casbin.html-CmdXnvo-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.use.html-mGGwb0Xs.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.howWork.html-BPbATKWp.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BDiG7Sa9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.use.html-CFS7SGEx.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.howWork.html-CWMWUGai.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-M11fprN-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-KksFQ35C.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Zap.html-cSNtc6K9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/用户认证选型.html-D8ZbBlYF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/监控.html-CblSNQ5X.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.intro.html-BiC5KbBB.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-V-gxjtkQ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/encode.html-DULShIO4.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/flag.html-BNP6mLKg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/http.html-Ds7Bn6Dh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/log.html-Bi8nr_fy.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/math.html-BRgtQXkC.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/net.html-Cez-sJPL.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/sort.html-B-_PynF9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/strconv.html-D9aq_0ge.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/strings.html-BEBdT1VN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/template.html-CDhZ4T2L.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/time.html-B2s7biyE.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/unicode.html-KfTwaqW3.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/unsafe.html-Ck5rncWr.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/0.runtime.html-U_tTe_nE.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/1.并发.html-B3G74HKx.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/2.数据结构.html-zwbg06cB.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/3.错误处理.html-CdT9wDTr.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/GC-的认识.html-OPEMhhHh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/GO-中的调度：第三部分---并发.html-CDUpX-uL.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-Channel的实现.html-mcjtDZL8.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-GC.html-XyX71R-p.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-Hashmap内存布局和实现.html-CEaCfe5Y.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-Modules-终极入门.html-Dg9PFqQr.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-Select的实现.html-B83V5ZdL.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-Slice与String内存布局和实现.html-DjzVnYMo.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-work-stealing-调度器.html-yoXF58Gm.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-中的垃圾回收：第一部分---基础.html-DtW8VjA8.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-内存管理.html-BjEWhmRz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-内存管理之二.html-CR15EHul.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-内存逃逸详细分析.html-DVPlddTO.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-函数调用惯例.html-_ZCeAlFf.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-反射与interface拾遗.html-Dbd8kK8e.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-垃圾回收.html-C1kvG1yM.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-垃圾回收：第二部分---GC-追踪.html-B0G6QDGf.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-执行追踪器（execution-tracer）.html-9tss-d8y.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-方法调用与接口.html-DErdsZ4B.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-的调度器追踪.html-ekQk2krk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-笔记之如何防止-goroutine-泄露.html-B1dU8GVD.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-笔记之如何防止-goroutine-泄露（二）.html-CyBRGTsl.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言-Channel-实现原理精要.html-Dk44jpBB.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言-for-和-range-的实现.html-B70zygT9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言数组和切片的原理.html-BL11UMTM.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言机制之内存剖析（Language-Mechanics-On-Memory-Profiling）.html-Dr15sYk2.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言机制之栈和指针.html-OIXWOgUo.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言机制之逃逸分析（Language-Mechanics-On-Escape-Analysis）.html-BSwrK1hN.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言汇编快速入门.html-DsM55op-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言的内存管理.html-d6UUqBKY.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-语言编译过程概述.html-DLcEQVB_.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-调优技术.html-52kbwzM7.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-逃逸分析的缺陷.html-CMuBeG6r.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go-问答之如何阅读-Go-源码.html-D3lneojF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go1.13-defer-的性能是如何提高的？.html-DzeL2P07.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang---调度剖析【第一部分】.html-T60WRdbu.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang---调度剖析【第二部分】.html-DgywT52V.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang-socket数据结构.html-BZRKzByu.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang-如何进行类型检查.html-DjB_4Qzk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang协程栈初始化.html-Bm7ULxn_.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang协程栈概述.html-BKvkbs6k.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang协程调度(一)-协程状态.html-BNQjQpr3.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang协程调度二：协程切换原理.html-CH3A2Pa7.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang协程调度的数据结构.html-CM1oAeM0.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang源码探索(一)-编译和调试源码.html-OvSovgtG.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang源码探索(三)-GC的实现原理.html-Djtfq-R-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang源码探索(二)-协程的实现原理.html-C1ggllGC.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang网络-核心API实现剖析(一).html-MbpxjV-6.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Golang网络-核心API实现剖析二).html-BmNJSqym.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Goroutine浅析.html-gPcMscr4.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go内存分配那些事，就这么简单！.html-CY_BAQuP.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go语言反射规则---The-Laws-of-Reflection.html-gtslJpvI.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go语言高阶：调度器系列（1）起源.html-W5S_pgny.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go语言黑魔法.html-DWMaldmK.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go调度器系列（2）宏观看调度器.html-BUfXps1o.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go调度器系列（3）图解调度原理.html-kLevRq4C.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go调度器系列（4）源码阅读与探索.html-CGkhLWiX.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Go：Goroutine-与抢占机制.html-DEz2luQA.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/Map-在-Go-runtime-中的高效实现（不使用范型）.html-CN1qlXMF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-t221nlib.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/译_-Go-代码诊断工具集合-官方文档.html-D5JYZVD8.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/channel的使用及源码解析.html-D-E0EJqW.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/golang--详解interface和nil.html-D2NnwzvL.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/golang-内存分析-动态追踪.html-D1PgABt6.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/golang-汇编.html-C5JkJXWp.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/golang进阶(八)——隐藏技能go-linkname.html-3Wpc2ByX.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/go语言死循环分析.html-BlhVjuG6.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/也谈goroutine调度器.html-Db8YaWQ3.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/从底层理解-Golang-的-map-实现.html-Cc6H9Gsg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/从源码角度看Golang的TCP-Socket(epoll)实现.html-eRToSxUU.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/从源码讲解-golang-内存分配.html-Cq-0auHr.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/使用-pprof-和火焰图调试-golang-应用.html-BUm1tgut.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/关于Go-GC---Rick's-ISMM-keynote.html-DdixLGB9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/协程栈扩容.html-DWyUpq-d.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/协程调度时机一：系统调用.html-C-aZ3nPz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/协程调度时机三：抢占式调度.html-BH2eGRDR.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/协程调度时机二：Channel读写.html-Dz_tb5Nv.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/可视化-Go-语言中的并发.html-HCljW16V.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/图解Go-select语句原理.html-Dztyjg7r.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/图解Go内存分配器.html-BWsJxDrt.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/图解Go语言内存分配.html-ChUszE5D.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/图解Go运行时调度器.html-BkDtbip9.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/图解goroutine调度.html-Dv2bwlc0.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/如何定位-golang-进程-hang-死的-bug.html-DCjilOiP.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/实战Go内存泄露.html-1TNR3pHn.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/弄懂goroutine调度原理.html-2nEHifzV.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/指令集架构、机器码与-Go-语言.html-CAFmUQdV.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/浅谈-Go-语言-select-的实现原理.html-C52XPpw5.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深入理解-sync.RWMutex：解决读者-写者问题.html-CPGlhi7p.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深入理解Go-1.9-sync.Map.html-DaQ344IU.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深入理解Go-runtime.SetFinalizer原理剖析.html-DhOTa3w1.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深入理解Go-sync.Map原理剖析.html-VrIOj1-G.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深入理解channel：设计_源码.html-oh9QVAot.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深入解析-Go-中-Slice-底层实现.html-apCSB3Bz.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深度解密Go语言之Slice.html-CTTj4nep.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深度解密Go语言之map.html-CtmTnWIX.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深度解密Go语言之关于-interface-的-10-个问题.html-H47yPP0k.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/深度解密Go语言之反射.html-CJDtYFGn.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/源码剖析golang中sync.Mutex.html-d55t4S9U.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/理解-Golang-中函数调用的原理.html-C9Ym7Sqh.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/理解-Golang-哈希表-Map-的原理.html-LNxTujTg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/用-GODEBUG-看调度跟踪.html-DPvw46lX.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/解剖Go语言map底层实现.html-BfSUQpmG.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/解析器眼中的-Go-语言.html-sEjiXwkQ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/记一次获得3倍性能的go程序优化实践，及on-cpu-off-cpu火焰图的使用.html-BLt9mJCF.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/详尽干货！从源码角度看-Golang-的调度.html-BhvQcjtp.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/详解-Golang-中间代码生成.html-BeBBaRGG.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/详解Go语言的内存模型及堆的分配管理.html-BNhhPUH_.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/谈-Golang-中的字符串和字节数组.html-D10O968i.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/通过-profiling-定位-golang-性能问题---内存篇.html-CBANHs19.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/404.html-DwQc1sng.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-BN7RFqTj.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-DJN8LopR.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-Bihu4_9d.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-CklNBwjM.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-CaPKmAAG.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index.html-Dhk06VLP.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/flowchart-CTwbLKUk.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index-izhIXQi-.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index-DRWmbcXV.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/index-B2Pezylg.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/mermaid.esm.min-Bf9uIE2x.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/photoswipe.esm-GXRgw7eJ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/giscus-BZxmVUME.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/SearchResult-mpXxa_JZ.js" as="script"><link rel="prefetch" href="/vuepress-app/assets/setupDevtools-7MC2TMWH-DpbXT7rC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/vuepress-app/" aria-label="带我回家"><img class="vp-nav-logo light" src="/vuepress-app/log.svg" alt><img class="vp-nav-logo dark" src="/vuepress-app/logDark.svg" alt><span class="vp-site-name hide-in-pad">Golang全栈指南</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/vuepress-app/" aria-label="首页"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><!--]-->首页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="golang"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-laptop-code" style=""></span>golang<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/%E5%9F%BA%E7%A1%80/" aria-label="Go基础"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-eraser" style=""></span><!--]-->Go基础<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/%E8%BF%9B%E9%98%B6/" aria-label="Go进阶"><!--[--><img class="icon" src="/vuepress-app/assets/icon/up.png" alt aria-hidden no-view style=""><!--]-->Go进阶<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/" aria-label="原理"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-gears" style=""></span><!--]-->原理<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/web%E6%A1%86%E6%9E%B6/" aria-label="框架"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-sitemap" style=""></span><!--]-->框架<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/golang/%E9%9D%A2%E8%AF%95/" aria-label="面试"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-feather" style=""></span><!--]-->面试<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="中间件"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-layer-group" style=""></span>中间件<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html" aria-label="MySql"><!--[--><img class="icon" src="/vuepress-app/assets/icon/mysql.png" alt aria-hidden no-view style=""><!--]-->MySql<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html" aria-label="Redis"><!--[--><img class="icon" src="/vuepress-app/assets/icon/redis.png" alt aria-hidden no-view style=""><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB.html" aria-label="MongoDB"><!--[--><img class="icon" src="/vuepress-app/assets/icon/mongodb.png" alt aria-hidden no-view style=""><!--]-->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/kafka.html" aria-label="kafka"><!--[--><img class="icon" src="/vuepress-app/assets/icon/Kafka.png" alt aria-hidden no-view style=""><!--]-->kafka<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E7%BD%91%E5%85%B3/Nginx.html" aria-label="Nginx"><!--[--><img class="icon" src="/vuepress-app/assets/icon/Nginx.png" alt aria-hidden no-view style=""><!--]-->Nginx<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E8%BF%90%E7%BB%B4/Docker.html" aria-label="Docker"><!--[--><img class="icon" src="/vuepress-app/assets/icon/docker.png" alt aria-hidden no-view style=""><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/middleware/%E8%BF%90%E7%BB%B4/Kubernetes.html" aria-label="Kubernetes"><!--[--><img class="icon" src="/vuepress-app/assets/icon/kubernetes.png" alt aria-hidden no-view style=""><!--]-->Kubernetes<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="架构"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-network-wired" style=""></span>架构<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" aria-label="微服务"><!--[--><img class="icon" src="/vuepress-app/assets/icon/micro.png" alt aria-hidden no-view style=""><!--]-->微服务<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/framework/%E5%88%86%E5%B8%83%E5%BC%8F/" aria-label="分布式"><!--[--><img class="icon" src="/vuepress-app/assets/icon/kubernetes.png" alt aria-hidden no-view style=""><!--]-->分布式<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/framework/%E9%AB%98%E5%8F%AF%E7%94%A8/" aria-label="高可用"><!--[--><img class="icon" src="/vuepress-app/assets/icon/available.png" alt aria-hidden no-view style=""><!--]-->高可用<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/framework/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8/" aria-label="领域驱动"><!--[--><img class="icon" src="/vuepress-app/assets/icon/DDD.png" alt aria-hidden no-view style=""><!--]-->领域驱动<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="计算机"><!--[--><span class="font-icon icon fa-fw fa-sm fa-solid fa-computer" style=""></span>计算机<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/computer/%E7%BD%91%E7%BB%9C/" aria-label="计算机网络"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-globe" style=""></span><!--]-->计算机网络<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/computer/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" aria-label="操作系统"><!--[--><img class="icon" src="/vuepress-app/assets/icon/linux.png" alt aria-hidden no-view style=""><!--]-->操作系统<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/computer/0.%E7%AE%97%E6%B3%95.html" aria-label="常用算法"><!--[--><img class="icon" src="/vuepress-app/assets/icon/arithmetic.png" alt aria-hidden no-view style=""><!--]-->常用算法<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/computer/1.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html" aria-label="设计模式"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-pen-ruler" style=""></span><!--]-->设计模式<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="好物分享"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-share-nodes" style=""></span>好物分享<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/share/%E5%A5%BD%E7%89%A9%E5%88%86%E4%BA%AB.html" aria-label="好物分享"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-share-nodes" style=""></span><!--]-->好物分享<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vuepress-app/share/git.html" aria-label="git"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-git-alt" style=""></span><!--]-->git<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/Cospk" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button type="button" class="slimsearch-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">搜索</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">K</kbd></div></button><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-database" style=""></span><span class="vp-sidebar-title">GORM框架</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-server" style=""></span><span class="vp-sidebar-title">Web框架</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-gears" style=""></span><span class="vp-sidebar-title">原理</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html" aria-label="常用包和第三方包介绍"><!---->常用包和第三方包介绍<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-gear" style=""></span><span class="vp-sidebar-title">实现原理</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/0.runtime.html" aria-label="Runtime"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-microchip" style=""></span><!--]-->Runtime<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/2.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="内置数据结构"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-microchip" style=""></span><!--]-->内置数据结构<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/1.%E5%B9%B6%E5%8F%91.html" aria-label="并发"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-microchip" style=""></span><!--]-->并发<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/3.%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86.html" aria-label="错误"><!--[--><span class="font-icon icon fa-fw fa-sm fas fa-microchip" style=""></span><!--]-->错误<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E8%AF%91_-Go-%E4%BB%A3%E7%A0%81%E8%AF%8A%E6%96%AD%E5%B7%A5%E5%85%B7%E9%9B%86%E5%90%88-%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3.html" aria-label="&quot;&quot;[译] Go 代码诊断工具集合-官方文档&quot;&quot;"><!---->&quot;&quot;[译] Go 代码诊断工具集合-官方文档&quot;&quot;<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/golang--%E8%AF%A6%E8%A7%A3interface%E5%92%8Cnil.html" aria-label="&quot;&quot;golang: 详解interface和nil&quot;&quot;"><!---->&quot;&quot;golang: 详解interface和nil&quot;&quot;<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6(%E4%B8%80)-%E5%8D%8F%E7%A8%8B%E7%8A%B6%E6%80%81.html" aria-label="&quot;&quot;Golang协程调度(一):协程状态&quot;&quot;"><!---->&quot;&quot;Golang协程调度(一):协程状态&quot;&quot;<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E7%BD%91%E7%BB%9C-%E6%A0%B8%E5%BF%83API%E5%AE%9E%E7%8E%B0%E5%89%96%E6%9E%90(%E4%B8%80).html" aria-label="&quot;&quot;Golang网络:核心API实现剖析(一)&quot;&quot;"><!---->&quot;&quot;Golang网络:核心API实现剖析(一)&quot;&quot;<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E7%BD%91%E7%BB%9C-%E6%A0%B8%E5%BF%83API%E5%AE%9E%E7%8E%B0%E5%89%96%E6%9E%90%E4%BA%8C).html" aria-label="&quot;&quot;Golang网络:核心API实现剖析二)&quot;&quot;"><!---->&quot;&quot;Golang网络:核心API实现剖析二)&quot;&quot;<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/golang%E8%BF%9B%E9%98%B6(%E5%85%AB)%E2%80%94%E2%80%94%E9%9A%90%E8%97%8F%E6%8A%80%E8%83%BDgo-linkname.html" aria-label="&quot;&quot;golang进阶(八)——隐藏技能go:linkname&quot;&quot;"><!---->&quot;&quot;golang进阶(八)——隐藏技能go:linkname&quot;&quot;<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/channel%E7%9A%84%E4%BD%BF%E7%94%A8%E5%8F%8A%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90.html" aria-label="channel的使用及源码解析"><!---->channel的使用及源码解析<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/GC-%E7%9A%84%E8%AE%A4%E8%AF%86.html" aria-label="GC 的认识"><!---->GC 的认识<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-Channel%E7%9A%84%E5%AE%9E%E7%8E%B0.html" aria-label="Go Channel的实现"><!---->Go Channel的实现<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-GC.html" aria-label="Go GC"><!---->Go GC<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-Hashmap%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80%E5%92%8C%E5%AE%9E%E7%8E%B0.html" aria-label="Go Hashmap内存布局和实现"><!---->Go Hashmap内存布局和实现<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-Modules-%E7%BB%88%E6%9E%81%E5%85%A5%E9%97%A8.html" aria-label="Go Modules 终极入门"><!---->Go Modules 终极入门<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-Select%E7%9A%84%E5%AE%9E%E7%8E%B0.html" aria-label="Go Select的实现"><!---->Go Select的实现<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-Slice%E4%B8%8EString%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80%E5%92%8C%E5%AE%9E%E7%8E%B0.html" aria-label="Go Slice与String内存布局和实现"><!---->Go Slice与String内存布局和实现<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-work-stealing-%E8%B0%83%E5%BA%A6%E5%99%A8.html" aria-label="Go work-stealing 调度器"><!---->Go work-stealing 调度器<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E4%B8%AD%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%EF%BC%9A%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86---%E5%9F%BA%E7%A1%80.html" aria-label="Go 中的垃圾回收：第一部分 - 基础"><!---->Go 中的垃圾回收：第一部分 - 基础<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/GO-%E4%B8%AD%E7%9A%84%E8%B0%83%E5%BA%A6%EF%BC%9A%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86---%E5%B9%B6%E5%8F%91.html" aria-label="GO 中的调度：第三部分 - 并发"><!---->GO 中的调度：第三部分 - 并发<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" aria-label="Go 内存管理"><!---->Go 内存管理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E4%B9%8B%E4%BA%8C.html" aria-label="Go 内存管理之二"><!---->Go 内存管理之二<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E5%86%85%E5%AD%98%E9%80%83%E9%80%B8%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90.html" aria-label="Go 内存逃逸详细分析"><!---->Go 内存逃逸详细分析<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E6%83%AF%E4%BE%8B.html" aria-label="Go 函数调用惯例"><!---->Go 函数调用惯例<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E5%8F%8D%E5%B0%84%E4%B8%8Einterface%E6%8B%BE%E9%81%97.html" aria-label="Go 反射与interface拾遗"><!---->Go 反射与interface拾遗<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" aria-label="Go 垃圾回收"><!---->Go 垃圾回收<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%EF%BC%9A%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86---GC-%E8%BF%BD%E8%B8%AA.html" aria-label="Go 垃圾回收：第二部分 - GC 追踪"><!---->Go 垃圾回收：第二部分 - GC 追踪<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E6%89%A7%E8%A1%8C%E8%BF%BD%E8%B8%AA%E5%99%A8%EF%BC%88execution-tracer%EF%BC%89.html" aria-label="Go 执行追踪器（execution tracer）"><!---->Go 执行追踪器（execution tracer）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E4%B8%8E%E6%8E%A5%E5%8F%A3.html" aria-label="Go 方法调用与接口"><!---->Go 方法调用与接口<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E7%9A%84%E8%B0%83%E5%BA%A6%E5%99%A8%E8%BF%BD%E8%B8%AA.html" aria-label="Go 的调度器追踪"><!---->Go 的调度器追踪<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2-goroutine-%E6%B3%84%E9%9C%B2.html" aria-label="Go 笔记之如何防止 goroutine 泄露"><!---->Go 笔记之如何防止 goroutine 泄露<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2-goroutine-%E6%B3%84%E9%9C%B2%EF%BC%88%E4%BA%8C%EF%BC%89.html" aria-label="Go 笔记之如何防止 goroutine 泄露（二）"><!---->Go 笔记之如何防止 goroutine 泄露（二）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80-Channel-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86%E7%B2%BE%E8%A6%81.html" aria-label="Go 语言 Channel 实现原理精要"><!---->Go 语言 Channel 实现原理精要<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80-for-%E5%92%8C-range-%E7%9A%84%E5%AE%9E%E7%8E%B0.html" aria-label="Go 语言 for 和 range 的实现"><!---->Go 语言 for 和 range 的实现<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80%E6%95%B0%E7%BB%84%E5%92%8C%E5%88%87%E7%89%87%E7%9A%84%E5%8E%9F%E7%90%86.html" aria-label="Go 语言数组和切片的原理"><!---->Go 语言数组和切片的原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80%E6%9C%BA%E5%88%B6%E4%B9%8B%E5%86%85%E5%AD%98%E5%89%96%E6%9E%90%EF%BC%88Language-Mechanics-On-Memory-Profiling%EF%BC%89.html" aria-label="Go 语言机制之内存剖析（Language Mechanics On Memory Profiling）"><!---->Go 语言机制之内存剖析（Language Mechanics On Memory Profiling）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80%E6%9C%BA%E5%88%B6%E4%B9%8B%E6%A0%88%E5%92%8C%E6%8C%87%E9%92%88.html" aria-label="Go 语言机制之栈和指针"><!---->Go 语言机制之栈和指针<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80%E6%9C%BA%E5%88%B6%E4%B9%8B%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90%EF%BC%88Language-Mechanics-On-Escape-Analysis%EF%BC%89.html" aria-label="Go 语言机制之逃逸分析（Language Mechanics On Escape Analysis）"><!---->Go 语言机制之逃逸分析（Language Mechanics On Escape Analysis）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80%E6%B1%87%E7%BC%96%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8.html" aria-label="Go 语言汇编快速入门"><!---->Go 语言汇编快速入门<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86.html" aria-label="Go 语言的内存管理"><!---->Go 语言的内存管理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%AF%AD%E8%A8%80%E7%BC%96%E8%AF%91%E8%BF%87%E7%A8%8B%E6%A6%82%E8%BF%B0.html" aria-label="Go 语言编译过程概述"><!---->Go 语言编译过程概述<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E8%B0%83%E4%BC%98%E6%8A%80%E6%9C%AF.html" aria-label="Go 调优技术"><!---->Go 调优技术<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E9%80%83%E9%80%B8%E5%88%86%E6%9E%90%E7%9A%84%E7%BC%BA%E9%99%B7.html" aria-label="Go 逃逸分析的缺陷"><!---->Go 逃逸分析的缺陷<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E9%97%AE%E7%AD%94%E4%B9%8B%E5%A6%82%E4%BD%95%E9%98%85%E8%AF%BB-Go-%E6%BA%90%E7%A0%81.html" aria-label="Go 问答之如何阅读 Go 源码"><!---->Go 问答之如何阅读 Go 源码<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go%EF%BC%9AGoroutine-%E4%B8%8E%E6%8A%A2%E5%8D%A0%E6%9C%BA%E5%88%B6.html" aria-label="Go：Goroutine 与抢占机制"><!---->Go：Goroutine 与抢占机制<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go1.13-defer-%E7%9A%84%E6%80%A7%E8%83%BD%E6%98%AF%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98%E7%9A%84%EF%BC%9F.html" aria-label="Go1.13 defer 的性能是如何提高的？"><!---->Go1.13 defer 的性能是如何提高的？<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang---%E8%B0%83%E5%BA%A6%E5%89%96%E6%9E%90%E3%80%90%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%E3%80%91.html" aria-label="Golang - 调度剖析【第一部分】"><!---->Golang - 调度剖析【第一部分】<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang---%E8%B0%83%E5%BA%A6%E5%89%96%E6%9E%90%E3%80%90%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%E3%80%91.html" aria-label="Golang - 调度剖析【第二部分】"><!---->Golang - 调度剖析【第二部分】<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang-socket%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="Golang socket数据结构"><!---->Golang socket数据结构<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/golang-%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90-%E5%8A%A8%E6%80%81%E8%BF%BD%E8%B8%AA.html" aria-label="golang 内存分析/动态追踪"><!---->golang 内存分析/动态追踪<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang-%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5.html" aria-label="Golang 如何进行类型检查"><!---->Golang 如何进行类型检查<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/golang-%E6%B1%87%E7%BC%96.html" aria-label="golang 汇编"><!---->golang 汇编<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E5%8D%8F%E7%A8%8B%E6%A0%88%E5%88%9D%E5%A7%8B%E5%8C%96.html" aria-label="Golang协程栈初始化"><!---->Golang协程栈初始化<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E5%8D%8F%E7%A8%8B%E6%A0%88%E6%A6%82%E8%BF%B0.html" aria-label="Golang协程栈概述"><!---->Golang协程栈概述<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E4%BA%8C%EF%BC%9A%E5%8D%8F%E7%A8%8B%E5%88%87%E6%8D%A2%E5%8E%9F%E7%90%86.html" aria-label="Golang协程调度二：协程切换原理"><!---->Golang协程调度二：协程切换原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" aria-label="Golang协程调度的数据结构"><!---->Golang协程调度的数据结构<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2(%E4%B8%80)-%E7%BC%96%E8%AF%91%E5%92%8C%E8%B0%83%E8%AF%95%E6%BA%90%E7%A0%81.html" aria-label="Golang源码探索(一) 编译和调试源码"><!---->Golang源码探索(一) 编译和调试源码<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2(%E4%B8%89)-GC%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html" aria-label="Golang源码探索(三) GC的实现原理"><!---->Golang源码探索(三) GC的实现原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Golang%E6%BA%90%E7%A0%81%E6%8E%A2%E7%B4%A2(%E4%BA%8C)-%E5%8D%8F%E7%A8%8B%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html" aria-label="Golang源码探索(二) 协程的实现原理"><!---->Golang源码探索(二) 协程的实现原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Goroutine%E6%B5%85%E6%9E%90.html" aria-label="Goroutine浅析"><!---->Goroutine浅析<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E9%82%A3%E4%BA%9B%E4%BA%8B%EF%BC%8C%E5%B0%B1%E8%BF%99%E4%B9%88%E7%AE%80%E5%8D%95%EF%BC%81.html" aria-label="Go内存分配那些事，就这么简单！"><!---->Go内存分配那些事，就这么简单！<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go%E8%AF%AD%E8%A8%80%E5%8F%8D%E5%B0%84%E8%A7%84%E5%88%99---The-Laws-of-Reflection.html" aria-label="Go语言反射规则 - The Laws of Reflection"><!---->Go语言反射规则 - The Laws of Reflection<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/go%E8%AF%AD%E8%A8%80%E6%AD%BB%E5%BE%AA%E7%8E%AF%E5%88%86%E6%9E%90.html" aria-label="go语言死循环分析"><!---->go语言死循环分析<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go%E8%AF%AD%E8%A8%80%E9%AB%98%E9%98%B6%EF%BC%9A%E8%B0%83%E5%BA%A6%E5%99%A8%E7%B3%BB%E5%88%97%EF%BC%881%EF%BC%89%E8%B5%B7%E6%BA%90.html" aria-label="Go语言高阶：调度器系列（1）起源"><!---->Go语言高阶：调度器系列（1）起源<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go%E8%AF%AD%E8%A8%80%E9%BB%91%E9%AD%94%E6%B3%95.html" aria-label="Go语言黑魔法"><!---->Go语言黑魔法<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go%E8%B0%83%E5%BA%A6%E5%99%A8%E7%B3%BB%E5%88%97%EF%BC%882%EF%BC%89%E5%AE%8F%E8%A7%82%E7%9C%8B%E8%B0%83%E5%BA%A6%E5%99%A8.html" aria-label="Go调度器系列（2）宏观看调度器"><!---->Go调度器系列（2）宏观看调度器<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go%E8%B0%83%E5%BA%A6%E5%99%A8%E7%B3%BB%E5%88%97%EF%BC%883%EF%BC%89%E5%9B%BE%E8%A7%A3%E8%B0%83%E5%BA%A6%E5%8E%9F%E7%90%86.html" aria-label="Go调度器系列（3）图解调度原理"><!---->Go调度器系列（3）图解调度原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go%E8%B0%83%E5%BA%A6%E5%99%A8%E7%B3%BB%E5%88%97%EF%BC%884%EF%BC%89%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E4%B8%8E%E6%8E%A2%E7%B4%A2.html" aria-label="Go调度器系列（4）源码阅读与探索"><!---->Go调度器系列（4）源码阅读与探索<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Map-%E5%9C%A8-Go-runtime-%E4%B8%AD%E7%9A%84%E9%AB%98%E6%95%88%E5%AE%9E%E7%8E%B0%EF%BC%88%E4%B8%8D%E4%BD%BF%E7%94%A8%E8%8C%83%E5%9E%8B%EF%BC%89.html" aria-label="Map 在 Go runtime 中的高效实现（不使用范型）"><!---->Map 在 Go runtime 中的高效实现（不使用范型）<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E4%B9%9F%E8%B0%88goroutine%E8%B0%83%E5%BA%A6%E5%99%A8.html" aria-label="也谈goroutine调度器"><!---->也谈goroutine调度器<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E4%BB%8E%E5%BA%95%E5%B1%82%E7%90%86%E8%A7%A3-Golang-%E7%9A%84-map-%E5%AE%9E%E7%8E%B0.html" aria-label="从底层理解 Golang 的 map 实现"><!---->从底层理解 Golang 的 map 实现<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E4%BB%8E%E6%BA%90%E7%A0%81%E8%A7%92%E5%BA%A6%E7%9C%8BGolang%E7%9A%84TCP-Socket(epoll)%E5%AE%9E%E7%8E%B0.html" aria-label="从源码角度看Golang的TCP Socket(epoll)实现"><!---->从源码角度看Golang的TCP Socket(epoll)实现<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E4%BB%8E%E6%BA%90%E7%A0%81%E8%AE%B2%E8%A7%A3-golang-%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D.html" aria-label="从源码讲解 golang 内存分配"><!---->从源码讲解 golang 内存分配<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E4%BD%BF%E7%94%A8-pprof-%E5%92%8C%E7%81%AB%E7%84%B0%E5%9B%BE%E8%B0%83%E8%AF%95-golang-%E5%BA%94%E7%94%A8.html" aria-label="使用 pprof 和火焰图调试 golang 应用"><!---->使用 pprof 和火焰图调试 golang 应用<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%85%B3%E4%BA%8EGo-GC---Rick&#39;s-ISMM-keynote.html" aria-label="关于Go GC - Rick&#39;s ISMM keynote"><!---->关于Go GC - Rick&#39;s ISMM keynote<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%8D%8F%E7%A8%8B%E6%A0%88%E6%89%A9%E5%AE%B9.html" aria-label="协程栈扩容"><!---->协程栈扩容<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E6%97%B6%E6%9C%BA%E4%B8%80%EF%BC%9A%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8.html" aria-label="协程调度时机一：系统调用"><!---->协程调度时机一：系统调用<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E6%97%B6%E6%9C%BA%E4%B8%89%EF%BC%9A%E6%8A%A2%E5%8D%A0%E5%BC%8F%E8%B0%83%E5%BA%A6.html" aria-label="协程调度时机三：抢占式调度"><!---->协程调度时机三：抢占式调度<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%8D%8F%E7%A8%8B%E8%B0%83%E5%BA%A6%E6%97%B6%E6%9C%BA%E4%BA%8C%EF%BC%9AChannel%E8%AF%BB%E5%86%99.html" aria-label="协程调度时机二：Channel读写"><!---->协程调度时机二：Channel读写<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%8F%AF%E8%A7%86%E5%8C%96-Go-%E8%AF%AD%E8%A8%80%E4%B8%AD%E7%9A%84%E5%B9%B6%E5%8F%91.html" aria-label="可视化 Go 语言中的并发"><!---->可视化 Go 语言中的并发<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%9B%BE%E8%A7%A3Go-select%E8%AF%AD%E5%8F%A5%E5%8E%9F%E7%90%86.html" aria-label="图解Go select语句原理"><!---->图解Go select语句原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%9B%BE%E8%A7%A3goroutine%E8%B0%83%E5%BA%A6.html" aria-label="图解goroutine调度"><!---->图解goroutine调度<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%9B%BE%E8%A7%A3Go%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E5%99%A8.html" aria-label="图解Go内存分配器"><!---->图解Go内存分配器<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%9B%BE%E8%A7%A3Go%E8%AF%AD%E8%A8%80%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D.html" aria-label="图解Go语言内存分配"><!---->图解Go语言内存分配<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%9B%BE%E8%A7%A3Go%E8%BF%90%E8%A1%8C%E6%97%B6%E8%B0%83%E5%BA%A6%E5%99%A8.html" aria-label="图解Go运行时调度器"><!---->图解Go运行时调度器<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%A6%82%E4%BD%95%E5%AE%9A%E4%BD%8D-golang-%E8%BF%9B%E7%A8%8B-hang-%E6%AD%BB%E7%9A%84-bug.html" aria-label="如何定位 golang 进程 hang 死的 bug"><!---->如何定位 golang 进程 hang 死的 bug<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%AE%9E%E6%88%98Go%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2.html" aria-label="实战Go内存泄露"><!---->实战Go内存泄露<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E5%BC%84%E6%87%82goroutine%E8%B0%83%E5%BA%A6%E5%8E%9F%E7%90%86.html" aria-label="弄懂goroutine调度原理"><!---->弄懂goroutine调度原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%8C%87%E4%BB%A4%E9%9B%86%E6%9E%B6%E6%9E%84%E3%80%81%E6%9C%BA%E5%99%A8%E7%A0%81%E4%B8%8E-Go-%E8%AF%AD%E8%A8%80.html" aria-label="指令集架构、机器码与 Go 语言"><!---->指令集架构、机器码与 Go 语言<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B5%85%E8%B0%88-Go-%E8%AF%AD%E8%A8%80-select-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.html" aria-label="浅谈 Go 语言 select 的实现原理"><!---->浅谈 Go 语言 select 的实现原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-sync.RWMutex%EF%BC%9A%E8%A7%A3%E5%86%B3%E8%AF%BB%E8%80%85-%E5%86%99%E8%80%85%E9%97%AE%E9%A2%98.html" aria-label="深入理解 sync.RWMutex：解决读者-写者问题"><!---->深入理解 sync.RWMutex：解决读者-写者问题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3channel%EF%BC%9A%E8%AE%BE%E8%AE%A1_%E6%BA%90%E7%A0%81.html" aria-label="深入理解channel：设计+源码"><!---->深入理解channel：设计+源码<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go-1.9-sync.Map.html" aria-label="深入理解Go 1.9 sync.Map"><!---->深入理解Go 1.9 sync.Map<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go-runtime.SetFinalizer%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html" aria-label="深入理解Go-runtime.SetFinalizer原理剖析"><!---->深入理解Go-runtime.SetFinalizer原理剖析<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Go-sync.Map%E5%8E%9F%E7%90%86%E5%89%96%E6%9E%90.html" aria-label="深入理解Go-sync.Map原理剖析"><!---->深入理解Go-sync.Map原理剖析<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90-Go-%E4%B8%AD-Slice-%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0.html" aria-label="深入解析 Go 中 Slice 底层实现"><!---->深入解析 Go 中 Slice 底层实现<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%AF%86Go%E8%AF%AD%E8%A8%80%E4%B9%8B-scheduler.html" aria-label="深度解密Go语言之 scheduler"><!---->深度解密Go语言之 scheduler<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%AF%86Go%E8%AF%AD%E8%A8%80%E4%B9%8Bmap.html" aria-label="深度解密Go语言之map"><!---->深度解密Go语言之map<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%AF%86Go%E8%AF%AD%E8%A8%80%E4%B9%8BSlice.html" aria-label="深度解密Go语言之Slice"><!---->深度解密Go语言之Slice<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%AF%86Go%E8%AF%AD%E8%A8%80%E4%B9%8B%E5%85%B3%E4%BA%8E-interface-%E7%9A%84-10-%E4%B8%AA%E9%97%AE%E9%A2%98.html" aria-label="深度解密Go语言之关于 interface 的 10 个问题"><!---->深度解密Go语言之关于 interface 的 10 个问题<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%AF%86Go%E8%AF%AD%E8%A8%80%E4%B9%8B%E5%8F%8D%E5%B0%84.html" aria-label="深度解密Go语言之反射"><!---->深度解密Go语言之反射<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90golang%E4%B8%ADsync.Mutex.html" aria-label="源码剖析golang中sync.Mutex"><!---->源码剖析golang中sync.Mutex<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E7%90%86%E8%A7%A3-Golang-%E4%B8%AD%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8%E7%9A%84%E5%8E%9F%E7%90%86.html" aria-label="理解 Golang 中函数调用的原理"><!---->理解 Golang 中函数调用的原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E7%90%86%E8%A7%A3-Golang-%E5%93%88%E5%B8%8C%E8%A1%A8-Map-%E7%9A%84%E5%8E%9F%E7%90%86.html" aria-label="理解 Golang 哈希表 Map 的原理"><!---->理解 Golang 哈希表 Map 的原理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E7%94%A8-GODEBUG-%E7%9C%8B%E8%B0%83%E5%BA%A6%E8%B7%9F%E8%B8%AA.html" aria-label="用 GODEBUG 看调度跟踪"><!---->用 GODEBUG 看调度跟踪<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E8%A7%A3%E5%89%96Go%E8%AF%AD%E8%A8%80map%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0.html" aria-label="解剖Go语言map底层实现"><!---->解剖Go语言map底层实现<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E8%A7%A3%E6%9E%90%E5%99%A8%E7%9C%BC%E4%B8%AD%E7%9A%84-Go-%E8%AF%AD%E8%A8%80.html" aria-label="解析器眼中的 Go 语言"><!---->解析器眼中的 Go 语言<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E8%AE%B0%E4%B8%80%E6%AC%A1%E8%8E%B7%E5%BE%973%E5%80%8D%E6%80%A7%E8%83%BD%E7%9A%84go%E7%A8%8B%E5%BA%8F%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5%EF%BC%8C%E5%8F%8Aon-cpu-off-cpu%E7%81%AB%E7%84%B0%E5%9B%BE%E7%9A%84%E4%BD%BF%E7%94%A8.html" aria-label="记一次获得3倍性能的go程序优化实践，及on-cpu/off-cpu火焰图的使用"><!---->记一次获得3倍性能的go程序优化实践，及on-cpu/off-cpu火焰图的使用<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E8%AF%A6%E5%B0%BD%E5%B9%B2%E8%B4%A7%EF%BC%81%E4%BB%8E%E6%BA%90%E7%A0%81%E8%A7%92%E5%BA%A6%E7%9C%8B-Golang-%E7%9A%84%E8%B0%83%E5%BA%A6.html" aria-label="详尽干货！从源码角度看 Golang 的调度"><!---->详尽干货！从源码角度看 Golang 的调度<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E8%AF%A6%E8%A7%A3-Golang-%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90.html" aria-label="详解 Golang 中间代码生成"><!---->详解 Golang 中间代码生成<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E8%AF%A6%E8%A7%A3Go%E8%AF%AD%E8%A8%80%E7%9A%84%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%E5%8F%8A%E5%A0%86%E7%9A%84%E5%88%86%E9%85%8D%E7%AE%A1%E7%90%86.html" aria-label="详解Go语言的内存模型及堆的分配管理"><!---->详解Go语言的内存模型及堆的分配管理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E8%B0%88-Golang-%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%92%8C%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%84.html" aria-label="谈 Golang 中的字符串和字节数组"><!---->谈 Golang 中的字符串和字节数组<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E9%80%9A%E8%BF%87-profiling-%E5%AE%9A%E4%BD%8D-golang-%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98---%E5%86%85%E5%AD%98%E7%AF%87.html" aria-label="通过 profiling 定位 golang 性能问题 - 内存篇"><!---->通过 profiling 定位 golang 性能问题 - 内存篇<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span><span class="vp-sidebar-title">标准库</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-eraser" style=""></span><span class="vp-sidebar-title">基础</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="icon" src="/vuepress-app/assets/icon/up.png" alt aria-hidden no-view style=""><span class="vp-sidebar-title">进阶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">面试</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->深度解密Go语言之 scheduler</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://savvygo.cn" target="_blank" rel="noopener noreferrer">Cospk</a></span><span property="author" content="Cospk"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2025年8月26日</span><meta property="datePublished" content="2025-08-26T10:06:47.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 23 分钟</span><meta property="timeRequired" content="PT23M"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color2" role>Go原理教程</span><!--]--><meta property="articleSection" content="Go原理教程"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#os-scheduler">os scheduler</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#线程切换">线程切换</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#函数调用过程分析">函数调用过程分析</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#什么是-goroutine">什么是 goroutine</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#goroutine-和-thread-的区别">goroutine 和 thread 的区别</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#m-n-模型">M:N 模型</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#总览">总览</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#goroutine-调度时机">goroutine 调度时机</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#work-stealing">work stealing</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#同步-异步系统调用">同步/异步系统调用</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#scheduler-的陷阱">scheduler 的陷阱</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!----></aside></div><!----><div class="theme-hope-content" vp-content><p>好久不见，你还好吗？距离上一篇文章已经过去了一个多月了，迟迟未更新文章，我也很着急啊。</p><p>跟大家汇报一下，这段时间我在看 <code>proc.go</code> 的源码，其实就是调度器的源码。代码有几千行之多，不像以往的 map，channel 等等。想把这些代码都看明白，是一个庞大的工程。到今天为止，我也不敢说我都看明白了。</p><p>要深挖下去的话，会无穷无尽，所以阶段性的探索就到这里。接下来就把这段时间的探索分享出来。</p><p>其实，今天这篇文章仅仅算是一个引子，接下来会连续发布十篇系列文章。目录如下：</p><figure><img src="https://static.studygolang.com/190902/4eed86fd1edd43bcffad9201517dfe91.png" alt="系列文章目录" tabindex="0" loading="lazy"><figcaption>系列文章目录</figcaption></figure><p>而这个系列的文章主要是受公众号“go 语言核心编程技术”的启发，它有一个 Go 调度器的系列教程，写得非常赞，强烈推荐大家去看，后面会经常引用到它的文章。我忍不住在这贴上公众号的二维码，一定要去关注啊。这是我在找资料的过程中发现的一个宝藏，本来想私藏着，但是好东西还是要分享给大家，不能固步自封。</p><figure><img src="https://static.studygolang.com/190902/602ba900990f28ad4fa14e035b867983.png" alt="Go 语言核心编程技术" tabindex="0" loading="lazy"><figcaption>Go 语言核心编程技术</figcaption></figure><p>开始我们今天的正题。</p><p>一个月前，《Go 语言高级编程》作者柴树杉老师在 CSDN 上发表了一篇《Go 语言十年而立，Go2 蓄势待发》，视角十分宏大。我们既要低头看路，有时也要抬头看天，这篇文章就属于“抬头”看天类的，推荐阅读。</p><p>文章中提到了第一本写 Go 的小说《胡文 Go》。我找来看了下，嬉笑怒骂，还挺有意思的。书中有这样一句话：</p><blockquote><p>在 Go 语言里，go func 是并发的单元，chan 是协调并发单元的机制，panic 和 recover 是出错处理的机制，而 defer 是神来之笔，大大简化了出错的管理。</p></blockquote><p>Goroutines 在同一个用户空间里同时独立执行 functions，channels 则用于 goroutines 间的通信和同步访问控制。</p><p>上一篇文章里我们讲了 channel，并且提到，goroutine 和 channel 是 Go 并发编程的两大基石，那这篇文章就聚焦到 goroutine，以及调度 goroutine 的 go scheduler。</p><h1 id="前置知识" tabindex="-1"><a class="header-anchor" href="#前置知识"><span>前置知识</span></a></h1><h2 id="os-scheduler" tabindex="-1"><a class="header-anchor" href="#os-scheduler"><span>os scheduler</span></a></h2><p>从操作系统角度看，我们写的程序最终都会转换成一系列的机器指令，机器只要按顺序执行完所有的指令就算完成了任务。完成“按顺序执行指令”任务的实体就是线程，也就是说，线程是 CPU 调度的实体，线程是真正在 CPU 上执行指令的实体。</p><p>每个程序启动的时候，都会创建一个初始进程，并且启动一个线程。而线程可以去创建更多的线程，这些线程可以独立地执行，CPU 在这一层进行调度，而非进程。</p><p>OS scheduler 保证如果有可以执行的线程时，就不会让 CPU 闲着。并且它还要保证，所有可执行的线程都看起来在同时执行。另外，OS scheduler 在保证高优先级的线程执行机会大于低优先级线程的同时，不能让低优先级的线程始终得不到执行的机会。OS scheduler 还需要做到迅速决策，以降低延时。</p><h2 id="线程切换" tabindex="-1"><a class="header-anchor" href="#线程切换"><span>线程切换</span></a></h2><p>OS scheduler 调度线程的依据就是它的状态，线程有三种状态（简化模型）：<code>Waiting</code>, <code>Runnable</code> or <code>Executing</code>。</p><p>状态</p><p>解释</p><p>Waiting</p><p>等待状态。线程在等待某件事的发生。例如等待网络数据、硬盘；调用操作系统 API；等待内存同步访问条件 ready，如 atomic, mutexes</p><p>Runnable</p><p>就绪状态。只要给 CPU 资源我就能运行</p><p>Executing</p><p>运行状态。线程在执行指令，这是我们想要的</p><p>线程能做的事一般分为两种：计算型、IO 型。</p><p>计算型主要是占用 CPU 资源，一直在做计算任务，例如对一个大数做质数分解。这种类型的任务不会让线程跳到 Waiting 状态。</p><p>IO 型则是要获取外界资源，例如通过网络、系统调用等方式。内存同步访问控制原语：mutexes 也可以看作这种类型。共同特点是需要等待外界资源就绪。IO 型的任务会让线程跳到 Waiting 状态。</p><p>线程切换就是操作系统用一个处于 Runnable 的线程将 CPU 上正在运行的处于 Executing 状态的线程换下来的过程。新上场的线程会变成 Executing 状态，而下场的线程则可能变成 Waiting 或 Runnable 状态。正在做计算型任务的线程，会变成 Runnable 状态；正在做 IO 型任务的线程，则会变成 Waiting 状态。</p><p>因此，计算密集型任务和 IO 密集型任务对线程切换的“态度”是不一样的。由于计算型密集型任务一直都有任务要做，或者说它一直有指令要执行，线程切换的过程会让它停掉当前的任务，损失非常大。</p><p>相反，专注于 IO 密集型的任务的线程，如果它因为某个操作而跳到 Waiting 状态，那么把它从 CPU 上换下，对它而言是没有影响的。而且，新换上来的线程可以继续利用 CPU 完成任务。从整个操作系统来看，“工作进度”是往前的。</p><p>记住，对于 OS scheduler 来说，最重要的是不要让一个 CPU 核心闲着，尽量让每个 CPU 核心都有任务可做。</p><blockquote><p>If you have a program that is focused on IO-Bound work, then context switches are going to be an advantage. Once a Thread moves into a Waiting state, another Thread in a Runnable state is there to take its place. This allows the core to always be doing work. This is one of the most important aspects of scheduling. Don’t allow a core to go idle if there is work (Threads in a Runnable state) to be done.</p></blockquote><h2 id="函数调用过程分析" tabindex="-1"><a class="header-anchor" href="#函数调用过程分析"><span>函数调用过程分析</span></a></h2><p>要想���解 Go scheduler 的底层原理，对于函数调用过程的理解是必不可少的。它涉��到函数参数的传递，CPU 的指令跳转，函数返回值的传递等等。这需要对汇编语言有一定的了解，因为只有汇编语言才能进行像寄存器赋值这样的底层操作。之前的一些文章里也有说明，这里再来复习一遍。</p><blockquote><p>函数栈帧的空间主要由函数参数和返回值、局部变量和被调用其它函数的参数和返回值空间组成。</p></blockquote><p>宏观看一下，Go 语言中函数调用的规范，引用曹大博客里的一张图：</p><figure><img src="https://static.studygolang.com/190902/4aaa622ddaf65135097530cb607710c9.png" alt="曹大 asmshare 函数调用规范" tabindex="0" loading="lazy"><figcaption>曹大 asmshare 函数调用规范</figcaption></figure><p>Go plan9 汇编通过栈传递函数参数和返回值。</p><p>调用子函数时，先将参数在栈顶准备好，再执行 CALL 指令。CALL 指令会将 IP 寄存器的值压栈，这个值就是函数调用完成后即将执行的下一条指令。</p><p>然后，就会进入被调用者的栈帧。首先会将 caller BP 压栈，这表示栈基址，也就是栈底。栈顶和栈基址定义函数的栈帧。</p><blockquote><p>CALL 指令类似 PUSH IP 和 JMP somefunc 两个指令的组合，首先将当前的 IP 指令寄存器的值压入栈中，然后通过 JMP 指令将要调用函数的地址写入到 IP 寄存器实现跳转。</p></blockquote><blockquote><p>而 RET 指令则是和 CALL 相反的操作，基本和 POP IP 指令等价，也就是将执行 CALL 指令时保存在 SP 中的返回地址重新载入到 IP 寄存器，实现函数的返回。</p></blockquote><blockquote><p>首先是调用函数前准备的输入参数和返回值空间。然后 CALL 指令将首先触发返回地址入栈操作。在进入到被调用函数内之后，汇编器自动插入了 BP 寄存器相关的指令，因此 BP 寄存器和返回地址是紧挨着的。再下面就是当前函数的局部变量的空间，包含再次调用其它函数需要准备的调用参数空间。被调用的函数执行 RET 返回指令时，先从栈恢复 BP 和 SP 寄存器，接着取出的返回地址跳转到对应的指令执行。</p></blockquote><p>上面两段描述来自《Go 语言高级编程》一书的汇编语言章节，说得很好，再次推荐阅读。</p><h1 id="goroutine-是怎么工作的" tabindex="-1"><a class="header-anchor" href="#goroutine-是怎么工作的"><span>goroutine 是怎么工作的</span></a></h1><h2 id="什么是-goroutine" tabindex="-1"><a class="header-anchor" href="#什么是-goroutine"><span>什么是 goroutine</span></a></h2><p>Goroutine 可以看作对 thread 加的一层抽象，它更轻量级，可以单独执行。因为有了这层抽象，Gopher 不会直接面对 thread，我们只会看到代码里满天飞的 goroutine。操作系统却相反，管你什么 goroutine，我才没空理会。我安心地执行线程就可以了，线程才是我调度的基本单位。</p><h2 id="goroutine-和-thread-的区别" tabindex="-1"><a class="header-anchor" href="#goroutine-和-thread-的区别"><span>goroutine 和 thread 的区别</span></a></h2><p>谈到 goroutine，绕不开的一个话题是：它和 thread 有什么区别？</p><p>参考资料【How Goroutines Work】告诉我们可以从三个角度区别：内存消耗、创建与销毀、切换。</p><ul><li>内存占用</li></ul><p>创建一个 goroutine 的栈内存消耗为 2 KB，实际运行过程中，如果栈空间不够用，会自动进行扩容。创建一个 thread 则需要消耗 1 MB 栈内存，而且还需要一个被称为 “a guard page” 的区域用于和其他 thread 的栈空间进行隔离。</p><p>对于一个用 Go 构建的 HTTP Server 而言，对到来的每个请求，创建一个 goroutine 用来处理是非常轻松的一件事。而如果用一个使用线程作为并发原语的语言构建的服务，例如 Java 来说，每个请求对应一个线程则太浪费资源了，很快就会出 OOM 错误（OutOfMermoryError）。</p><ul><li>创建和销毀</li></ul><p>Thread 创建和销毀都会有巨大的消耗，因为要和操作系统打交道，是内核级的，通常解决的办法就是线程池。而 goroutine 因为是由 Go runtime 负责管理的，创建和销毁的消耗非常小，是用户级。</p><ul><li>切换</li></ul><p>当 threads 切换时，需要保存各种寄存器，以便将来恢复：</p><blockquote><p>16 general purpose registers, PC (Program Counter), SP (Stack Pointer), segment registers, 16 XMM registers, FP coprocessor state, 16 AVX registers, all MSRs etc.</p></blockquote><p>而 goroutines 切换只需保存三个寄存器：Program Counter, Stack Pointer and BP。</p><p>一般而言，线程切换会消耗 1000-1500 纳秒，一个纳秒平均可以执行 12-18 条指令。所以由于线程切换，执行指令的条数会减少 12000-18000。</p><p>Goroutine 的切换约为 200 ns，相当于 2400-3600 条指令。</p><p>因此，goroutines 切换成本比 threads 要小得多。</p><h2 id="m-n-模型" tabindex="-1"><a class="header-anchor" href="#m-n-模型"><span>M:N 模型</span></a></h2><p>我们都知道，Go runtime 会负责 goroutine 的生老病死，从创建到销毁，都一手包办。Runtime 会在程序启动的时候，创建 M 个线程（CPU 执行调度的单位），之后创建的 N 个 goroutine 都会依附在这 M 个线程上执行。这就是 M:N 模型：</p><figure><img src="https://static.studygolang.com/190902/11baaef991964b4ec3a121530488cd7e.png" alt="M:N scheduling" tabindex="0" loading="lazy"><figcaption>M:N scheduling</figcaption></figure><p>在同一时刻，一个线程上只能跑一个 goroutine。当 goroutine 发生阻塞（例如上篇文章提到的向一个 channel 发送数据，被阻塞）时，runtime 会把当前 goroutine 调度走，让其他 goroutine 来执行。目的就是不让一个线程闲着，榨干 CPU 的每一滴油水。</p><h1 id="什么是-scheduler" tabindex="-1"><a class="header-anchor" href="#什么是-scheduler"><span>什么是 scheduler</span></a></h1><p>Go 程序的执行由两层组成：Go Program，Runtime，即用户程序和运行时。它们之间通过函数调用来实现内存管理、channel 通信、goroutines 创建等功能。用户程序进行的系统调用都会被 Runtime 拦截，以此来帮助它进行调度以及垃圾回收相关的工作。</p><p>一个展现了全景式的关系如下图：</p><figure><img src="https://static.studygolang.com/190902/68714518eb3b96f7be0dbccc2519b3f7.png" alt="runtime overall" tabindex="0" loading="lazy"><figcaption>runtime overall</figcaption></figure><h1 id="为什么要-scheduler" tabindex="-1"><a class="header-anchor" href="#为什么要-scheduler"><span>为什么要 scheduler</span></a></h1><p>Go scheduler 可以说是 Go 运行时的一个最重要的部分了。Runtime 维护所有的 goroutines，并通过 scheduler 来进行调度。Goroutines 和 threads 是独立的，但是 goroutines 要依赖 threads 才能执行。</p><p>Go 程序执行的高效和 scheduler 的调度是分不开的。</p><h1 id="scheduler-底层原理" tabindex="-1"><a class="header-anchor" href="#scheduler-底层原理"><span>scheduler 底层原理</span></a></h1><p>实际上在操作系统看来，所有的程序都是在执行多线程。将 goroutines 调度到线程上执行，仅仅是 runtime 层面的一个概念，在操作系统之上的层面。</p><p>有三个基础的结构体来实现 goroutines 的调度。g，m，p。</p><p><code>g</code> 代表一个 goroutine，它包含：表示 goroutine 栈的一些字段，指示当前 goroutine 的状态，指示当前运行到的指令地址，也就是 PC 值。</p><p><code>m</code> 表示内核线程，包含正在运行的 goroutine 等字段。</p><p><code>p</code> 代表一个虚拟的 Processor，它维护一个处于 Runnable 状态的 g 队列，<code>m</code> 需要获得 <code>p</code> 才能运行 <code>g</code>。</p><p>当然还有一个核心的结构体：<code>sched</code>，它总览全局。</p><p>Runtime 起始时会启动一些 G：垃圾回收的 G，执行调度的 G，运行用户代码的 G；并且会创建一个 M 用来开始 G 的运行。随着时间的推移，更多的 G 会被创建出来，更多的 M 也会被创建出来。</p><p>当然，在 Go 的早期版本，并没有 p 这个结构体，<code>m</code> 必须从一个全局的队列里获取要运行的 <code>g</code>，因此需要获取一个全局的锁，当并发量大的时候，锁就成了瓶颈。后来在大神 Dmitry Vyokov 的实现里，加上了 <code>p</code> 结构体。每个 <code>p</code> 自己维护一个处于 Runnable 状态的 <code>g</code> 的队列，解决了原来的全局锁问题。</p><p>Go scheduler 的目标：</p><blockquote><p>For scheduling goroutines onto kernel threads.</p></blockquote><figure><img src="https://static.studygolang.com/190902/ff11f4721f1a5972fd04db163be81dc6.png" alt="Go scheduler goals" tabindex="0" loading="lazy"><figcaption>Go scheduler goals</figcaption></figure><p>Go scheduler 的核心思想是：</p><ol><li>reuse threads；</li><li>限制同时运行（不包含阻塞）的线程数为 N，N 等于 CPU 的核心数目；</li><li>线程私有的 runqueues，并且可以从其他线程 stealing goroutine 来运行，线程阻塞后，可以将 runqueues 传递给其他线程。</li></ol><p>为什么需要 P 这个组件，直接把 runqueues 放到 M 不行吗？</p><blockquote><p>You might wonder now, why have contexts at all? Can&#39;t we just put the runqueues on the threads and get rid of contexts? Not really. The reason we have contexts is so that we can hand them off to other threads if the running thread needs to block for some reason.</p></blockquote><blockquote><p>An example of when we need to block, is when we call into a syscall. Since a thread cannot both be executing code and be blocked on a syscall, we need to hand off the context so it can keep scheduling.</p></blockquote><p>翻译一下，当一个线程阻塞的时候，将和它绑定的 P 上的 goroutines 转移到其他线程。</p><p>Go scheduler 会启动一个后台线程 sysmon，用来检测长时间（超过 10 ms）运行的 goroutine，将其调度到 global runqueues。这是一个全局的 runqueue，优先级比较低，以示惩罚。</p><figure><img src="https://static.studygolang.com/190902/ca9760b58b3f37422d93dd4d41c5d436.png" alt="Go scheduler limitations" tabindex="0" loading="lazy"><figcaption>Go scheduler limitations</figcaption></figure><h2 id="总览" tabindex="-1"><a class="header-anchor" href="#总览"><span>总览</span></a></h2><p>通常讲到 Go scheduler 都会提到 GPM 模型，我们来一个个地看。</p><p>下图是我使用的 mac 的硬件信息，只有 2 个核。</p><figure><img src="https://static.studygolang.com/190902/ed2f6ce7cf9c93ea46e414f33dc9b88e.png" alt="mac 硬件信息" tabindex="0" loading="lazy"><figcaption>mac 硬件信息</figcaption></figure><p>但是配上 CPU 的超线程，1 个核可以变成 2 个，所以当我在 mac 上运行下面的程序时，会打印出 4。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>func main() {</span></span>
<span class="line"><span>	// NumCPU 返回当前进程可以用到的逻辑核心数</span></span>
<span class="line"><span>	fmt.Println(runtime.NumCPU())</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>复制代码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>因为 NumCPU 返回的是逻辑核心数，而非物理核心数，所以最终结果是 4。</p><p>Go 程序启动后，会给每个逻辑核心分配一个 P（Logical Processor）；同时，会给每个 P 分配一个 M（Machine，表示内核线程），这些内核线程仍然由 OS scheduler 来调度。</p><p>总结一下，当我在本地启动一个 Go 程序时，会得到 4 个系统线程去执行任务，每个线程会搭配一个 P。</p><p>在初始化时，Go 程序会有一个 G（initial Goroutine），执行指令的单位。G 会在 M 上得到执行，内核线程是在 CPU 核心上调度，而 G 则是在 M 上进行调度。</p><p>G、P、M 都说完了，还有两个比较重要的组件没有提到： 全局可运行队列（GRQ）和本地可运行队列（LRQ）。 LRQ 存储本地（也就是具体的 P）的可运行 goroutine，GRQ 存储全局的可运行 goroutine，这些 goroutine 还没有分配到具体的 P。</p><figure><img src="https://static.studygolang.com/190902/eb0cf1dd27171f63bfb5151784edf9d0.png" alt="GPM global review" tabindex="0" loading="lazy"><figcaption>GPM global review</figcaption></figure><p>Go scheduler 是 Go runtime 的一部分，它内嵌在 Go 程序里，和 Go 程序一起运行。因此它运行在用户空间，在 kernel 的上一层。和 Os scheduler 抢占式调度（preemptive）不一样，Go scheduler 采用协作式调度（cooperating）。</p><blockquote><p>Being a cooperating scheduler means the scheduler needs well-defined user space events that happen at safe points in the code to make scheduling decisions.</p></blockquote><p>协作式调度一般会由用户设置调度点，例如 python 中的 yield 会告诉 Os scheduler 可以将我调度出去了。</p><p>但是由于在 Go 语言里，goroutine 调度的事情是由 Go runtime 来做，并非由用户控制，所以我们依然可以将 Go scheduler 看成是抢占式调度，因为用户无法预测调度器下一步的动作是什么。</p><p>和线程类似，goroutine 的状态也是三种（简化版的）：</p><p>状态</p><p>解释</p><p>Waiting</p><p>等待状态，goroutine 在等待某件事的发生。例如等待网络数据、硬盘；调用操作系统 API；等待内存同步访问条件 ready，如 atomic, mutexes</p><p>Runnable</p><p>就绪状态，只要给 M 我就可以运行</p><p>Executing</p><p>运行状态。goroutine 在 M 上执行指令，这是我们想要的</p><p>下面这张 GPM 全局的运行示意图见得比较多，可以留着，看完后面的系列文章之后再回头来看，还是很有感触的：</p><figure><img src="https://static.studygolang.com/190902/ce62525ce76060abe1bf5756fff4bd0b.png" alt="goroutine workflow" tabindex="0" loading="lazy"><figcaption>goroutine workflow</figcaption></figure><h2 id="goroutine-调度时机" tabindex="-1"><a class="header-anchor" href="#goroutine-调度时机"><span>goroutine 调度时机</span></a></h2><p>在四种情形下，goroutine 可能会发生调度，但也并不一定会发生，只是说 Go scheduler 有机会进行调度。</p><p>情形</p><p>说明</p><p>使用关键字 <code>go</code></p><p>go 创建一个新的 goroutine，Go scheduler 会考虑调度</p><p>GC</p><p>由于进行 GC 的 goroutine 也需要在 M 上运行，因此肯定会发生调度。当然，Go scheduler 还会做很多其他的调度，例如调度不涉及堆访问的 goroutine 来运行。GC 不管栈上的内存，只会回收堆上的内存</p><p>系统调用</p><p>当 goroutine 进行系统调用时，会阻塞 M，所以它会被调度走，同时一个新的 goroutine 会被调度上来</p><p>内存同步访问</p><p>atomic，mutex，channel 操作等会使 goroutine 阻塞，因此会被调度走。等条件满足后（例如其他 goroutine 解锁了）还会被调度上来继续运行</p><h2 id="work-stealing" tabindex="-1"><a class="header-anchor" href="#work-stealing"><span>work stealing</span></a></h2><p>Go scheduler 的职责就是将所有处于 runnable 的 goroutines 均匀分布到在 P 上运行的 M。</p><p>当一个 P 发现自己的 LRQ 已经没有 G 时，会从其他 P “偷” 一些 G 来运行。看看这是什么精神！自己的工作做完了，为了全局的利益，主动为别人分担。这被称为 <code>Work-stealing</code>，Go 从 1.1 开始实现。</p><p>Go scheduler 使用 M:N 模型，在任一时刻，M 个 goroutines（G） 要分配到 N 个内核线程（M），这些 M 跑在个数最多为 GOMAXPROCS 的逻辑处理器（P）上。每个 M 必须依附于一个 P，每个 P 在同一时刻只能运行一个 M。如果 P 上的 M 阻塞了，那它就需要其他的 M 来运行 P 的 LRQ 里的 goroutines。</p><figure><img src="https://static.studygolang.com/190902/cf34a5b466865e37ed5a7166b45bd574.png" alt="GPM relatioship" tabindex="0" loading="lazy"><figcaption>GPM relatioship</figcaption></figure><p>个人感觉，上面这张图比常见的那些用三角形表示 M，圆形表示 G，矩形表示 P 的那些图更生动形象。</p><p>实际上，Go scheduler 每一轮调度要做的工作就是找到处于 runnable 的 goroutines，并执行它。找的顺序如下：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>runtime.schedule() {</span></span>
<span class="line"><span>    // only 1/61 of the time, check the global runnable queue for a G.</span></span>
<span class="line"><span>    // if not found, check the local queue.</span></span>
<span class="line"><span>    // if not found,</span></span>
<span class="line"><span>    //     try to steal from other Ps.</span></span>
<span class="line"><span>    //     if not, check the global runnable queue.</span></span>
<span class="line"><span>    //     if not found, poll network.</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>复制代码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>找到一个可执行的 goroutine 后，就会一直执行下去，直到被阻塞。</p><p>当 P2 上的一个 G 执行结束，它就会去 LRQ 获取下一个 G 来执行。如果 LRQ 已经空了，就是说本地可运行队列已经没有 G 需要执行，并且这时 GRQ 也没有 G 了。这时，P2 会随机选择一个 P（称为 P1），P2 会从 P1 的 LRQ “偷”过来一半的 G。</p><figure><img src="https://static.studygolang.com/190902/241ac4dc79a77ac90fc33291743b140d.png" alt="Work Stealing" tabindex="0" loading="lazy"><figcaption>Work Stealing</figcaption></figure><p>这样做的好处是，有更多的 P 可以一起工作，加速执行完所有的 G。</p><h2 id="同步-异步系统调用" tabindex="-1"><a class="header-anchor" href="#同步-异步系统调用"><span>同步/异步系统调用</span></a></h2><p>当 G 需要进行系统调用时，根据调用的类型，它所依附的 M 有两种情况：<code>同步</code>和<code>异步</code>。</p><p>对于同步的情况，M 会被阻塞，进而从 P 上调度下来，P 可不养闲人，G 仍然依附于 M。之后，一个新的 M 会被调用到 P 上，接着执行 P 的 LRQ 里嗷嗷待哺的 G 们。一旦系统调用完成，G 还会加入到 P 的 LRQ 里，M 则会被“雪藏”，待到需要时再“放”出来。</p><figure><img src="https://static.studygolang.com/190902/57f09f1cedfb353c242e95530433bc7e.png" alt="同步系统调用" tabindex="0" loading="lazy"><figcaption>同步系统调用</figcaption></figure><p>对于异步的情况，M 不会被阻塞，G 的异步请求会被“代理人” network poller 接手，G 也会被绑定到 network poller，等到系统调用结束，G 才会重新回到 P 上。M 由于没被阻塞，它因此可以继续执行 LRQ 里的其他 G。</p><figure><img src="https://static.studygolang.com/190902/7daa57ae26866156db45164aa08bbff4.png" alt="异步系统调用" tabindex="0" loading="lazy"><figcaption>异步系统调用</figcaption></figure><p>可以看到，异步情况下，通过调度，Go scheduler 成功地将 I/O 的任务转变成了 CPU 任务，或者说将内核级别的线程切换转变成了用户级别的 goroutine 切换，大大提高了效率。</p><blockquote><p>The ability to turn IO/Blocking work into CPU-bound work at the OS level is where we get a big win in leveraging more CPU capacity over time.</p></blockquote><p>Go scheduler 像一个非常苛刻的监工一样，不会让一个 M 闲着，总是会通过各种办法让你干更多的事。</p><blockquote><p>In Go, it’s possible to get more work done, over time, because the Go scheduler attempts to use less Threads and do more on each Thread, which helps to reduce load on the OS and the hardware.</p></blockquote><h2 id="scheduler-的陷阱" tabindex="-1"><a class="header-anchor" href="#scheduler-的陷阱"><span>scheduler 的陷阱</span></a></h2><p>由于 Go 语言是协作式的调度，不会像线程那样，在时间片用完后，由 CPU 中断任务强行将其调度走。对于 Go 语言中运行时间过长的 goroutine，Go scheduler 有一个后台线程在持续监控，一旦发现 goroutine 运行超过 10 ms，会设置 goroutine 的“抢占标志位”，之后调度器会处理。但是设置标志位的时机只有在函数“序言”部分，对于没有函数调用的就没有办法了。</p><blockquote><p>Golang implements a co-operative partially preemptive scheduler.</p></blockquote><p>所以在某些极端情况下，会掉进一些陷阱。下面这个例子来自参考资料【scheduler 的陷阱】。</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>func main() {</span></span>
<span class="line"><span>	var x int</span></span>
<span class="line"><span>	threads := runtime.GOMAXPROCS(0)</span></span>
<span class="line"><span>	for i := 0; i &lt; threads; i++ {</span></span>
<span class="line"><span>		go func() {</span></span>
<span class="line"><span>			for { x++ }</span></span>
<span class="line"><span>		}()</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>	time.Sleep(time.Second)</span></span>
<span class="line"><span>	fmt.Println(&quot;x =&quot;, x)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>复制代码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果是：在死循环里出不来，不会输出最后的那条打印语句。</p><p>为什么？上面的例子会启动和机器的 CPU 核心数相等的 goroutine，每个 goroutine 都会执行一个无限循环。</p><p>创建完这些 goroutines 后，main 函数里执行一条 <code>time.Sleep(time.Second)</code> 语句。Go scheduler 看到这条语句后，简直高兴坏了，要来活了。这是调度的好时机啊，于是主 goroutine 被调度走。先前创建的 <code>threads</code> 个 goroutines，刚好“一个萝卜一个坑”，把 M 和 P 都占满了。</p><p>在这些 goroutine 内部，又没有调用一些诸如 <code>channel</code>，<code>time.sleep</code> 这些会引发调度器工作的事情。麻烦了，只能任由这些无限循环执行下去了。</p><p>解决的办法也有，把 threads 减小 1：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>func main() {</span></span>
<span class="line"><span>	var x int</span></span>
<span class="line"><span>	threads := runtime.GOMAXPROCS(0) - 1</span></span>
<span class="line"><span>	for i := 0; i &lt; threads; i++ {</span></span>
<span class="line"><span>		go func() {</span></span>
<span class="line"><span>			for { x++ }</span></span>
<span class="line"><span>		}()</span></span>
<span class="line"><span>	}</span></span>
<span class="line"><span>	time.Sleep(time.Second)</span></span>
<span class="line"><span>	fmt.Println(&quot;x =&quot;, x)</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span>复制代码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行结果：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>x = 0</span></span>
<span class="line"><span>复制代码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>不难理解了吧，主 goroutine 休眠一秒后，被 go schduler 重新唤醒，调度到 M 上继续执行，打印一行语句后，退出。主 goroutine 退出后，其他所有的 goroutine 都必须跟着退出。所谓“覆巢之下 焉有完卵”，一损俱损。</p><p>至于为什么最后打印出的 x 为 0，之前的文章<a href="https://link.juejin.im?target=https%3A%2F%2Fqcrao.com%2F2019%2F06%2F17%2Fcch-says-memory-reorder%2F" target="_blank" rel="noopener noreferrer">《曹大谈内存重排》</a>里有讲到过，这里不再深究了。</p><p>还有一种解决办法是在 for 循环里加一句：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>go func() {</span></span>
<span class="line"><span>	time.Sleep(time.Second)</span></span>
<span class="line"><span>	for { x++ }</span></span>
<span class="line"><span>}()</span></span>
<span class="line"><span>复制代码</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>同样可以让 main goroutine 有机会调度执行。</p><h1 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h1><p>这篇文章，从宏观角度来看 Go 调度器，讲到了很多方面。接下来连续的 10 篇文章，我会深入源码，层层解析。敬请期待！</p><p>参考资料里有很多篇英文博客写得很好，当你掌握了基本原理后，看这些文章会有一种熟悉的感觉，讲得真好！</p><h1 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h1><p>【知乎回答，怎样理解阻塞非阻塞与同步异步的区别】？<a href="https://link.juejin.im?target=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F19732473%2Fanswer%2F241673170" target="_blank" rel="noopener noreferrer">www.zhihu.com/question/19…</a></p><p>【从零开始学架构 Reactor与Proactor】<a href="https://link.juejin.im?target=https%3A%2F%2Fbook.douban.com%2Fsubject%2F30335935%2F" target="_blank" rel="noopener noreferrer">book.douban.com/subject/303…</a></p><p>【思否上 goalng 排名第二的大佬译文】<a href="https://link.juejin.im?target=https%3A%2F%2Fsegmentfault.com%2Fa%2F1190000016038785" target="_blank" rel="noopener noreferrer">segmentfault.com/a/119000001…</a></p><p>【ardan labs】<a href="https://link.juejin.im?target=https%3A%2F%2Fwww.ardanlabs.com%2Fblog%2F2018%2F08%2Fscheduling-in-go-part1.html" target="_blank" rel="noopener noreferrer">www.ardanlabs.com/blog/2018/0…</a></p><p>【论文 Analysis of the Go runtime scheduler】<a href="https://link.juejin.im?target=http%3A%2F%2Fwww.cs.columbia.edu%2F~aho%2Fcs6998%2Freports%2F12-12-11_DeshpandeSponslerWeiss_GO.pdf" target="_blank" rel="noopener noreferrer">www.cs.columbia.edu/~aho/cs6998…</a></p><p>【译文传播很广的】<a href="https://link.juejin.im?target=https%3A%2F%2Fmorsmachine.dk%2Fgo-scheduler" target="_blank" rel="noopener noreferrer">morsmachine.dk/go-schedule…</a></p><p>【码农翻身文章】<a href="https://link.juejin.im?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBV25ngvWgbO3_yMK7eHhew" target="_blank" rel="noopener noreferrer">mp.weixin.qq.com/s/BV25ngvWg…</a></p><p>【goroutine 资料合集】<a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fardanlabs%2Fgotraining%2Ftree%2Fmaster%2Ftopics%2Fgo%2Fconcurrency%2Fgoroutines" target="_blank" rel="noopener noreferrer">github.com/ardanlabs/g…</a></p><p>【大彬调度器系列文章】<a href="https://link.juejin.im?target=http%3A%2F%2Flessisbetter.site%2F2019%2F03%2F10%2Fgolang-scheduler-1-history%2F" target="_blank" rel="noopener noreferrer">lessisbetter.site/2019/03/10/…</a></p><p>【Scalable scheduler design doc 2012】<a href="https://link.juejin.im?target=https%3A%2F%2Fdocs.google.com%2Fdocument%2Fd%2F1TTj4T2JO42uD5ID9e89oa0sLKhJYD0Y_kqxDv3I3XMw%2Fedit%23heading%3Dh.rvfa6uqbq68u" target="_blank" rel="noopener noreferrer">docs.google.com/document/d/…</a></p><p>【Go scheduler blog post】<a href="https://link.juejin.im?target=https%3A%2F%2Fmorsmachine.dk%2Fgo-scheduler" target="_blank" rel="noopener noreferrer">morsmachine.dk/go-schedule…</a></p><p>【work stealing】<a href="https://link.juejin.im?target=https%3A%2F%2Frakyll.org%2Fscheduler%2F" target="_blank" rel="noopener noreferrer">rakyll.org/scheduler/</a></p><p>【Tony Bai 也谈goroutine调度器】<a href="https://link.juejin.im?target=https%3A%2F%2Ftonybai.com%2F2017%2F06%2F23%2Fan-intro-about-goroutine-scheduler%2F" target="_blank" rel="noopener noreferrer">tonybai.com/2017/06/23/…</a></p><p>【Tony Bai 调试实例分析】<a href="https://link.juejin.im?target=https%3A%2F%2Ftonybai.com%2F2017%2F11%2F23%2Fthe-simple-analysis-of-goroutine-schedule-examples%2F" target="_blank" rel="noopener noreferrer">tonybai.com/2017/11/23/…</a></p><p>【Tony Bai goroutine 是如何工作的】<a href="https://link.juejin.im?target=https%3A%2F%2Ftonybai.com%2F2014%2F11%2F15%2Fhow-goroutines-work%2F" target="_blank" rel="noopener noreferrer">tonybai.com/2014/11/15/…</a></p><p>【How Goroutines Work】<a href="https://link.juejin.im?target=https%3A%2F%2Fblog.nindalf.com%2Fposts%2Fhow-goroutines-work%2F" target="_blank" rel="noopener noreferrer">blog.nindalf.com/posts/how-g…</a></p><p>【知乎回答 什么是阻塞，非阻塞，同步，异步？】<a href="https://link.juejin.im?target=https%3A%2F%2Fwww.zhihu.com%2Fquestion%2F26393784%2Fanswer%2F328707302" target="_blank" rel="noopener noreferrer">www.zhihu.com/question/26…</a></p><p>【知乎文章 完全理解同步/异步与阻塞/非阻塞】<a href="https://link.juejin.im?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F22707398" target="_blank" rel="noopener noreferrer">zhuanlan.zhihu.com/p/22707398</a></p><p>【The Go netpoller】<a href="https://link.juejin.im?target=https%3A%2F%2Fmorsmachine.dk%2Fnetpoller" target="_blank" rel="noopener noreferrer">morsmachine.dk/netpoller</a></p><p>【知乎专栏 Head First of Golang Scheduler】<a href="https://link.juejin.im?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F42057783" target="_blank" rel="noopener noreferrer">zhuanlan.zhihu.com/p/42057783</a></p><p>【鸟窝 五种 IO 模型】<a href="https://link.juejin.im?target=https%3A%2F%2Fcolobu.com%2F2019%2F07%2F26%2FIO-models%2F" target="_blank" rel="noopener noreferrer">colobu.com/2019/07/26/…</a></p><p>【Go Runtime Scheduler】<a href="https://link.juejin.im?target=https%3A%2F%2Fspeakerdeck.com%2Fretervision%2Fgo-runtime-scheduler%3Fslide%3D32" target="_blank" rel="noopener noreferrer">speakerdeck.com/retervision…</a></p><p>【go-scheduler】<a href="https://link.juejin.im?target=https%3A%2F%2Fpovilasv.me%2Fgo-scheduler%2F%23" target="_blank" rel="noopener noreferrer">povilasv.me/go-schedule…</a></p><p>【追踪 scheduler】<a href="https://link.juejin.im?target=https%3A%2F%2Fwww.ardanlabs.com%2Fblog%2F2015%2F02%2Fscheduler-tracing-in-go.html" target="_blank" rel="noopener noreferrer">www.ardanlabs.com/blog/2015/0…</a></p><p>【go tool trace 使用】<a href="https://link.juejin.im?target=https%3A%2F%2Fmaking.pusher.com%2Fgo-tool-trace%2F" target="_blank" rel="noopener noreferrer">making.pusher.com/go-tool-tra…</a></p><p>【goroutine 之旅】<a href="https://link.juejin.im?target=https%3A%2F%2Fmedium.com%2F%40riteeksrivastava%2Fa-complete-journey-with-goroutines-8472630c7f5c" target="_blank" rel="noopener noreferrer">medium.com/@riteeksriv…</a></p><p>【介绍 concurreny 和 parallelism 区别的视频】<a href="https://link.juejin.im?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DcN_DpYBzKso%26amp%3Bt%3D422s" target="_blank" rel="noopener noreferrer">www.youtube.com/watch?v=cN_…</a></p><p>【scheduler 的陷阱】<a href="https://link.juejin.im?target=http%3A%2F%2Fwww.sarathlakshman.com%2F2016%2F06%2F15%2Fpitfall-of-golang-scheduler" target="_blank" rel="noopener noreferrer">www.sarathlakshman.com/2016/06/15/…</a></p><p>【boya 源码阅读】<a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fzboya%2Fgolang_runtime_reading%2Fblob%2Fmaster%2Fsrc%2Fruntime%2Fproc.go" target="_blank" rel="noopener noreferrer">github.com/zboya/golan…</a></p><p>【阿波张调度器系列教程】<a href="https://link.juejin.im?target=http%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fhomepage%3F__biz%3DMzU1OTg5NDkzOA%3D%3D%26amp%3Bhid%3D1%26amp%3Bsn%3D8fc2b63f53559bc0cee292ce629c4788%26amp%3Bscene%3D18%23wechat_redirect" target="_blank" rel="noopener noreferrer">mp.weixin.qq.com/mp/homepage…</a></p><p>【曹大 asmshare】<a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fcch123%2Fasmshare%2Fblob%2Fmaster%2Flayout.md" target="_blank" rel="noopener noreferrer">github.com/cch123/asms…</a></p><p>【Go调度器介绍和容易忽视的问题】<a href="https://link.juejin.im?target=https%3A%2F%2Fwww.cnblogs.com%2FCodeWithTxT%2Fp%2F11370215.html" target="_blank" rel="noopener noreferrer">www.cnblogs.com/CodeWithTxT…</a></p><p>【最近发现的一位大佬的源码分析】<a href="https://link.juejin.im?target=https%3A%2F%2Fgithub.com%2Fchangkun%2Fgo-under-the-hood%2Fblob%2Fmaster%2Fbook%2Fzh-cn%2FTOC.md" target="_blank" rel="noopener noreferrer">github.com/changkun/go…</a></p><hr><p>有疑问加站长微信联系（非本文作者）</p><figure><img src="https://static.golangjob.cn/static/img/footer.png?imageView2/2/w/280" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure></div><!----><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/Cospk/edit/main/src/golang/原理/theory/深度解密Go语言之-scheduler.md" aria-label="在 GitHub 上编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->在 GitHub 上编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/8/27 12:02:38</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: xie@gmail.com">shiwei</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90-Go-%E4%B8%AD-Slice-%E5%BA%95%E5%B1%82%E5%AE%9E%E7%8E%B0.html" aria-label="深入解析 Go 中 Slice 底层实现"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->深入解析 Go 中 Slice 底层实现</div></a><a class="route-link auto-link next" href="/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/%E6%B7%B1%E5%BA%A6%E8%A7%A3%E5%AF%86Go%E8%AF%AD%E8%A8%80%E4%B9%8Bmap.html" aria-label="深度解密Go语言之map"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">深度解密Go语言之map<!----></div></a></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">默认页脚</div><div class="vp-copyright">Copyright © 2025 Cospk </div></footer></div><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/vuepress-app/assets/app-DIJDtupu.js" defer></script>
  </body>
</html>
