import{u as G,j as le,m as ae,p as P,q as te,v as se,x as Ee,y as re,l as x,z as f,A as oe,w as U,k as a,B as ne,R as T,C as ie,D as ue,E as me,G as ge,H as he,I as Be,J as de,K as ce,L as Ae,M as k,N as ve,O as ye,P as Fe,Q as I,S as j,T as pe}from"./app-KVrsFCVP.js";const we=["/","/portfolio.html","/%E5%A5%BD%E7%89%A9%E5%88%86%E4%BA%AB.html","/computer/0.%E7%AE%97%E6%B3%95.html","/computer/1.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html","/demo/","/demo/disable.html","/demo/encrypt.html","/demo/layout.html","/demo/markdown.html","/demo/page.html","/guide/","/computer/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","/computer/%E7%BD%91%E7%BB%9C/","/framework/%E5%88%86%E5%B8%83%E5%BC%8F/","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Consul.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Docker.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/GRPC.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Jaeger.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Kong.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Kubernetes.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Nacos.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Sentinel.html","/framework/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8/","/framework/%E9%AB%98%E5%8F%AF%E7%94%A8/","/golang/Gorm%E6%A1%86%E6%9E%B6/0.use.html","/golang/Gorm%E6%A1%86%E6%9E%B6/1.howWork.html","/golang/Gorm%E6%A1%86%E6%9E%B6/","/golang/web%E6%A1%86%E6%9E%B6/","/golang/%E5%8E%9F%E7%90%86/","/golang/%E5%8E%9F%E7%90%86/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html","/golang/%E5%9F%BA%E7%A1%80/0.golang.html","/golang/%E5%9F%BA%E7%A1%80/1.grammer.html","/golang/%E5%9F%BA%E7%A1%80/2.datatype.html","/golang/%E5%9F%BA%E7%A1%80/3.variable.html","/golang/%E5%9F%BA%E7%A1%80/4.io.html","/golang/%E5%9F%BA%E7%A1%80/5.condition.html","/golang/%E5%9F%BA%E7%A1%80/6.data_structures.html","/golang/%E5%9F%BA%E7%A1%80/","/golang/%E8%BF%9B%E9%98%B6/1.interface.html","/golang/%E8%BF%9B%E9%98%B6/10.cgo.html","/golang/%E8%BF%9B%E9%98%B6/11.pprof.html","/golang/%E8%BF%9B%E9%98%B6/12.followUp.html","/golang/%E8%BF%9B%E9%98%B6/2.generic.html","/golang/%E8%BF%9B%E9%98%B6/3.reflect.html","/golang/%E8%BF%9B%E9%98%B6/4.types.html","/golang/%E8%BF%9B%E9%98%B6/5.error.html","/golang/%E8%BF%9B%E9%98%B6/6.file.html","/golang/%E8%BF%9B%E9%98%B6/7.concurrency.html","/golang/%E8%BF%9B%E9%98%B6/8.module.html","/golang/%E8%BF%9B%E9%98%B6/9.test.html","/golang/%E8%BF%9B%E9%98%B6/","/golang/%E9%9D%A2%E8%AF%95/1.%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html","/golang/%E9%9D%A2%E8%AF%95/2.%E8%BF%9B%E9%98%B6%E5%8E%9F%E7%90%86.html","/golang/%E9%9D%A2%E8%AF%95/","/guide/bar/","/guide/bar/baz.html","/guide/foo/","/guide/foo/ray.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Elasticsearch.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/EMQX.html","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/RocketMQ.html","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/kafka.html","/middleware/%E7%BD%91%E5%85%B3/Nginx.html","/middleware/%E7%BD%91%E5%85%B3/","/middleware/%E8%BF%90%E7%BB%B4/Docker.html","/middleware/%E8%BF%90%E7%BB%B4/Kubernetes.html","/middleware/%E8%BF%90%E7%BB%B4/","/golang/web%E6%A1%86%E6%9E%B6/gin/0.use.html","/golang/web%E6%A1%86%E6%9E%B6/gin/1.howWork.html","/golang/web%E6%A1%86%E6%9E%B6/gin/","/golang/web%E6%A1%86%E6%9E%B6/go-zero/0.use.html","/golang/web%E6%A1%86%E6%9E%B6/go-zero/1.howWork.html","/golang/web%E6%A1%86%E6%9E%B6/go-zero/","/golang/web%E6%A1%86%E6%9E%B6/lib/","/golang/%E5%8E%9F%E7%90%86/standard/0.intro.html","/golang/%E5%8E%9F%E7%90%86/standard/","/golang/%E5%8E%9F%E7%90%86/standard/encode.html","/golang/%E5%8E%9F%E7%90%86/standard/flag.html","/golang/%E5%8E%9F%E7%90%86/standard/http.html","/golang/%E5%8E%9F%E7%90%86/standard/log.html","/golang/%E5%8E%9F%E7%90%86/standard/math.html","/golang/%E5%8E%9F%E7%90%86/standard/net.html","/golang/%E5%8E%9F%E7%90%86/standard/sort.html","/golang/%E5%8E%9F%E7%90%86/standard/strconv.html","/golang/%E5%8E%9F%E7%90%86/standard/strings.html","/golang/%E5%8E%9F%E7%90%86/standard/template.html","/golang/%E5%8E%9F%E7%90%86/standard/time.html","/golang/%E5%8E%9F%E7%90%86/standard/unicode.html","/golang/%E5%8E%9F%E7%90%86/standard/unsafe.html","/golang/%E5%8E%9F%E7%90%86/theory/0.runtime.html","/golang/%E5%8E%9F%E7%90%86/theory/1.%E5%B9%B6%E5%8F%91.html","/golang/%E5%8E%9F%E7%90%86/theory/2.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html","/golang/%E5%8E%9F%E7%90%86/theory/3.%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86.html","/golang/%E5%8E%9F%E7%90%86/theory/","/404.html","/computer/","/framework/","/golang/","/middleware/"],fe="SLIMSEARCH_QUERY_HISTORY",c=G(fe,[]),ke=()=>{const{queryHistoryCount:t}=k,s=t>0;return{enabled:s,queryHistories:c,addQueryHistory:E=>{s&&(c.value=Array.from(new Set([E,...c.value.slice(0,t-1)])))},removeQueryHistory:E=>{c.value=[...c.value.slice(0,E),...c.value.slice(E+1)]}}},q=t=>we[t.id]+("anchor"in t?`#${t.anchor}`:""),De="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:z}=k,A=G(De,[]),Ce=()=>{const t=z>0;return{enabled:t,resultHistories:A,addResultHistory:s=>{if(t){const E={link:q(s),display:s.display};"header"in s&&(E.header=s.header),A.value=[E,...A.value.slice(0,z-1)]}},removeResultHistory:s=>{A.value=[...A.value.slice(0,s),...A.value.slice(s+1)]}}},He=t=>{const s=ge(),E=P(),D=he(),o=x(0),y=f(()=>o.value>0),B=Be([]);return de(()=>{const{search:d,terminate:C}=ce(),v=Ae(i=>{const{resultsFilter:F=n=>n,querySplitter:L,suggestionsFilter:H,...b}=s.value;i?(o.value+=1,d(i,E.value,b).then(n=>F(n,i,E.value,D.value)).then(n=>{o.value-=1,B.value=n}).catch(n=>{console.warn(n),o.value-=1,o.value||(B.value=[])})):B.value=[]},k.searchDelay-k.suggestDelay,{maxWait:5e3});U([t,E],([i])=>{v(i.join(" "))},{immediate:!0}),ve(()=>{C()})}),{isSearching:y,results:B}};var Re=le({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(t,{emit:s}){const E=ae(),D=P(),o=te(se),{enabled:y,addQueryHistory:B,queryHistories:d,removeQueryHistory:C}=ke(),{enabled:v,resultHistories:i,addResultHistory:F,removeResultHistory:L}=Ce(),H=y||v,b=Ee(t,"queries"),{results:n,isSearching:K}=He(b),r=re({isQuery:!0,index:0}),g=x(0),h=x(0),M=f(()=>H&&(d.value.length>0||i.value.length>0)),R=f(()=>n.value.length>0),Q=f(()=>n.value[g.value]||null),O=()=>{const{isQuery:e,index:l}=r;l===0?(r.isQuery=!e,r.index=e?i.value.length-1:d.value.length-1):r.index=l-1},W=()=>{const{isQuery:e,index:l}=r;l===(e?d.value.length-1:i.value.length-1)?(r.isQuery=!e,r.index=0):r.index=l+1},_=()=>{g.value=g.value>0?g.value-1:n.value.length-1,h.value=Q.value.contents.length-1},N=()=>{g.value=g.value<n.value.length-1?g.value+1:0,h.value=0},Y=()=>{h.value<Q.value.contents.length-1?h.value+=1:N()},J=()=>{h.value>0?h.value-=1:_()},S=e=>e.map(l=>pe(l)?l:a(l[0],l[1])),V=e=>{if(e.type==="customField"){const l=ye[e.index]||"$content",[u,w=""]=Fe(l)?l[D.value].split("$content"):l.split("$content");return e.display.map(m=>a("div",S([u,...m,w])))}return e.display.map(l=>a("div",S(l)))},p=()=>{g.value=0,h.value=0,s("updateQuery",""),s("close")},X=()=>y?a("ul",{class:"slimsearch-result-list"},a("li",{class:"slimsearch-result-list-item"},[a("div",{class:"slimsearch-result-title"},o.value.queryHistory),d.value.map((e,l)=>a("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===l}],onClick:()=>{s("updateQuery",e)}},[a(I,{class:"slimsearch-result-type"}),a("div",{class:"slimsearch-result-content"},e),a("button",{class:"slimsearch-remove-icon",innerHTML:j,onClick:u=>{u.preventDefault(),u.stopPropagation(),C(l)}})]))])):null,Z=()=>v?a("ul",{class:"slimsearch-result-list"},a("li",{class:"slimsearch-result-list-item"},[a("div",{class:"slimsearch-result-title"},o.value.resultHistory),i.value.map((e,l)=>a(T,{to:e.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===l}],onClick:()=>{p()}},()=>[a(I,{class:"slimsearch-result-type"}),a("div",{class:"slimsearch-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(u=>S(u)).flat())]),a("button",{class:"slimsearch-remove-icon",innerHTML:j,onClick:u=>{u.preventDefault(),u.stopPropagation(),L(l)}})]))])):null;return oe("keydown",e=>{if(t.isFocusing){if(R.value){if(e.key==="ArrowUp")J();else if(e.key==="ArrowDown")Y();else if(e.key==="Enter"){const l=Q.value.contents[h.value];B(t.queries.join(" ")),F(l),E.push(q(l)),p()}}else if(v){if(e.key==="ArrowUp")O();else if(e.key==="ArrowDown")W();else if(e.key==="Enter"){const{index:l}=r;r.isQuery?(s("updateQuery",d.value[l]),e.preventDefault()):(E.push(i.value[l].link),p())}}}}),U([g,h],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["slimsearch-result-wrapper",{empty:t.queries.length?!R.value:!M.value}],id:"slimsearch-results"},t.queries.length?K.value?a(ne,{hint:o.value.searching}):R.value?a("ul",{class:"slimsearch-result-list"},n.value.map(({title:e,contents:l},u)=>{const w=g.value===u;return a("li",{class:["slimsearch-result-list-item",{active:w}]},[a("div",{class:"slimsearch-result-title"},e||o.value.defaultTitle),l.map((m,ee)=>{const $=w&&h.value===ee;return a(T,{to:q(m),class:["slimsearch-result-item",{active:$,"aria-selected":$}],onClick:()=>{B(t.queries.join(" ")),F(m),p()}},()=>[m.type==="text"?null:a(m.type==="title"?ie:m.type==="heading"?ue:me,{class:"slimsearch-result-type"}),a("div",{class:"slimsearch-result-content"},[m.type==="text"&&m.header?a("div",{class:"content-header"},m.header):null,a("div",V(m))])])})])})):o.value.emptyResult:H?M.value?[X(),Z()]:o.value.emptyHistory:o.value.emptyResult)}});export{Re as default};
