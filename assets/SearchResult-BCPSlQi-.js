import{u as j,g as le,h as te,i as U,j as ae,k as Ee,t as se,l as re,m as x,n as D,p as ne,w as _,q as t,v as oe,R as $,x as ie,y as me,z as Be,D as ue,A as ge,B as he,C as de,E as Ae,F as ce,G as f,H as ve,I as Fe,J as pe,K,L as T,M as ye}from"./app-DQYOo4w9.js";const we=["/","/portfolio.html","/computer/0.%E7%AE%97%E6%B3%95.html","/computer/1.%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html","/computer/2.%E8%A7%84%E5%88%92.html","/share/git%20%E8%A7%84%E8%8C%83.html","/share/git.html","/share/markdown.html","/share/%E5%A5%BD%E7%89%A9%E5%88%86%E4%BA%AB.html","/templates/","/templates/best-practice-template.html","/templates/reference-template.html","/templates/tutorial-template.html","/templates/writing-standards.html","/framework/%E5%88%86%E5%B8%83%E5%BC%8F/","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Consul.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Docker.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/GRPC.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Jaeger.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Kong.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Kubernetes.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Nacos.html","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/","/framework/%E5%BE%AE%E6%9C%8D%E5%8A%A1/Sentinel.html","/framework/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8/","/framework/%E9%AB%98%E5%8F%AF%E7%94%A8/","/computer/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/","/computer/%E7%BD%91%E7%BB%9C/","/computer/%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80.html","/golang/Gorm%E6%A1%86%E6%9E%B6/0.use.html","/golang/Gorm%E6%A1%86%E6%9E%B6/1.howWork.html","/golang/Gorm%E6%A1%86%E6%9E%B6/","/golang/web%E6%A1%86%E6%9E%B6/","/golang/%E5%8E%9F%E7%90%86/","/golang/%E5%8E%9F%E7%90%86/%E5%B8%B8%E7%94%A8%E5%8C%85%E5%A4%A7%E5%85%A8.html","/golang/%E5%9F%BA%E7%A1%80/0.golang.html","/golang/%E5%9F%BA%E7%A1%80/1.grammer.html","/golang/%E5%9F%BA%E7%A1%80/2.datatype.html","/golang/%E5%9F%BA%E7%A1%80/3.variable.html","/golang/%E5%9F%BA%E7%A1%80/4.io.html","/golang/%E5%9F%BA%E7%A1%80/5.condition.html","/golang/%E5%9F%BA%E7%A1%80/6.data_structures.html","/golang/%E5%9F%BA%E7%A1%80/","/golang/%E8%BF%9B%E9%98%B6/1.interface.html","/golang/%E8%BF%9B%E9%98%B6/10.cgo.html","/golang/%E8%BF%9B%E9%98%B6/11.pprof.html","/golang/%E8%BF%9B%E9%98%B6/12.followUp.html","/golang/%E8%BF%9B%E9%98%B6/2.generic.html","/golang/%E8%BF%9B%E9%98%B6/3.reflect.html","/golang/%E8%BF%9B%E9%98%B6/4.types.html","/golang/%E8%BF%9B%E9%98%B6/5.error.html","/golang/%E8%BF%9B%E9%98%B6/6.file.html","/golang/%E8%BF%9B%E9%98%B6/7.concurrency.html","/golang/%E8%BF%9B%E9%98%B6/8.module.html","/golang/%E8%BF%9B%E9%98%B6/9.test.html","/golang/%E8%BF%9B%E9%98%B6/","/golang/%E8%BF%9B%E9%98%B6/notes.html","/golang/%E8%BF%9B%E9%98%B6/test.html","/golang/%E9%9D%A2%E8%AF%95/1.%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95.html","/golang/%E9%9D%A2%E8%AF%95/2.%E8%BF%9B%E9%98%B6%E5%8E%9F%E7%90%86.html","/golang/%E9%9D%A2%E8%AF%95/","/golang/%E9%9D%A2%E8%AF%95/%E5%A4%A7%E5%8E%82%E9%9D%A2%E8%AF%95%E9%A2%98.html","/golang/%E9%9D%A2%E8%AF%95/%E5%AF%B9%E8%B1%A1%E6%B1%A0.html","/golang/%E9%9D%A2%E8%AF%95/%E6%9E%81%E6%99%BA%E5%A4%A9%E4%B8%8B.html","/golang/%E9%9D%A2%E8%AF%95/%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E7%AD%94%E6%A1%88%EF%BC%89.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Elasticsearch-Go.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Elasticsearch.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MYSQL%E9%AB%98%E7%BA%A7.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB-Go.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MongoDB.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL-Go.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis-Go.html","/middleware/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis.html","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/EMQX.html","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/Kafka1.html","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/Kafka_go.html","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/RocketMQ.html","/middleware/%E6%B6%88%E6%81%AF%E7%BB%84%E4%BB%B6/kafka.html","/middleware/%E7%BD%91%E5%85%B3/Kong.html","/middleware/%E7%BD%91%E5%85%B3/Nginx.html","/middleware/%E7%BD%91%E5%85%B3/","/middleware/%E8%BF%90%E7%BB%B4/Docker-Do.html","/middleware/%E8%BF%90%E7%BB%B4/Docker.html","/middleware/%E8%BF%90%E7%BB%B4/Jenkins.html","/middleware/%E8%BF%90%E7%BB%B4/Kubernetes.html","/middleware/%E8%BF%90%E7%BB%B4/","/middleware/%E8%BF%90%E7%BB%B4/kubernetes-Do.html","/middleware/%E9%89%B4%E6%9D%83/casbin.html","/golang/web%E6%A1%86%E6%9E%B6/gin/0.use.html","/golang/web%E6%A1%86%E6%9E%B6/gin/1.howWork.html","/golang/web%E6%A1%86%E6%9E%B6/gin/","/golang/web%E6%A1%86%E6%9E%B6/go-zero/0.use.html","/golang/web%E6%A1%86%E6%9E%B6/go-zero/1.howWork.html","/golang/web%E6%A1%86%E6%9E%B6/go-zero/","/golang/web%E6%A1%86%E6%9E%B6/lib/","/golang/web%E6%A1%86%E6%9E%B6/lib/Zap.html","/golang/web%E6%A1%86%E6%9E%B6/lib/%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81%E9%80%89%E5%9E%8B.html","/golang/web%E6%A1%86%E6%9E%B6/lib/%E7%9B%91%E6%8E%A7.html","/golang/%E5%8E%9F%E7%90%86/standard/0.intro.html","/golang/%E5%8E%9F%E7%90%86/standard/","/golang/%E5%8E%9F%E7%90%86/standard/encode.html","/golang/%E5%8E%9F%E7%90%86/standard/flag.html","/golang/%E5%8E%9F%E7%90%86/standard/http.html","/golang/%E5%8E%9F%E7%90%86/standard/log.html","/golang/%E5%8E%9F%E7%90%86/standard/math.html","/golang/%E5%8E%9F%E7%90%86/standard/net.html","/golang/%E5%8E%9F%E7%90%86/standard/sort.html","/golang/%E5%8E%9F%E7%90%86/standard/strconv.html","/golang/%E5%8E%9F%E7%90%86/standard/strings.html","/golang/%E5%8E%9F%E7%90%86/standard/template.html","/golang/%E5%8E%9F%E7%90%86/standard/time.html","/golang/%E5%8E%9F%E7%90%86/standard/unicode.html","/golang/%E5%8E%9F%E7%90%86/standard/unsafe.html","/golang/%E5%8E%9F%E7%90%86/theory/0.runtime.html","/golang/%E5%8E%9F%E7%90%86/theory/1.%E5%B9%B6%E5%8F%91.html","/golang/%E5%8E%9F%E7%90%86/theory/2.%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html","/golang/%E5%8E%9F%E7%90%86/theory/3.%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86.html","/golang/%E5%8E%9F%E7%90%86/theory/","/404.html","/computer/","/share/","/framework/","/golang/","/middleware/","/middleware/%E9%89%B4%E6%9D%83/"],De="SLIMSEARCH_QUERY_HISTORY",A=j(De,[]),fe=()=>{const{queryHistoryCount:a}=f,E=a>0;return{enabled:E,queryHistories:A,addQueryHistory:s=>{E&&(A.value=Array.from(new Set([s,...A.value.slice(0,a-1)])))},removeQueryHistory:s=>{A.value=[...A.value.slice(0,s),...A.value.slice(s+1)]}}},q=a=>we[a.id]+("anchor"in a?`#${a.anchor}`:""),ke="SLIMSEARCH_RESULT_HISTORY",{resultHistoryCount:I}=f,c=j(ke,[]),Ce=()=>{const a=I>0;return{enabled:a,resultHistories:c,addResultHistory:E=>{if(a){const s={link:q(E),display:E.display};"header"in E&&(s.header=E.header),c.value=[s,...c.value.slice(0,I-1)]}},removeResultHistory:E=>{c.value=[...c.value.slice(0,E),...c.value.slice(E+1)]}}},be=a=>{const E=ue(),s=U(),k=ge(),n=x(0),F=D(()=>n.value>0),h=he([]);return de(()=>{const{search:d,terminate:C}=Ae(),v=ce(i=>{const{resultsFilter:p=o=>o,querySplitter:L,suggestionsFilter:b,...H}=E.value;i?(n.value+=1,d(i,s.value,H).then(o=>p(o,i,s.value,k.value)).then(o=>{n.value-=1,h.value=o}).catch(o=>{console.warn(o),n.value-=1,n.value||(h.value=[])})):h.value=[]},f.searchDelay-f.suggestDelay,{maxWait:5e3});_([a,s],([i])=>{v(i.join(" "))},{immediate:!0}),ve(()=>{C()})}),{isSearching:F,results:h}};var Re=le({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:E}){const s=te(),k=U(),n=ae(Ee),{enabled:F,addQueryHistory:h,queryHistories:d,removeQueryHistory:C}=fe(),{enabled:v,resultHistories:i,addResultHistory:p,removeResultHistory:L}=Ce(),b=F||v,H=se(a,"queries"),{results:o,isSearching:z}=be(H),r=re({isQuery:!0,index:0}),u=x(0),g=x(0),M=D(()=>b&&(d.value.length>0||i.value.length>0)),R=D(()=>o.value.length>0),Q=D(()=>o.value[u.value]||null),P=()=>{const{isQuery:e,index:l}=r;l===0?(r.isQuery=!e,r.index=e?i.value.length-1:d.value.length-1):r.index=l-1},W=()=>{const{isQuery:e,index:l}=r;l===(e?d.value.length-1:i.value.length-1)?(r.isQuery=!e,r.index=0):r.index=l+1},Y=()=>{u.value=u.value>0?u.value-1:o.value.length-1,g.value=Q.value.contents.length-1},J=()=>{u.value=u.value<o.value.length-1?u.value+1:0,g.value=0},O=()=>{g.value<Q.value.contents.length-1?g.value+=1:J()},N=()=>{g.value>0?g.value-=1:Y()},S=e=>e.map(l=>ye(l)?l:t(l[0],l[1])),V=e=>{if(e.type==="customField"){const l=Fe[e.index]||"$content",[m,w=""]=pe(l)?l[k.value].split("$content"):l.split("$content");return e.display.map(B=>t("div",S([m,...B,w])))}return e.display.map(l=>t("div",S(l)))},y=()=>{u.value=0,g.value=0,E("updateQuery",""),E("close")},X=()=>F?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},n.value.queryHistory),d.value.map((e,l)=>t("div",{class:["slimsearch-result-item",{active:r.isQuery&&r.index===l}],onClick:()=>{E("updateQuery",e)}},[t(K,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},e),t("button",{class:"slimsearch-remove-icon",innerHTML:T,onClick:m=>{m.preventDefault(),m.stopPropagation(),C(l)}})]))])):null,Z=()=>v?t("ul",{class:"slimsearch-result-list"},t("li",{class:"slimsearch-result-list-item"},[t("div",{class:"slimsearch-result-title"},n.value.resultHistory),i.value.map((e,l)=>t($,{to:e.link,class:["slimsearch-result-item",{active:!r.isQuery&&r.index===l}],onClick:()=>{y()}},()=>[t(K,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(m=>S(m)).flat())]),t("button",{class:"slimsearch-remove-icon",innerHTML:T,onClick:m=>{m.preventDefault(),m.stopPropagation(),L(l)}})]))])):null;return ne("keydown",e=>{if(a.isFocusing){if(R.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")O();else if(e.key==="Enter"){const l=Q.value.contents[g.value];h(a.queries.join(" ")),p(l),s.push(q(l)),y()}}else if(v){if(e.key==="ArrowUp")P();else if(e.key==="ArrowDown")W();else if(e.key==="Enter"){const{index:l}=r;r.isQuery?(E("updateQuery",d.value[l]),e.preventDefault()):(s.push(i.value[l].link),y())}}}}),_([u,g],()=>{var e;(e=document.querySelector(".slimsearch-result-list-item.active .slimsearch-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["slimsearch-result-wrapper",{empty:a.queries.length?!R.value:!M.value}],id:"slimsearch-results"},a.queries.length?z.value?t(oe,{hint:n.value.searching}):R.value?t("ul",{class:"slimsearch-result-list"},o.value.map(({title:e,contents:l},m)=>{const w=u.value===m;return t("li",{class:["slimsearch-result-list-item",{active:w}]},[t("div",{class:"slimsearch-result-title"},e||n.value.defaultTitle),l.map((B,ee)=>{const G=w&&g.value===ee;return t($,{to:q(B),class:["slimsearch-result-item",{active:G,"aria-selected":G}],onClick:()=>{h(a.queries.join(" ")),p(B),y()}},()=>[B.type==="text"?null:t(B.type==="title"?ie:B.type==="heading"?me:Be,{class:"slimsearch-result-type"}),t("div",{class:"slimsearch-result-content"},[B.type==="text"&&B.header?t("div",{class:"content-header"},B.header):null,t("div",V(B))])])})])})):n.value.emptyResult:b?M.value?[X(),Z()]:n.value.emptyHistory:n.value.emptyResult)}});export{Re as default};
