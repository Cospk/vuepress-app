import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a as i,o}from"./app-DIJDtupu.js";const r={};function a(s,e){return o(),n("div",null,e[0]||(e[0]=[i('<div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>go package main import &quot;time&quot; func gen(done chan struct{}, nums ...int) &lt;-chan int { out := make(chan int) go func() { defer close(out) for \\_, n := range nums { select { case out &lt;- n: case &lt;-done: return } } }() return out } func main() { defer func() { time.Sleep(time.Second) fmt.Println(&quot;the number of goroutines: &quot;, runtime.NumGoroutine()) }() // Set up the pipeline. done := make(chan struct{}) defer close(done) out := gen(done, 2, 3) for n := range out { fmt.Println(n) // 2 time.Sleep(5 \\* time.Second) // done thing, 可能异常中断接收 if true { // if err != nil break } } }</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div>',1)]))}const u=t(r,[["render",a],["__file","Go-笔记之如何防止-goroutine-泄露.html.vue"]]),m=JSON.parse('{"path":"/golang/%E5%8E%9F%E7%90%86/theory/Go-%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2-goroutine-%E6%B3%84%E9%9C%B2.html","title":"Go 笔记之如何防止 goroutine 泄露","lang":"zh-CN","frontmatter":{"title":"Go 笔记之如何防止 goroutine 泄露","source_url":"https://studygolang.com/articles/22463","category":"Go原理教程","head":[["meta",{"property":"og:url","content":"https://Cospk.github.io/vuepress-app/golang/%E5%8E%9F%E7%90%86/theory/Go-%E7%AC%94%E8%AE%B0%E4%B9%8B%E5%A6%82%E4%BD%95%E9%98%B2%E6%AD%A2-goroutine-%E6%B3%84%E9%9C%B2.html"}],["meta",{"property":"og:site_name","content":"Golang全栈指南"}],["meta",{"property":"og:title","content":"Go 笔记之如何防止 goroutine 泄露"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-08-27T12:02:38.000Z"}],["meta",{"property":"article:modified_time","content":"2025-08-27T12:02:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Go 笔记之如何防止 goroutine 泄露\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-08-27T12:02:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Cospk\\",\\"url\\":\\"https://savvygo.cn\\"}]}"]]},"headers":[],"git":{"createdTime":1756202807000,"updatedTime":1756296158000,"contributors":[{"name":"shiwei","username":"shiwei","email":"xie@gmail.com","commits":2,"url":"https://github.com/shiwei"}]},"readingTime":{"minutes":0.39,"words":116},"filePathRelative":"golang/原理/theory/Go-笔记之如何防止-goroutine-泄露.md","localizedDate":"2025年8月26日","excerpt":"<div class=\\"language- line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"\\" data-title=\\"\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>go package main import \\"time\\" func gen(done chan struct{}, nums ...int) &lt;-chan int { out := make(chan int) go func() { defer close(out) for \\\\_, n := range nums { select { case out &lt;- n: case &lt;-done: return } } }() return out } func main() { defer func() { time.Sleep(time.Second) fmt.Println(\\"the number of goroutines: \\", runtime.NumGoroutine()) }() // Set up the pipeline. done := make(chan struct{}) defer close(done) out := gen(done, 2, 3) for n := range out { fmt.Println(n) // 2 time.Sleep(5 \\\\* time.Second) // done thing, 可能异常中断接收 if true { // if err != nil break } } }</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>"}');export{u as comp,m as data};
